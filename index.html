<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="iOS 修炼中...">
<meta property="og:type" content="website">
<meta property="og:title" content="以梦为马">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="以梦为马">
<meta property="og:description" content="iOS 修炼中...">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="以梦为马">
<meta name="twitter:description" content="iOS 修炼中...">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>以梦为马</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">以梦为马</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">谨以此纪念岁月</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-主页 menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />主页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - SDWebImage 的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - SDWebImage 的使用/" itemprop="url">
                  iOS开发之 - SDWebImage 的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://upload-images.jianshu.io/upload_images/2665449-6e9f0fccaeeca1e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="SDWebImage"></p>
<blockquote>
<p><a href="https://github.com/rs/SDWebImage" target="_blank" rel="noopener">SDWebImage</a> 是一个开源的第三方库，在我们 iOS 开发中用到 SDWebImage 的地方有很多，比如在 tableView 中，在 collectionView 中……不然它也不会高达 16000+ 这么多的 Star 了😄。下面是总结的一些 SDWebImage 相关的具体用法。</p>
</blockquote>
<p>首先用 cocoapods 导入 SDWebImage 框架，网上有很多安装以及使用 cocoapods 的教程，在此就不累述了，这篇文章的内容是在导入 SDWebImage 基础之上的，主要是总结了一些 SDWebImage 的具体用法。</p>
<ul>
<li><p>简单下载图片</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">方式一：</span><br><span class="line"><span class="comment">// 只下载图片</span></span><br><span class="line">[self.imageView <span class="string">sd_setImageWithURL:</span>@<span class="string">"URL地址"</span>]];</span><br><span class="line"></span><br><span class="line">方式二：</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">第二个参数:占位图片</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[self.imageView <span class="string">sd_setImageWithURL:</span>[NSURL <span class="string">URLWithString:</span>@<span class="string">"URL地址"</span>]</span><br><span class="line"><span class="string">placeholderImage:</span>[UIImage <span class="string">imageNamed:</span> @<span class="string">"占位图片名"</span>]];</span><br></pre></td></tr></table></figure>
</li>
<li><p>下载成功或失败之后做的事情</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">方式一：</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">block:下载成功或失败之后的回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="keyword">self</span>.imageView sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"URL地址"</span>]</span><br><span class="line">completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功或失败之后的回调"</span>);</span><br><span class="line">&#125;];</span><br><span class="line">方式二：</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">第二个参数:占位图片</span></span><br><span class="line"><span class="comment">block:下载成功或失败之后的回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="keyword">self</span>.imageView sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"URL地址"</span>]</span><br><span class="line">placeholderImage:[<span class="built_in">UIImage</span> imageNamed: <span class="string">@"占位图片名"</span>]</span><br><span class="line">completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功或失败之后的回调"</span>);</span><br><span class="line">&#125;];</span><br><span class="line">方式三：</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">第二个参数:占位图片</span></span><br><span class="line"><span class="comment">第三个参数:下载图片的策略</span></span><br><span class="line"><span class="comment">第四个参数:progress进度</span></span><br><span class="line"><span class="comment">第五个参数:completed 下载完成之后的回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="keyword">self</span>.imageView sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"URL地址"</span>]</span><br><span class="line">placeholderImage:[<span class="built_in">UIImage</span> imageNamed: <span class="string">@"占位图片名"</span>]</span><br><span class="line">options:SDWebImageRetryFailed</span><br><span class="line">progress:^(<span class="built_in">NSInteger</span> receivedSize, <span class="built_in">NSInteger</span> expectedSize) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"progress进度"</span>);</span><br><span class="line">&#125;</span><br><span class="line">completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功或失败之后的回调"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>借用一个方法简单的介绍一下 options 中的选项</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"><span class="comment">//失败后重试</span></span><br><span class="line">SDWebImageRetryFailed = <span class="number">1</span> &lt;&lt; <span class="number">0</span>,</span><br><span class="line"><span class="comment">//UI交互期间开始下载，导致延迟下载比如UIScrollView减速。</span></span><br><span class="line">SDWebImageLowPriority = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line"><span class="comment">//只进行内存缓存</span></span><br><span class="line">SDWebImageCacheMemoryOnly = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,</span><br><span class="line"><span class="comment">//这个标志可以渐进式下载,显示的图像是逐步在下载</span></span><br><span class="line">SDWebImageProgressiveDownload = <span class="number">1</span> &lt;&lt; <span class="number">3</span>,</span><br><span class="line"><span class="comment">//刷新缓存</span></span><br><span class="line">SDWebImageRefreshCached = <span class="number">1</span> &lt;&lt; <span class="number">4</span>,</span><br><span class="line"><span class="comment">//后台下载</span></span><br><span class="line">SDWebImageContinueInBackground = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,</span><br><span class="line"><span class="comment">//NSMutableURLRequest.HTTPShouldHandleCookies = YES;</span></span><br><span class="line">SDWebImageHandleCookies = <span class="number">1</span> &lt;&lt; <span class="number">6</span>,</span><br><span class="line"><span class="comment">//允许使用无效的SSL证书</span></span><br><span class="line"><span class="comment">//SDWebImageAllowInvalidSSLCertificates = 1 &lt;&lt; 7,</span></span><br><span class="line"><span class="comment">//优先下载</span></span><br><span class="line">SDWebImageHighPriority = <span class="number">1</span> &lt;&lt; <span class="number">8</span>,</span><br><span class="line"><span class="comment">//延迟占位符</span></span><br><span class="line">SDWebImageDelayPlaceholder = <span class="number">1</span> &lt;&lt; <span class="number">9</span>,</span><br><span class="line"><span class="comment">//改变动画形象</span></span><br><span class="line">SDWebImageTransformAnimatedImage = <span class="number">1</span> &lt;&lt; <span class="number">10</span>,</span><br><span class="line">*/</span><br><span class="line">[self.imageView sd_setImageWithURL:[NSURL URLWithString:@<span class="string">"URL地址"</span>]</span><br><span class="line">placeholderImage:[UIImage imageNamed: @<span class="string">"占位图片名"</span>]</span><br><span class="line">options:SDWebImageRetryFailed];</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 SDWebImageManager 下载图片</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SDWebImageManager *imageManager = [SDWebImageManager sharedManager];</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">第二个参数:下载图片的(策略)</span></span><br><span class="line"><span class="comment">第三个参数:progress进度</span></span><br><span class="line"><span class="comment">第四个参数:completed 下载完成之后的回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[imageManager downloadImageWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"URL地址"</span>]</span><br><span class="line">options:SDWebImageRetryFailed</span><br><span class="line">progress:^(<span class="built_in">NSInteger</span> receivedSize, <span class="built_in">NSInteger</span> expectedSize) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"progress进度"</span>);</span><br><span class="line">&#125;</span><br><span class="line">completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">BOOL</span> finished, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功或失败之后的回调"</span>);</span><br><span class="line"><span class="keyword">if</span> (image) &#123;</span><br><span class="line"><span class="keyword">self</span>.image = image;</span><br><span class="line">&#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 SDWebImageDownloader 下载图片</p>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SDWebImageDownloader *imageDownloader = [SDWebImageDownloader sharedDownloader];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数:图片的url</span></span><br><span class="line"><span class="comment">第二个参数:下载图片的策略</span></span><br><span class="line"><span class="comment">第三个参数:progressBlock 进度</span></span><br><span class="line"><span class="comment">第四个参数:completedBlock 下载完成之后的回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[imageDownloader downloadImageWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"URL地址"</span>]</span><br><span class="line">options:SDWebImageDownloaderLowPriority</span><br><span class="line">progress:^(<span class="built_in">NSInteger</span> receivedSize, <span class="built_in">NSInteger</span> expectedSize) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"progress进度"</span>);</span><br><span class="line">&#125;</span><br><span class="line">completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSData</span> *data, <span class="built_in">NSError</span> *error, <span class="built_in">BOOL</span> finished) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功或失败之后的回调"</span>);</span><br><span class="line"><span class="keyword">if</span> (image) &#123;</span><br><span class="line"><span class="keyword">self</span>.image = image;</span><br><span class="line">&#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<ul>
<li>内存警告时调用</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当程序收到内存警告时会调用这个方法</span></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">[<span class="meta">super didReceiveMemoryWarning</span>];</span><br><span class="line"><span class="comment">// 清除缓存</span></span><br><span class="line">[<span class="meta">[SDWebImageManager sharedManager</span>].imageCache clearDisk]; <span class="comment">// clean:删除过期缓存</span></span><br><span class="line">[<span class="meta">[SDWebImageManager sharedManager</span>].imageCache cleanDisk]; <span class="comment">// clear:直接删除然后重新创建</span></span><br><span class="line"><span class="comment">// 取消下载</span></span><br><span class="line">[<span class="meta">[SDWebImageManager sharedManager</span>] cancelAll];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>其它一些很有用的方法</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取消掉当前所有的下载</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">cancelAll</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查是否有图片在下载</span></span><br><span class="line"><span class="selector-tag">-</span> (BOOL)<span class="selector-tag">isRunning</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将图片存入cache的方法</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">saveImageToCache</span><span class="selector-pseudo">:(UIImage</span> *)<span class="selector-tag">image</span> <span class="selector-tag">forURL</span><span class="selector-pseudo">:(NSURL</span> *)<span class="selector-tag">url</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过图片的url判断其是否已经存在</span></span><br><span class="line"><span class="selector-tag">-</span> (BOOL)<span class="selector-tag">cachedImageExistsForURL</span><span class="selector-pseudo">:(NSURL</span> *)<span class="selector-tag">url</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测一个image是否已经被缓存到磁盘(是否存且仅存在disk里).</span></span><br><span class="line"><span class="selector-tag">-</span> (BOOL)<span class="selector-tag">diskImageExistsForURL</span><span class="selector-pseudo">:(NSURL</span> *)<span class="selector-tag">url</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果检测到图片已经被缓存,那么执行回调block</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">cachedImageExistsForURL</span><span class="selector-pseudo">:(NSURL</span> *)<span class="selector-tag">url</span></span><br><span class="line"><span class="selector-tag">completion</span><span class="selector-pseudo">:(SDWebImageCheckCacheCompletionBlock)completionBlock</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果检测到图片已经在磁盘中,那么执行回调block</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">diskImageExistsForURL</span><span class="selector-pseudo">:(NSURL</span> *)<span class="selector-tag">url</span></span><br><span class="line"><span class="selector-tag">completion</span><span class="selector-pseudo">:(SDWebImageCheckCacheCompletionBlock)completionBlock</span>;</span><br></pre></td></tr></table></figure>
<p>以上是关于 SDWebImage 的一些用法总结，以后再用到其它的了，会再来补充。另外如果有写错的地方，欢迎朋友们指正！谢谢😊！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/ 前端笔记 - Webstorm常用快捷键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/ 前端笔记 - Webstorm常用快捷键/" itemprop="url">
                  前端笔记 - Webstorm常用快捷键
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>需要做一些前端的东西，……朋友推荐了 Webstorm 编辑器，据说很不错，在开始码代码之前，想着如果要提高效率，那掌握一些常用的快捷键应该是少不了的，于是就查了一下，整理出来。用的是 Mac 系统，而在 Windows 系统上，command 即 Ctrl。</p>
</blockquote>
<h3 id="一、必备快捷键"><a href="#一、必备快捷键" class="headerlink" title="一、必备快捷键"></a>一、必备快捷键</h3><ul>
<li>command+/：注释当前行</li>
<li>command+Shift+/：当前位置插入注释</li>
<li>command+Alt+/：块注释，并Focus到首行，写注释说明用的</li>
<li>command+Shift+A：选择当前标签前后，修改标签用的</li>
<li>F11：全屏</li>
<li>Shift+F11：全屏免打扰模式，只编辑当前文件</li>
<li>Alt+F3：选择所有相同的词</li>
<li>Alt+.：闭合标签</li>
<li>Alt+Shift+数字：分屏显示</li>
<li>Alt+数字：切换打开第N个文件</li>
<li>Shift+右键拖动：光标多不，用来更改或插入列内容</li>
<li>鼠标的前进后退键可切换Tab文件</li>
<li>按 command，依次点击或选取，可需要编辑的多个位置</li>
<li>按 command+Shift+上下键，可替换行</li>
<li>command+Shift+P：打开命令面板</li>
<li>command+P：搜索项目中的文件</li>
<li>command+G：跳转到第几行</li>
<li>command+W：关闭当前打开文件</li>
<li>command+Shift+W：关闭所有打开文件</li>
<li>command+Shift+V：粘贴并格式化</li>
<li>command+D：选择单词，重复可增加选择下一个相同的单词</li>
<li>command+L：选择行，重复可依次增加选择下一行</li>
<li>command+Shift+L：选择多行</li>
<li>command+Shift+Enter：在当前行前插入新行</li>
<li>command+X：删除当前行</li>
<li>command+M：跳转到对应括号</li>
<li>command+U：软撤销，撤销光标位置</li>
<li>command+J：选择标签内容</li>
<li>command+F：查找内容</li>
<li>command+Shift+F：查找并替换</li>
<li>command+H：替换</li>
<li>command+R：前往 method</li>
<li>command+N：新建窗口</li>
<li>command+K+B：开关侧栏</li>
<li>command+Shift+M：选中当前括号内容，重复可选着括号本身</li>
<li>command+F2：设置/删除标记</li>
</ul>
<h3 id="二、选择类快捷键"><a href="#二、选择类快捷键" class="headerlink" title="二、选择类快捷键"></a>二、选择类快捷键</h3><ul>
<li>command+← 向左单位性地移动光标，快速移动光标。</li>
<li>command+→ 向右单位性地移动光标，快速移动光标。</li>
<li>shift+↑ 向上选中多行。</li>
<li>shift+↓ 向下选中多行。</li>
<li>Shift+← 向左选中文本。</li>
<li>Shift+→ 向右选中文本。</li>
<li>command+Shift+← 向左单位性地选中文本。</li>
<li>command+Shift+→ 向右单位性地选中文本。</li>
<li>command+Shift+↑ 将光标所在行和上一行代码互换（将光标所在行插入到上一行之前）。</li>
<li>command+Shift+↓ 将光标所在行和下一行代码互换（将光标所在行插入到下一行之后）。</li>
<li>command+Alt+↑ 向上添加多行光标，可同时编辑多行。</li>
<li>command+Alt+↓ 向下添加多行光标，可同时编辑多行。</li>
<li>command+D 选中光标所占的文本，继续操作则会选中下一个相同的文本。</li>
<li>Alt+F3 选中文本按下快捷键，即可一次性选择全部的相同文本进行同时编辑。举个栗子：快速选中并更改所有相同的变量名、函数名等。</li>
<li>command+L 选中整行，继续操作则继续选择下一行，效果和 Shift+↓ 效果一样。</li>
<li>command+Shift+L 先选中多行，再按下快捷键，会在每行行尾插入光标，即可同时编辑这些行。</li>
<li>command+Shift+M 选择括号内的内容（继续选择父括号）。举个栗子：快速选中删除函数中的代码，重写函数体代码或重写括号内里的内容。</li>
<li>command+M 光标移动至括号内结束或开始的位置。</li>
<li>command+Enter 在下一行插入新行。举个栗子：即使光标不在行尾，也能快速向下插入一行。</li>
<li>command+Shift+Enter 在上一行插入新行。举个栗子：即使光标不在行首，也能快速向上插入一行。</li>
<li>command+Shift+[ 选中代码，按下快捷键，折叠代码。</li>
<li>command+Shift+] 选中代码，按下快捷键，展开代码。</li>
<li>command+K+0 展开所有折叠代码。</li>
</ul>
<h3 id="三、编辑类快捷键"><a href="#三、编辑类快捷键" class="headerlink" title="三、编辑类快捷键"></a>三、编辑类快捷键</h3><ul>
<li>command+K+K 从光标处开始删除代码至行尾。</li>
<li>command+Shift+K 删除整行。</li>
<li>command+/ 注释单行。</li>
<li>command+Shift+/ 注释多行。</li>
<li>command+J 合并选中的多行代码为一行。举个栗子：将多行格式的CSS属性合并为一行。</li>
<li>command+Shift+D 复制光标所在整行，插入到下一行。</li>
<li>Tab 向右缩进。</li>
<li>Shift+Tab 向左缩进。</li>
<li>command+K+U 转换大写。</li>
<li>command+K+L 转换小写。</li>
<li>command+Z 撤销。</li>
<li>command+Y 恢复撤销。</li>
<li>command+U 软撤销，感觉和 Gtrl+Z 一样。</li>
<li>command+F2 设置书签</li>
<li>command+T 左右字母互换。</li>
<li>F6 单词检测拼写</li>
</ul>
<h3 id="四、搜索类快捷键"><a href="#四、搜索类快捷键" class="headerlink" title="四、搜索类快捷键"></a>四、搜索类快捷键</h3><ul>
<li>command+F 打开底部搜索框，查找关键字。</li>
<li>command+shift+F 在文件夹内查找，与普通编辑器不同的地方是sublime允许添加多个文件夹进行查找，略高端，未研究。</li>
<li>command+P 打开搜索框。举个栗子：1、输入当前项目中的文件名，快速搜索文件，2、输入@和关键字，查找文件中函数名，3、输入：和数字，跳转到文件中该行代码，4、输入#和关键字，查找变量名。</li>
<li>command+G 打开搜索框，自动带：，输入数字跳转到该行代码。举个栗子：在页面代码比较长的文件中快速定位。</li>
<li>command+R 打开搜索框，自动带@，输入关键字，查找文件中的函数名。举个栗子：在函数较多的页面快速查找某个函数。</li>
<li>command+： 打开搜索框，自动带#，输入关键字，查找文件中的变量名、属性名等。</li>
<li>command+Shift+P 打开命令框。场景栗子：打开命名框，输入关键字，调用sublime text或插件的功能，例如使用package安装插件。</li>
<li>Esc 退出光标多行选择，退出搜索框，命令框等。</li>
</ul>
<h3 id="五、显示类快捷键"><a href="#五、显示类快捷键" class="headerlink" title="五、显示类快捷键"></a>五、显示类快捷键</h3><ul>
<li>Alt+Shift+1 窗口分屏，恢复默认1屏（非小键盘的数字）</li>
<li>Alt+Shift+2 左右分屏-2列</li>
<li>Alt+Shift+3 左右分屏-3列</li>
<li>Alt+Shift+4 左右分屏-4列</li>
<li>Alt+Shift+5 等分4屏</li>
<li>Alt+Shift+8 垂直分屏-2屏</li>
<li>Alt+Shift+9 垂直分屏-3屏</li>
<li>Ctrl+K+B 开启/关闭侧边栏。</li>
<li>F11 全屏模式</li>
<li>Shift+F11 免打扰模式</li>
<li>command+Tab 按文件浏览过的顺序，切换当前窗口的标签页。</li>
<li>command+PageDown 向左切换当前窗口的标签页。</li>
<li>command+PageUp 向右切换当前窗口的标签页。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/Markdown 常用语法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/Markdown 常用语法/" itemprop="url">
                  Markdown 常用语法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>又有朋友入坑程序猿这一神圣而又伟大的职业，问写博客用 <a href="https://zh.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">Markdown</a> 语法怎么样，表示大力赞同 ，一直以来都觉得 Markdown 语法超级简单方便，这两天年后刚上班，闲来无事，于是整理下平常用到的 Markdown 语法，希望能帮到有需要的道友。</p>
</blockquote>
<h3 id="一、标题"><a href="#一、标题" class="headerlink" title="一、标题"></a>一、标题</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题前面加 # 号，一个 # 代表是一级标题</span></span><br><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><h3 id="二、区块引用"><a href="#二、区块引用" class="headerlink" title="二、区块引用"></a>二、区块引用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// `&gt;`后有 1 个空格</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> 引用</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> 一级引用</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &gt; 二级引用</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &gt; &gt; 三级引用</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &gt; &gt; &gt; 四级引用</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &gt; &gt; &gt; &gt; 五级引用</span></span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<blockquote>
<p>引用</p>
</blockquote>
<blockquote>
<p>一级引用</p>
<blockquote>
<p>二级引用</p>
<blockquote>
<p>三级引用</p>
<blockquote>
<p>四级引用</p>
<blockquote>
<p>五级引用</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h3 id="三、强调"><a href="#三、强调" class="headerlink" title="三、强调"></a>三、强调</h3><p>三个 <code>*</code> 或 <code>_</code> 代表斜体加粗，两个 <code>*</code> 或 <code>_</code> 代表加粗，一个 <code>*</code> 或 <code>_</code> 代表斜体，<code>~~</code> 代表删除。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">***斜体加粗文本**</span>* 或者 <span class="strong">___斜体加粗文本__</span>_</span><br><span class="line"></span><br><span class="line"><span class="strong">**加粗文本**</span> 或者 <span class="strong">__加粗文本__</span></span><br><span class="line"></span><br><span class="line"><span class="emphasis">*斜体文本*</span>  或者<span class="emphasis">_斜体文本_</span></span><br><span class="line"></span><br><span class="line">~~删除文本~~</span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<p><strong><em>斜体加粗文本</em></strong> 或者 <strong><em>斜体加粗文本</em></strong></p>
<p><strong>加粗文本</strong> 或者 <strong>加粗文本</strong></p>
<p><em>斜体文本</em>  或者<em>斜体文本</em></p>
<p><del>删除文本</del></p>
<p>当然以上几种还可以交叉使用，比如<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~~*<span class="strong">*删除加粗文本*</span><span class="strong">*~~</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">~~*</span>*<span class="strong">*删除斜体加粗文本*</span>*<span class="strong">*~~</span></span><br></pre></td></tr></table></figure></p>
<p><strong>效果预览</strong>：</p>
<p><del><strong>删除加粗文本</strong></del></p>
<p><del><strong><em>删除斜体加粗文本</em></strong></del></p>
<h3 id="四、列表"><a href="#四、列表" class="headerlink" title="四、列表"></a>四、列表</h3><p>Markdown 支持有序列表和无序列表。<br>无序列表使用 <code>*</code> 、<code>-</code>、和 <code>+</code> 作为列表标记：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>北京</span><br><span class="line"><span class="bullet">* </span>海淀区</span><br><span class="line"><span class="bullet">* </span>五道口</span><br><span class="line"><span class="bullet">* </span>上海</span><br><span class="line"><span class="bullet">* </span>黄浦区</span><br><span class="line"><span class="bullet">* </span>外滩</span><br><span class="line"><span class="bullet">* </span>广州</span><br><span class="line"><span class="bullet">* </span>广州</span><br><span class="line"><span class="bullet">* </span>广州</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>北京</span><br><span class="line"><span class="bullet">- </span>海淀区</span><br><span class="line"><span class="bullet">- </span>五道口</span><br><span class="line"><span class="bullet">- </span>上海</span><br><span class="line"><span class="bullet">- </span>黄浦区</span><br><span class="line"><span class="bullet">- </span>外滩</span><br><span class="line"><span class="bullet">- </span>广州</span><br><span class="line"><span class="bullet">- </span>广州</span><br><span class="line"><span class="bullet">- </span>广州</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">+ </span>北京</span><br><span class="line"><span class="bullet">+ </span>海淀区</span><br><span class="line"><span class="bullet">+ </span>五道口</span><br><span class="line"><span class="bullet">+ </span>上海</span><br><span class="line"><span class="bullet">+ </span>黄浦区</span><br><span class="line"><span class="bullet">+ </span>外滩</span><br><span class="line"><span class="bullet">+ </span>广州</span><br><span class="line"><span class="bullet">+ </span>广州</span><br><span class="line"><span class="bullet">+ </span>广州</span><br></pre></td></tr></table></figure></p>
<p><strong>效果预览</strong>：</p>
<ul>
<li>北京</li>
<li>海淀区</li>
<li>五道口</li>
<li>上海</li>
<li>黄浦区</li>
<li>外滩</li>
<li>广州</li>
<li>广州</li>
<li>广州</li>
</ul>
<p>有序列表则使用数字加英文句点 <code>.</code> 来表示：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>北京</span><br><span class="line"><span class="bullet">2. </span>上海</span><br><span class="line"><span class="bullet">3. </span>广州</span><br></pre></td></tr></table></figure></p>
<p><strong>效果预览</strong>：</p>
<ol>
<li>北京</li>
<li>上海</li>
<li>广州</li>
</ol>
<p>###五、分隔线</p>
<p>可以用三个或三个以上的 <code>*</code> 、<code>-</code>、或 <code>_</code> 来建立分隔线<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">******</span></span><br><span class="line"><span class="string">___</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></p>
<p><strong>效果预览</strong>：</p>
<hr>
<hr>
<hr>
<h3 id="六、链接"><a href="#六、链接" class="headerlink" title="六、链接"></a>六、链接</h3><p>Markdown 支持三种形式的链接语法： 行内式和参考式和自动链接。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">行内式链接：[<span class="string">_以梦为马</span>](<span class="link">http://www.jianshu.com/u/4f54fbd2ea5f</span>)</span><br><span class="line"></span><br><span class="line">参考式链接：[<span class="string">_以梦为马</span>][<span class="symbol">url</span>]</span><br><span class="line"></span><br><span class="line">// url 为链接标记</span><br><span class="line">[<span class="symbol">url</span>]: <span class="link">http://www.jianshu.com/u/4f54fbd2ea5f</span></span><br><span class="line"></span><br><span class="line">自动链接：<span class="xml"><span class="tag">&lt;<span class="name">http:</span>//<span class="attr">www.jianshu.com</span>/<span class="attr">u</span>/<span class="attr">4f54fbd2ea5f</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<p>行内式链接：<a href="http://www.jianshu.com/u/4f54fbd2ea5f" target="_blank" rel="noopener">_以梦为马</a></p>
<p>参考式链接：<a href="http://www.jianshu.com/u/4f54fbd2ea5f" target="_blank" rel="noopener">_以梦为马</a></p>
<p>自动链接：<a href="http://www.jianshu.com/u/4f54fbd2ea5f" target="_blank" rel="noopener">http://www.jianshu.com/u/4f54fbd2ea5f</a></p>
<h3 id="七、图片"><a href="#七、图片" class="headerlink" title="七、图片"></a>七、图片</h3><p>Markdown 插入图片的方式有两种，分为行内式和参考式，但两者都无法调整图片大小，因此建议在插入图片之前先调整好图片的大小</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">行内式插入图片：![<span class="string">图片描述</span>](<span class="link">http://upload.jianshu.io/users/upload_avatars/2665449/2a2822209b0d.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240</span>)</span><br><span class="line">参考式插入图片：![<span class="string">图片描述</span>][<span class="symbol">image</span>]</span><br><span class="line">[<span class="symbol">image</span>]: <span class="link">http://upload.jianshu.io/users/upload_avatars/2665449/2a2822209b0d.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240</span></span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<p>这是行内式插入图片： [图片上传失败…(image-62463-1514895850682)]</p>
<p>这是参考式插入图片：![参考式插入图片][image]<br>[image]: <a href="http://upload.jianshu.io/users/upload_avatars/2665449/2a2822209b0d.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240" target="_blank" rel="noopener">http://upload.jianshu.io/users/upload_avatars/2665449/2a2822209b0d.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240</a></p>
<h3 id="八、代码"><a href="#八、代码" class="headerlink" title="八、代码"></a>八、代码</h3><h5 id="代码分为行内代码和代码框"><a href="#代码分为行内代码和代码框" class="headerlink" title="代码分为行内代码和代码框"></a>代码分为行内代码和代码框</h5><ul>
<li>行内代码就是用两个`把需要添加行内代码的区域包起来。</li>
</ul>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是行内代码：`<span class="literal">self</span>.<span class="built_in">table</span>View.delegate = <span class="literal">self</span>`</span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<p>这是行内代码：<code>self.tableView.delegate = self</code></p>
<ul>
<li>代码框就是用两个 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>这是代码框：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">self.tableView.delegate = self;</span><br><span class="line">self.tableView.dataSource = self;</span><br><span class="line">self.tableView.showsVerticalScrollIndicator = NO;</span><br><span class="line">self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;</span><br><span class="line">```</span><br></pre></td></tr></table></figure></p>
<p><strong>效果预览</strong>：</p>
<p>这是代码框：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">self.tableView.delegate = self;</span><br><span class="line">self.tableView.dataSource = self;</span><br><span class="line">self.tableView.showsVerticalScrollIndicator = NO;</span><br><span class="line">self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;</span><br></pre></td></tr></table></figure></p>
<h3 id="九、表格"><a href="#九、表格" class="headerlink" title="九、表格"></a>九、表格</h3><ul>
<li>表格对齐方式有三种：</li>
<li>居左：<code>:----</code></li>
<li>居中：<code>:----:</code>或<code>-----</code></li>
<li>居右：<code>----:</code></li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">标题</span>|<span class="string">标题</span>|<span class="string">标题</span>|</span><br><span class="line">|<span class="string">:---</span>|<span class="string">:---:</span>|<span class="string">---:</span>|</span><br><span class="line">|<span class="string">居左居左居左居左</span>|<span class="string">居中</span>|<span class="string">居右</span>|</span><br><span class="line">|<span class="string">居左</span>|<span class="string">居中居中居中居中</span>|<span class="string">居右</span>|</span><br><span class="line">|<span class="string">居左</span>|<span class="string">居中</span>|<span class="string">居右居右居右居右</span>|</span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<table>
<thead>
<tr>
<th style="text-align:left">标题</th>
<th style="text-align:center">标题</th>
<th style="text-align:right">标题</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">居左居左居左居左</td>
<td style="text-align:center">居中</td>
<td style="text-align:right">居右</td>
</tr>
<tr>
<td style="text-align:left">居左</td>
<td style="text-align:center">居中居中居中居中</td>
<td style="text-align:right">居右</td>
</tr>
<tr>
<td style="text-align:left">居左</td>
<td style="text-align:center">居中</td>
<td style="text-align:right">居右居右居右居右</td>
</tr>
</tbody>
</table>
<h3 id="十、脚注"><a href="#十、脚注" class="headerlink" title="十、脚注"></a>十、脚注</h3><p>使用[^]来定义脚注：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是一个脚注 [^1]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">这是一个脚注</span></span><br></pre></td></tr></table></figure>
<p><strong>效果预览</strong>：</p>
<p>这是一个脚注 <a href="这是一个脚注">^1</a></p>
<p>###十一、高级技巧</p>
<ul>
<li>HTML 标签</li>
<li>代码块   <code>&lt;pre&gt;代码块&lt;/pre&gt;</code><br><strong>效果预览</strong>：<pre>代码块</pre></li>
<li>粗斜体 <code>&lt;b&gt; Markdown 加粗 *斜体* &lt;/b&gt;</code><br><strong>效果预览</strong>：<br><b> Markdown 加粗 <em>斜体</em> </b></li>
<li>下划线   <code>&lt;u&gt;下划线&lt;/u&gt;</code><br><strong>效果预览</strong>：<br><u>下划线</u></li>
</ul>
<p>Markdown 中 HTML 标签还有很多，比如<code>&lt;kdb&gt;</code> <code>&lt;i&gt;</code> <code>&lt;em&gt;</code> <code>&lt;sup&gt;</code> <code>&lt;sub&gt;</code> <code>&lt;br&gt;</code> <code>&lt;p&gt;</code>等等，有兴趣的童鞋可以试试。</p>
<ul>
<li>符号转义<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">\_</span>不想这里的文本变斜体<span class="symbol">\_</span></span><br><span class="line"><span class="symbol">\*</span><span class="symbol">\*</span>不想这里的文本加粗<span class="symbol">\*</span><span class="symbol">\*</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>效果预览</strong>：<br>_不想这里的文本变斜体_<br>**不想这里的文本加粗**</p>
<h3 id="结束语："><a href="#结束语：" class="headerlink" title="结束语："></a>结束语：</h3><p>Markdown 的常用语法基本上都在这里了，另外再推荐一款免费且十分好用的 Markdown 编辑器 <a href="http://25.io/mou/" target="_blank" rel="noopener">Mou</a>（Mac OS X 上）。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS 开发中导航栏渐变的两种方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS 开发中导航栏渐变的两种方法/" itemprop="url">
                  iOS 开发中导航栏渐变的两种方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>很多 APP 都有导航栏颜色渐变的效果，各位开发者也都八仙过海各显神通，各有各的方法，我这里提供两种思路：<strong>第一种是通过设置 navigationBar 的 alpha；第二种是在 navigationBar 上加入一个 view，再设置 view 的 alpha。</strong></p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-d8f9e18b30189a3b.gif?imageMogr2/auto-orient/strip" alt="导航栏渐变"><br>两种方法的核心代码：</p>
<h4 id="一、设置-navigationBar-的-alpha"><a href="#一、设置-navigationBar-的-alpha" class="headerlink" title="一、设置 navigationBar 的 alpha"></a>一、设置 navigationBar 的 alpha</h4><p>向上滑和向下滑时分别对 navigationBar 的透明度进行设置。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UIScrollViewDelegate</span></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.currentPostion = scrollView.contentOffset.y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.currentPostion &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.currentPostion - <span class="keyword">self</span>.lastPosition &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.topBool) &#123;</span><br><span class="line"><span class="keyword">self</span>.topBool = <span class="literal">NO</span>;</span><br><span class="line"><span class="keyword">self</span>.bottomBool = <span class="literal">YES</span>;</span><br><span class="line"><span class="keyword">self</span>.stopPosition = <span class="keyword">self</span>.currentPostion + <span class="number">64</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.lastPosition = <span class="keyword">self</span>.currentPostion;</span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.alpha = <span class="number">1</span> - <span class="keyword">self</span>.currentPostion / <span class="number">500</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.bottomBool) &#123;</span><br><span class="line"><span class="keyword">self</span>.bottomBool = <span class="literal">NO</span>;</span><br><span class="line"><span class="keyword">self</span>.topBool = <span class="literal">YES</span>;</span><br><span class="line"><span class="keyword">self</span>.stopPosition = <span class="keyword">self</span>.currentPostion + <span class="number">64</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.lastPosition = <span class="keyword">self</span>.currentPostion;</span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.alpha = (<span class="keyword">self</span>.stopPosition - <span class="keyword">self</span>.currentPostion) / <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里要说明一点，<strong>如果你不希望自己 navigationBar 上的按钮也被改变透明度，可以通过自定义 UINavigationController 实现。用系统的 navigationBar 时，navigationBar上的按钮的透明度也会被更改。</strong></p>
<hr>
<h4 id="二、在-navigationBar-上加入一个-view"><a href="#二、在-navigationBar-上加入一个-view" class="headerlink" title="二、在 navigationBar 上加入一个 view"></a>二、在 navigationBar 上加入一个 view</h4><p>在 navigationBar 上加一个 view，然后设置 view 的 alpha。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CGSize</span> customSize = <span class="keyword">self</span>.navigationController.navigationBar.frame.size;</span><br><span class="line"><span class="keyword">self</span>.customView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">-20</span>, customSize.width, customSize.height + <span class="number">20</span>)];</span><br><span class="line"><span class="keyword">self</span>.customView.backgroundColor = [<span class="built_in">UIColor</span> orangeColor];</span><br><span class="line"><span class="keyword">self</span>.customView.userInteractionEnabled = <span class="literal">NO</span>;</span><br><span class="line">[<span class="keyword">self</span>.navigationController.navigationBar insertSubview: <span class="keyword">self</span>.customView atIndex:<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<p>这里也要说明一点，<strong>View 的 userInteractionEnabled 属性要设置为 NO，不然会出现问题。</strong></p>
<p>UIScrollViewDelegate 的这个代理方法与上面的一样。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UIScrollViewDelegate</span></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.currentPostion = scrollView.contentOffset.y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.currentPostion &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.currentPostion - <span class="keyword">self</span>.lastPosition &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.topBool) &#123;</span><br><span class="line"><span class="keyword">self</span>.topBool = <span class="literal">NO</span>;</span><br><span class="line"><span class="keyword">self</span>.bottomBool = <span class="literal">YES</span>;</span><br><span class="line"><span class="keyword">self</span>.stopPosition = <span class="keyword">self</span>.currentPostion + <span class="number">64</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.lastPosition = <span class="keyword">self</span>.currentPostion;</span><br><span class="line"><span class="keyword">self</span>.customView.alpha = <span class="number">1</span> - <span class="keyword">self</span>.currentPostion / <span class="number">500</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.bottomBool) &#123;</span><br><span class="line"><span class="keyword">self</span>.bottomBool = <span class="literal">NO</span>;</span><br><span class="line"><span class="keyword">self</span>.topBool = <span class="literal">YES</span>;</span><br><span class="line"><span class="keyword">self</span>.stopPosition = <span class="keyword">self</span>.currentPostion + <span class="number">64</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.lastPosition = <span class="keyword">self</span>.currentPostion;</span><br><span class="line"><span class="keyword">self</span>.customView.alpha = (<span class="keyword">self</span>.stopPosition - <span class="keyword">self</span>.currentPostion) / <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的两种方法都可以实现导航栏渐变，只是思路不同，一个是改变系统的导航栏，一个是在导航栏上插入 View，另外还可以自定义导航控制器这个类来实现，各位道友可以试试哦！</p>
<h4 id="代码传送门-欢迎各位道友交流或指出错误！"><a href="#代码传送门-欢迎各位道友交流或指出错误！" class="headerlink" title="代码传送门 欢迎各位道友交流或指出错误！"></a><a href="https://github.com/liuzhongning/NNJaneBook" target="_blank" rel="noopener">代码传送门</a> 欢迎各位道友交流或指出错误！</h4>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS 开发 - Swift 全面系统的学习（持续更新...）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS 开发 - Swift 全面系统的学习（持续更新...）/" itemprop="url">
                  iOS 开发 - Swift 全面系统的学习（持续更新...）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近项目不算紧，于是就学了学 Swift ，看了一大神写的项目<a href="https://github.com/hrscy/DanTang，很受益，感谢开源！另外自己也写了一些基础代码，分享出来，第一是希望得到同行前辈的指导，第二是希望对需要的朋友有所帮助。" target="_blank" rel="noopener">https://github.com/hrscy/DanTang，很受益，感谢开源！另外自己也写了一些基础代码，分享出来，第一是希望得到同行前辈的指导，第二是希望对需要的朋友有所帮助。</a></p>
</blockquote>
<h5 id="先分享一些学习资料："><a href="#先分享一些学习资料：" class="headerlink" title="先分享一些学习资料："></a>先分享一些学习资料：</h5><ul>
<li>学习网站：</li>
<li><p>苹果官方为开发者提供的 Swift 学习资源: <a href="https://developer.apple.com/swift/resources/" target="_blank" rel="noopener">https://developer.apple.com/swift/resources/</a></p>
</li>
<li><p>官方的 API Design: <a href="https://swift.org/documentation/api-design-guidelines/" target="_blank" rel="noopener">https://swift.org/documentation/api-design-guidelines/</a></p>
</li>
<li><p>学习书籍：</p>
</li>
<li><p>TheSwiftProgrammingLanguage(Swift3): 链接:<a href="http://pan.baidu.com/s/1jIopBwi" target="_blank" rel="noopener">http://pan.baidu.com/s/1jIopBwi</a>  密码:dqho</p>
</li>
<li><p>The Swift Programming Language 中文版: 链接:<a href="http://pan.baidu.com/s/1slpxtTj" target="_blank" rel="noopener">http://pan.baidu.com/s/1slpxtTj</a>  密码:xay1</p>
</li>
<li><p>其它学习资料</p>
</li>
<li><a href="https://github.com/Tim9Liu9/TimLiu-iOS/blob/master/Swift.md#swift" target="_blank" rel="noopener">https://github.com/Tim9Liu9/TimLiu-iOS/blob/master/Swift.md#swift</a></li>
<li><a href="https://github.com/ipader/SwiftGuide" target="_blank" rel="noopener">https://github.com/ipader/SwiftGuide</a></li>
</ul>
<hr>
<p><strong>练习的 demo 地址：</strong> <a href="https://github.com/liuzhongning/NNMintFurniture" target="_blank" rel="noopener">https://github.com/liuzhongning/NNMintFurniture</a></p>
<ul>
<li>主要包括以下功能：</li>
<li>多页面滑动视图（分页控制器）</li>
<li>图片轮播</li>
<li>导航栏渐变</li>
<li>瀑布流练习</li>
<li>UIScrollView 练习</li>
<li>照相功能，更换头像</li>
<li>二维码扫描及识别</li>
<li>随机图片验证码封装</li>
<li>圆形输入框封装</li>
<li>第三方库 SnapKit 用法</li>
<li>…………</li>
</ul>
<hr>
<blockquote>
<p>练习 demo 的简单介绍，前方高能预警，大量图片请注意手机流量！</p>
</blockquote>
<h4 id="一、多页面滑动视图（分页控制器）"><a href="#一、多页面滑动视图（分页控制器）" class="headerlink" title="一、多页面滑动视图（分页控制器）"></a>一、多页面滑动视图（分页控制器）</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-32882dd38dd1bc87.gif?imageMogr2/auto-orient/strip" alt="多页面滑动视图"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight roboconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// MARK: 点击了标签栏</span><br><span class="line">func titlesClick(button: UIButton) &#123;</span><br><span class="line"><span class="attribute">selectedButton!.isEnabled = true</span></span><br><span class="line"><span class="attribute">selectedButton!.setTitleColor(UIColor.gray, for</span>: <span class="variable">.normal</span>)</span><br><span class="line">button<span class="variable">.isEnabled</span> = false</span><br><span class="line">selectedButton = button</span><br><span class="line">selectedButton?<span class="variable">.setTitleColor</span>(UIColor<span class="variable">.red</span>, for: <span class="variable">.normal</span>)</span><br><span class="line"></span><br><span class="line">var offset = contentView!<span class="variable">.contentOffset</span></span><br><span class="line">offset<span class="variable">.x</span> = CGFloat(button<span class="variable">.tag</span>) * (contentView?<span class="variable">.frame</span><span class="variable">.size</span><span class="variable">.width</span>)!</span><br><span class="line">contentView!<span class="variable">.setContentOffset</span>(offset, animated: true)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: 点击了右边搜索框</span><br><span class="line">func rightBarButtonClick() &#123;</span><br><span class="line">navigationController?<span class="variable">.pushViewController</span>(NNSearchController(), animated: true)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: 点击了箭头</span><br><span class="line">func arrowButtonClick(button: UIButton) &#123;</span><br><span class="line">UIView<span class="variable">.animate</span>(withDuration: 0.25) &#123;</span><br><span class="line">button<span class="variable">.imageView</span>?<span class="variable">.transform</span> = button<span class="variable">.imageView</span>!<span class="variable">.transform</span><span class="variable">.rotated</span>(by: CGFloat(Double<span class="variable">.pi</span>))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: - UIScrollViewDelegate 代理</span><br><span class="line">// MARK: scrollViewDidEndScrollingAnimation</span><br><span class="line">func scrollViewDidEndScrollingAnimation(_ scrollView: UIScrollView) &#123;</span><br><span class="line">let index = Int(scrollView<span class="variable">.contentOffset</span><span class="variable">.x</span> / scrollView<span class="variable">.frame</span><span class="variable">.size</span><span class="variable">.width</span>)</span><br><span class="line">// 取出子控制器</span><br><span class="line">let vc = childViewControllers[index]</span><br><span class="line">vc<span class="variable">.view</span><span class="variable">.frame</span><span class="variable">.origin</span><span class="variable">.x</span> = scrollView<span class="variable">.contentOffset</span><span class="variable">.x</span></span><br><span class="line">vc<span class="variable">.view</span><span class="variable">.frame</span><span class="variable">.origin</span><span class="variable">.y</span> = 0</span><br><span class="line">// 设置控制器的 view 的 height 值为整个屏幕的高度</span><br><span class="line">vc<span class="variable">.view</span><span class="variable">.frame</span><span class="variable">.size</span><span class="variable">.height</span> = scrollView<span class="variable">.frame</span><span class="variable">.size</span><span class="variable">.height</span></span><br><span class="line">scrollView<span class="variable">.addSubview</span>(vc<span class="variable">.view</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: scrollViewDidEndDecelerating</span><br><span class="line">func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) &#123;</span><br><span class="line">scrollViewDidEndScrollingAnimation(scrollView)</span><br><span class="line">// 当前索引</span><br><span class="line">let index = Int(scrollView<span class="variable">.contentOffset</span><span class="variable">.x</span> / scrollView<span class="variable">.frame</span><span class="variable">.size</span><span class="variable">.width</span>)</span><br><span class="line">// 点击 Button</span><br><span class="line">let button = titlesView<span class="variable">.subviews</span>[index] as! UIButton</span><br><span class="line">titlesClick(button: button)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="二、图片轮播"><a href="#二、图片轮播" class="headerlink" title="二、图片轮播"></a>二、图片轮播</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-0e923b9e52af87c1.gif?imageMogr2/auto-orient/strip" alt="图片轮播"></p>
<ul>
<li>核心代码：</li>
</ul>
<p><strong>轮播图的封装</strong><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 懒加载轮播视图</span></span><br><span class="line"><span class="keyword">private</span> lazy var <span class="string">shufflingFigureView :</span> NNShufflingFigureView = &#123;</span><br><span class="line">let frame = CGRect(<span class="string">x:</span> <span class="number">0</span>, <span class="string">y:</span> <span class="number">0</span>, <span class="string">width:</span> NNScreenWidth, <span class="string">height:</span> <span class="number">180</span>)</span><br><span class="line">let imageView = [<span class="string">"shuffling1"</span>, <span class="string">"shuffling2"</span>, <span class="string">"shuffling3"</span>, <span class="string">"shuffling4"</span>]</span><br><span class="line">let shufflingFigureView = NNShufflingFigureView(<span class="string">frame:</span> frame, <span class="string">images:</span> imageView <span class="keyword">as</span> NSArray, <span class="string">autoPlay:</span> <span class="literal">true</span>, <span class="string">delay:</span> <span class="number">3</span>, <span class="string">isFromNet:</span> <span class="literal">false</span>)</span><br><span class="line">shufflingFigureView.delegate = self</span><br><span class="line"><span class="keyword">return</span> shufflingFigureView</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure></p>
<p><strong>通过代理处理图片的点击事件</strong><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 轮播代理方法，处理轮播图的点击事件</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NNItemTableViewController</span>: <span class="title">NNShufflingFigureViewDelegate</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addShufflingFigureView</span><span class="params">(addShufflingFigureView: NNShufflingFigureView, iconClick index: NSInteger)</span></span> &#123;</span><br><span class="line"><span class="built_in">print</span>(index)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="三、导航栏渐变"><a href="#三、导航栏渐变" class="headerlink" title="三、导航栏渐变"></a>三、导航栏渐变</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-b6506cb5fab324c0.gif?imageMogr2/auto-orient/strip" alt="导航栏渐变"></p>
<ul>
<li>核心代码</li>
</ul>
<p><strong>页面滚动时调用</strong><br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// MARK: - UIScrollViewDelegate 滚动页面时调用</span><br><span class="line">extension NNItemTableViewController &#123;</span><br><span class="line">override func scrollViewDidScroll(_ scrollView: UIScrollView) &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="attr">type</span> == tableViewType.haveHeader &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">currentPostion</span> = scrollView.contentOffset.y</span><br><span class="line"><span class="keyword">if</span> currentPostion &gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> currentPostion - lastPosition &gt;= <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> topBool &#123;</span><br><span class="line"><span class="attr">topBool</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">bottomBool</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">stopPosition</span> = currentPostion + <span class="number">64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">lastPosition</span> = currentPostion</span><br><span class="line">navigationController?.navigationBar.<span class="attr">alpha</span> = <span class="number">1</span> - currentPostion / <span class="number">500</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> bottomBool &#123;</span><br><span class="line"><span class="attr">bottomBool</span> = <span class="literal">false</span></span><br><span class="line"><span class="attr">topBool</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">stopPosition</span> = currentPostion + <span class="number">64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">lastPosition</span> = currentPostion</span><br><span class="line">navigationController?.navigationBar.<span class="attr">alpha</span> = (stopPosition - currentPostion) / <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="四、瀑布流练习"><a href="#四、瀑布流练习" class="headerlink" title="四、瀑布流练习"></a>四、瀑布流练习</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-c47f2e1053e05065.gif?imageMogr2/auto-orient/strip" alt="瀑布流练习"></p>
<ul>
<li>核心代码</li>
</ul>
<p><strong>基础设置</strong><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 布局</span></span><br><span class="line">let layout = NNItemCollectionViewFlowLayout()</span><br><span class="line"><span class="comment">// 创建collectionView</span></span><br><span class="line">let collectionView = UICollectionView.init(frame: view<span class="selector-class">.bounds</span>, collectionViewLayout: layout)</span><br><span class="line">view.addSubview(collectionView)</span><br><span class="line">collectionView<span class="selector-class">.dataSource</span> = self</span><br><span class="line">collectionView<span class="selector-class">.delegate</span> = self</span><br><span class="line">collectionView<span class="selector-class">.backgroundColor</span> = UIColor.white</span><br><span class="line">collectionView.register(UICollectionViewCell<span class="selector-class">.self</span>, forCellWithReuseIdentifier: NNItemCollectionViewControllerID)</span><br></pre></td></tr></table></figure></p>
<p><strong>自定义 UICollectionViewFlowLayout</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 更新布局</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepare</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">super</span>.prepare()</span><br><span class="line"><span class="comment">// 清除所有的布局属性</span></span><br><span class="line">attrsArray.removeAll()</span><br><span class="line">columnHeightsAry.removeAll()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span> ..&lt; columnCountDefault &#123;</span><br><span class="line">columnHeightsAry.append(edgeInsetsDefault.top)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sections : <span class="type">Int</span> = (collectionView?.numberOfSections)!</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> <span class="number">0</span> ..&lt; sections &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">count</span> : <span class="type">Int</span> = (collectionView?.numberOfItems(inSection: num))!</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> ..&lt; <span class="built_in">count</span> &#123;</span><br><span class="line"><span class="keyword">let</span> indexpath : <span class="type">NSIndexPath</span> = <span class="type">NSIndexPath</span>.<span class="keyword">init</span>(item: i, section: num)</span><br><span class="line"><span class="keyword">let</span> attrs = layoutAttributesForItem(at: indexpath <span class="keyword">as</span> <span class="type">IndexPath</span>)!</span><br><span class="line">attrsArray.append(attrs)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - cell 对应的布局属性</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForItem</span><span class="params">(at indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes</span>? &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> attrs = <span class="type">UICollectionViewLayoutAttributes</span>.<span class="keyword">init</span>(forCellWith: indexPath)</span><br><span class="line"><span class="keyword">let</span> collectionWidth = collectionView?.frame.size.width</span><br><span class="line"><span class="comment">// 获得所有 item 的宽度</span></span><br><span class="line"><span class="keyword">let</span> itemW = (collectionWidth! - edgeInsetsDefault.<span class="keyword">left</span> - edgeInsetsDefault.<span class="keyword">right</span> - <span class="type">CGFloat</span>(columnCountDefault-<span class="number">1</span>) * columnMargin) / <span class="type">CGFloat</span>(columnCountDefault)</span><br><span class="line"><span class="keyword">let</span> itemH = <span class="number">50</span> + arc4random_uniform(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 找出高度最短那一列</span></span><br><span class="line"><span class="keyword">var</span> dextColum : <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> minH = columnHeightsAry[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> ..&lt; columnCountDefault&#123;</span><br><span class="line"><span class="comment">// 取出第 i 列的高度</span></span><br><span class="line"><span class="keyword">let</span> columnH = columnHeightsAry[i]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> minH &gt; columnH &#123;</span><br><span class="line">minH = columnH</span><br><span class="line">dextColum = i</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = edgeInsetsDefault.<span class="keyword">left</span> + <span class="type">CGFloat</span>(dextColum) * (itemW + columnMargin)</span><br><span class="line"><span class="keyword">var</span> y = minH</span><br><span class="line"><span class="keyword">if</span> y != edgeInsetsDefault.top&#123;</span><br><span class="line">y = y + itemMargin</span><br><span class="line">&#125;</span><br><span class="line">attrs.frame = <span class="type">CGRect</span>(x: x, y: y, width: itemW, height: <span class="type">CGFloat</span>(itemH))</span><br><span class="line"><span class="comment">// 更新最短那列高度</span></span><br><span class="line">columnHeightsAry[dextColum] = attrs.frame.maxY</span><br><span class="line"><span class="keyword">return</span> attrs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="五、UIScrollView-练习"><a href="#五、UIScrollView-练习" class="headerlink" title="五、UIScrollView 练习"></a>五、UIScrollView 练习</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-f96ca085518cc164.gif?imageMogr2/auto-orient/strip" alt="UIScrollView 练习"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 放大缩小</span></span><br><span class="line"><span class="comment">// MARK: 放大</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">amplificationBtnClick</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> zoomScale = scrollView.zoomScale <span class="comment">// 当前缩放</span></span><br><span class="line">zoomScale += <span class="number">0.1</span></span><br><span class="line"><span class="keyword">if</span> zoomScale &gt;= scrollView.maximumZoomScale &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.scrollView.setZoomScale(zoomScale, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: 缩小</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">narrowDownBtnClick</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> zoomScale = scrollView.zoomScale <span class="comment">// 当前缩放</span></span><br><span class="line">zoomScale -= <span class="number">0.1</span></span><br><span class="line"><span class="keyword">if</span> zoomScale &lt;= scrollView.minimumZoomScale &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.scrollView.setZoomScale(zoomScale, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - NNItemBtnViewDelegate 上下左右点击代理</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NNItemScrollView</span> </span>&#123;</span><br><span class="line"><span class="comment">// MARK: 向左</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">leftBtnClickDelegate</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">self</span>.scrollView.contentOffset</span><br><span class="line">point.x += <span class="number">100</span></span><br><span class="line">point.x = point.x &gt;= <span class="keyword">self</span>.scrollView.contentSize.width ? <span class="number">0</span> : point.x</span><br><span class="line">scrollView.setContentOffset(point, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: 向右</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rightBtnClickDelegate</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">self</span>.scrollView.contentOffset</span><br><span class="line">point.x -= <span class="number">100</span></span><br><span class="line">point.x = point.x &lt;= -<span class="type">NNScreenWidth</span> ? <span class="number">0</span> : point.x</span><br><span class="line">scrollView.setContentOffset(point, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: 向上</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">topBtnClickDelegate</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">self</span>.scrollView.contentOffset</span><br><span class="line">point.y += <span class="number">50</span></span><br><span class="line">point.y = point.y &gt;= <span class="keyword">self</span>.scrollView.contentSize.height ? <span class="number">0</span> : point.y</span><br><span class="line">scrollView.setContentOffset(point, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: 向下</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bottomBtnClickDelegate</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">self</span>.scrollView.contentOffset</span><br><span class="line">point.y -= <span class="number">50</span></span><br><span class="line">point.y = point.y &lt;= -<span class="type">NNScreenHeight</span> ? <span class="number">0</span> : point.y</span><br><span class="line">scrollView.setContentOffset(point, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="六、照相功能，更换头像（建议用真机）"><a href="#六、照相功能，更换头像（建议用真机）" class="headerlink" title="六、照相功能，更换头像（建议用真机）"></a>六、照相功能，更换头像（建议用真机）</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-eedef65d59cce265.gif?imageMogr2/auto-orient/strip" alt="照相功能，更换头像"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 点击头像按钮，更换头像</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changePicture</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">let</span> alertcontroller = <span class="type">UIAlertController</span>(title: <span class="string">"请选择相片"</span>, message: <span class="literal">nil</span>, preferredStyle: .actionSheet)</span><br><span class="line"><span class="keyword">let</span> alertaction = <span class="type">UIAlertAction</span>(title: <span class="string">"从相册选取"</span>, style: .destructive) &#123; (action) <span class="keyword">in</span></span><br><span class="line"><span class="keyword">let</span> imagePicker = <span class="type">UIImagePickerController</span>()</span><br><span class="line">imagePicker.delegate = <span class="keyword">self</span></span><br><span class="line">imagePicker.sourceType = .photoLibrary</span><br><span class="line">imagePicker.allowsEditing = <span class="literal">true</span></span><br><span class="line"><span class="keyword">self</span>.present(imagePicker, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> alertaction2 = <span class="type">UIAlertAction</span>(title: <span class="string">"拍照"</span>, style: .destructive) &#123; (action) <span class="keyword">in</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="type">UIImagePickerController</span>.isSourceTypeAvailable(.camera)) &#123;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"设备不支持相机"</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> imagePicker = <span class="type">UIImagePickerController</span>()</span><br><span class="line">imagePicker.delegate = <span class="keyword">self</span></span><br><span class="line">imagePicker.sourceType = .camera</span><br><span class="line">imagePicker.allowsEditing = <span class="literal">true</span></span><br><span class="line"><span class="keyword">self</span>.present(imagePicker, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> alertAction3 = <span class="type">UIAlertAction</span>(title: <span class="string">"取消"</span>, style: .cancel) &#123; (action) <span class="keyword">in</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"取消"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alertcontroller.addAction(alertaction)</span><br><span class="line">alertcontroller.addAction(alertaction2)</span><br><span class="line">alertcontroller.addAction(alertAction3)</span><br><span class="line">present(alertcontroller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - UIImagePickerControllerDelegate</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any])</span></span> &#123;</span><br><span class="line"><span class="keyword">let</span> image = info[<span class="type">UIImagePickerControllerOriginalImage</span>] <span class="keyword">as</span>! <span class="type">UIImage</span></span><br><span class="line">imageView.image = image</span><br><span class="line"><span class="keyword">self</span>.dismiss(animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="七、二维码扫描及识别（建议用真机）"><a href="#七、二维码扫描及识别（建议用真机）" class="headerlink" title="七、二维码扫描及识别（建议用真机）"></a>七、二维码扫描及识别（建议用真机）</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-2bdb11d7ef7db000.gif?imageMogr2/auto-orient/strip" alt="二维码扫描及识别"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 扫描设备设置</span></span><br><span class="line">func setupScanSession() &#123;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="comment">// 设置捕捉设备</span></span><br><span class="line">let device = <span class="built_in">AVCaptureDevice</span>.defaultDevice(withMediaType: <span class="built_in">AVMediaTypeVideo</span>)</span><br><span class="line"><span class="comment">// 设置设备输入输出</span></span><br><span class="line">let input = try <span class="built_in">AVCaptureDeviceInput</span>(device: device)</span><br><span class="line">let output = <span class="built_in">AVCaptureMetadataOutput</span>()</span><br><span class="line">output.setMetadataObjectsDelegate(<span class="keyword">self</span>, queue: DispatchQueue.main)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置会话</span></span><br><span class="line">let  scanSession = <span class="built_in">AVCaptureSession</span>()</span><br><span class="line">scanSession.canSetSessionPreset(<span class="built_in">AVCaptureSessionPresetHigh</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> scanSession.canAddInput(input) &#123;</span><br><span class="line">scanSession.addInput(input)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> scanSession.canAddOutput(output) &#123;</span><br><span class="line">scanSession.addOutput(output)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置扫描类型(二维码和条形码)</span></span><br><span class="line">output.metadataObjectTypes = [</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeQRCode</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeCode39Code</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeCode128Code</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeCode39Mod43Code</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeEAN13Code</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeEAN8Code</span>,</span><br><span class="line"><span class="built_in">AVMetadataObjectTypeCode93Code</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预览图层</span></span><br><span class="line">let scanPreviewLayer = <span class="built_in">AVCaptureVideoPreviewLayer</span>(session:scanSession)</span><br><span class="line">scanPreviewLayer!.videoGravity = <span class="built_in">AVLayerVideoGravityResizeAspectFill</span></span><br><span class="line">scanPreviewLayer!.frame = view.layer.bounds</span><br><span class="line"></span><br><span class="line">view.layer.insertSublayer(scanPreviewLayer!, at: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置扫描区域</span></span><br><span class="line">NotificationCenter.default.addObserver(forName: <span class="built_in">NSNotification</span>.Name.AVCaptureInputPortFormatDescriptionDidChange, object: <span class="literal">nil</span>, queue: <span class="literal">nil</span>, using: &#123; (noti) <span class="keyword">in</span></span><br><span class="line">output.rectOfInterest = (scanPreviewLayer?.metadataOutputRectOfInterest(<span class="keyword">for</span>:<span class="keyword">self</span>.scanImageView.frame))!</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 保存会话</span></span><br><span class="line"><span class="keyword">self</span>.scanSession = scanSession</span><br><span class="line"></span><br><span class="line">&#125; catch &#123;</span><br><span class="line"><span class="comment">// 摄像头不可用</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>扫描完成后调用</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - AVCaptureMetadataOutputObjectsDelegate 扫描捕捉完成</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NNScanCodeController</span> : <span class="title">AVCaptureMetadataOutputObjectsDelegate</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">captureOutput</span><span class="params">(<span class="number">_</span> captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!)</span></span> &#123;</span><br><span class="line"><span class="comment">// 停止扫描</span></span><br><span class="line">scanLine.layer.removeAllAnimations()</span><br><span class="line">scanSession!.stopRunning()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 扫完完成</span></span><br><span class="line"><span class="keyword">if</span> metadataObjects.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> resultObj = metadataObjects.first <span class="keyword">as</span>? <span class="type">AVMetadataMachineReadableCodeObject</span> &#123;</span><br><span class="line"><span class="built_in">print</span>(resultObj.stringValue)</span><br><span class="line">scanResult.text = <span class="string">"扫描结果:"</span> + resultObj.stringValue</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>识别验证码，从相册中选择</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - UIImagePickerControllerDelegate, UINavigationControllerDelegate</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NNScanCodeController</span> : <span class="title">UIImagePickerControllerDelegate</span> , <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any])</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否能取到图片</span></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> image = info[<span class="type">UIImagePickerControllerOriginalImage</span>] <span class="keyword">as</span>? <span class="type">UIImage</span> <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 转成ciimage</span></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> ciimage = <span class="type">CIImage</span>(image: image) <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 从选中的图片中读取二维码</span></span><br><span class="line"><span class="comment">// 创建探测器</span></span><br><span class="line"><span class="keyword">let</span> detector = <span class="type">CIDetector</span>(ofType: <span class="type">CIDetectorTypeQRCode</span>, context: <span class="literal">nil</span>, options: [<span class="type">CIDetectorAccuracy</span> : <span class="type">CIDetectorAccuracyLow</span>])</span><br><span class="line"><span class="keyword">let</span> resoult = (detector?.features(<span class="keyword">in</span>: ciimage))!</span><br><span class="line">scanResult.text = <span class="string">"无法识别"</span></span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> resoult &#123;</span><br><span class="line"><span class="keyword">guard</span> (result <span class="keyword">as</span>! <span class="type">CIQRCodeFeature</span>).messageString != <span class="literal">nil</span> <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scanResult.text = <span class="string">"扫描结果:"</span> + (result <span class="keyword">as</span>! <span class="type">CIQRCodeFeature</span>).messageString!</span><br><span class="line">&#125;</span><br><span class="line">picker.dismiss(animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="八、随机图片验证码封装"><a href="#八、随机图片验证码封装" class="headerlink" title="八、随机图片验证码封装"></a>八、随机图片验证码封装</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-7660d135f12c9d38.gif?imageMogr2/auto-orient/strip" alt="随机图片验证码封装"></p>
<ul>
<li>核心代码<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 绘制图形验证码</span></span><br><span class="line">override func draw(_ <span class="built_in">rect</span>: CGRect) &#123;</span><br><span class="line"><span class="built_in">if</span> charString.isEmpty &#123;</span><br><span class="line"><span class="built_in">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let textString:<span class="keyword">String</span> = charString</span><br><span class="line">let charSize = textString.substring(to: textString.startIndex).<span class="built_in">size</span>(attributes: [NSFontAttributeName : UIFont.systemFont(ofSize: <span class="number">14</span>)])</span><br><span class="line">let <span class="built_in">width</span> = <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span> / CGFloat(charCount) - charSize.<span class="built_in">width</span> - <span class="number">15</span>;</span><br><span class="line">let hight = <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span> - charSize.<span class="built_in">height</span>;</span><br><span class="line">var <span class="built_in">point</span>: CGPoint</span><br><span class="line"></span><br><span class="line">var pointX: CGFloat</span><br><span class="line">var pointY: CGFloat</span><br><span class="line"><span class="built_in">for</span> i in <span class="number">0.</span>.&lt;textString.characters.count &#123;</span><br><span class="line">let <span class="keyword">char</span> = CGFloat(i)</span><br><span class="line">pointX = (CGFloat)(arc4random() % UInt32(Float(<span class="built_in">width</span>))) + <span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span> / (CGFloat)(textString.characters.count) * <span class="keyword">char</span></span><br><span class="line">pointY = (CGFloat)(arc4random() % UInt32(Float(hight)))</span><br><span class="line"><span class="built_in">point</span> = CGPoint(x: pointX, y: pointY)</span><br><span class="line">let charStr = textString[textString.index(textString.startIndex, offsetBy:i)]</span><br><span class="line">let <span class="keyword">string</span> = <span class="keyword">String</span>(charStr)</span><br><span class="line"><span class="keyword">string</span>.draw(at: <span class="built_in">point</span>,withAttributes:([NSFontAttributeName : UIFont.systemFont(ofSize: <span class="number">14</span>)]))</span><br><span class="line">&#125;</span><br><span class="line">drawLine(<span class="built_in">rect</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - 绘制干扰线</span></span><br><span class="line">func drawLine(_ <span class="built_in">rect</span>: CGRect) &#123;</span><br><span class="line">let context = UIGraphicsGetCurrentContext()</span><br><span class="line">context!.setLineWidth(<span class="number">1.0</span>)</span><br><span class="line">var pointX = <span class="number">0.0</span></span><br><span class="line">var pointY = <span class="number">0.0</span></span><br><span class="line"><span class="built_in">for</span> _ in <span class="number">0.</span>.&lt;lineCount &#123;</span><br><span class="line">context!.setStrokeColor(randomColor().cgColor)</span><br><span class="line">pointX = Double(arc4random() % UInt32(Float(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span>)))</span><br><span class="line">pointY = Double(arc4random() % UInt32(Float(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span>)))</span><br><span class="line">context?.<span class="built_in">move</span>(to: CGPoint(x: pointX, y: pointY))</span><br><span class="line">pointX = Double(CGFloat(arc4random() % UInt32(Float(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">width</span>))))</span><br><span class="line">pointY = Double(CGFloat(arc4random() % UInt32(Float(<span class="built_in">rect</span>.<span class="built_in">size</span>.<span class="built_in">height</span>))))</span><br><span class="line">context?.addLine(to: CGPoint(x: pointX, y: pointY))</span><br><span class="line">context!.strokePath()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>OC版本：iOS开发 - 随机图片验证码封装-<a href="http://www.jianshu.com/p/936d2e06fd26" target="_blank" rel="noopener">http://www.jianshu.com/p/936d2e06fd26</a></strong></p>
<h4 id="九、圆形输入框封装"><a href="#九、圆形输入框封装" class="headerlink" title="九、圆形输入框封装"></a>九、圆形输入框封装</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-47ebc91140d2ea1c.gif?imageMogr2/auto-orient/strip" alt="圆形输入框封装"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - 监听文本输入 核心操作</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">textFieldDidChange</span><span class="params">(<span class="number">_</span> textField: UITextField)</span></span> &#123;</span><br><span class="line"><span class="keyword">let</span> i = textField.text?.characters.<span class="built_in">count</span></span><br><span class="line"><span class="keyword">if</span> i! &gt; labelCount &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">((labelArr.object(at: <span class="number">0</span>)) <span class="keyword">as</span>! <span class="type">UILabel</span>).text = <span class="string">""</span></span><br><span class="line">((labelArr.object(at: <span class="number">0</span>)) <span class="keyword">as</span>! <span class="type">UILabel</span>).layer.borderColor = defaultColor.cgColor</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">((labelArr.object(at: (i! - <span class="number">1</span>))) <span class="keyword">as</span>! <span class="type">UILabel</span>).text = (textField.text! <span class="keyword">as</span> <span class="type">NSString</span>).substring(with: <span class="type">NSMakeRange</span>(i! - <span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">((labelArr.object(at: (i! - <span class="number">1</span>))) <span class="keyword">as</span>! <span class="type">UILabel</span>).layer.borderColor = changedColor.cgColor</span><br><span class="line">((labelArr.object(at: (i! - <span class="number">1</span>))) <span class="keyword">as</span>! <span class="type">UILabel</span>).textColor = changedColor</span><br><span class="line"><span class="keyword">if</span> labelCount &gt; i! &#123;</span><br><span class="line">((labelArr.object(at: (i!))) <span class="keyword">as</span>! <span class="type">UILabel</span>).text = <span class="string">""</span></span><br><span class="line">((labelArr.object(at: (i!))) <span class="keyword">as</span>! <span class="type">UILabel</span>).layer.borderColor = defaultColor.cgColor</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - setupUI</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setupUI</span><span class="params">()</span></span> &#123;</span><br><span class="line">setupTextField()</span><br><span class="line"><span class="keyword">var</span> labelX = <span class="type">CGFloat</span>()</span><br><span class="line"><span class="keyword">let</span> labelY : <span class="type">CGFloat</span> = <span class="number">0.0</span></span><br><span class="line"><span class="keyword">let</span> labelWidth = <span class="keyword">self</span>.width / <span class="type">CGFloat</span>(labelCount)</span><br><span class="line"><span class="keyword">let</span> sideLength = labelWidth &lt; <span class="keyword">self</span>.height ? labelWidth : <span class="keyword">self</span>.height</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;labelCount &#123;</span><br><span class="line"><span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">labelX = <span class="number">0</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">labelX = <span class="type">CGFloat</span>(i) * (sideLength + labelDistance)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>(frame: <span class="type">CGRect</span>(x: labelX, y: labelY, width: sideLength, height: sideLength))</span><br><span class="line"><span class="keyword">self</span>.addSubview(label)</span><br><span class="line">label.textAlignment = <span class="type">NSTextAlignment</span>.center</span><br><span class="line">label.layer.borderColor = <span class="type">UIColor</span>.black.cgColor</span><br><span class="line">label.layer.borderWidth = <span class="number">1.0</span></span><br><span class="line">label.layer.cornerRadius = sideLength / <span class="number">2.0</span></span><br><span class="line">labelArr.add(label)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - UITextFieldDelegate</span></span><br><span class="line"><span class="comment">// MARK: 监听输入框</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">textField</span><span class="params">(<span class="number">_</span> textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"><span class="comment">// 允许删除</span></span><br><span class="line"><span class="keyword">if</span> (string.characters.<span class="built_in">count</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (textField.text?.characters.<span class="built_in">count</span>)! &gt;= labelCount &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// MARK: 回车收起键盘</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">textFieldShouldReturn</span><span class="params">(<span class="number">_</span> textField: UITextField)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">textField.resignFirstResponder()</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>OC版本：iOS开发 - 圆形验证码(或密码)输入框的封装-<a href="http://www.jianshu.com/p/fce6bd4038eb" target="_blank" rel="noopener">http://www.jianshu.com/p/fce6bd4038eb</a></strong></p>
<h4 id="十、第三方库-SnapKit-用法"><a href="#十、第三方库-SnapKit-用法" class="headerlink" title="十、第三方库 SnapKit 用法"></a>十、第三方库 SnapKit 用法</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-5e2952f51add8ded.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="第三方库 SnapKit 用法"></p>
<ul>
<li>示例代码<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">func addRedView() &#123;</span><br><span class="line">redView<span class="selector-class">.backgroundColor</span> = UIColor.red</span><br><span class="line">view.addSubview(redView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// redView 距离父视图四条边的距离都是 50</span></span><br><span class="line">redView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line">make<span class="selector-class">.edges</span><span class="selector-class">.equalTo</span>(view).inset(<span class="number">50</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addBlueView() &#123;</span><br><span class="line">blueView<span class="selector-class">.backgroundColor</span> = UIColor.blue</span><br><span class="line">view.addSubview(blueView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// blueView 左边距离父视图为 0；上边距离父视图为 0；size 是(50，50)</span></span><br><span class="line">blueView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line">make<span class="selector-class">.left</span><span class="selector-class">.equalTo</span>(<span class="number">0</span>)</span><br><span class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(<span class="number">0</span>)</span><br><span class="line">make<span class="selector-class">.size</span><span class="selector-class">.equalTo</span>(CGSize(<span class="attribute">width</span>: <span class="number">50</span>, height: <span class="number">50</span>))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addBlackView() &#123;</span><br><span class="line">blackView<span class="selector-class">.backgroundColor</span> = UIColor.black</span><br><span class="line">view.addSubview(blackView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// blackView 左边和 redView 的右边距离为 0；大小与 blueView 相同；且与 blueView 上对齐</span></span><br><span class="line">blackView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line">make<span class="selector-class">.left</span><span class="selector-class">.equalTo</span>(redView<span class="selector-class">.snp</span><span class="selector-class">.right</span>)</span><br><span class="line">make<span class="selector-class">.size</span><span class="selector-class">.equalTo</span>(blueView)</span><br><span class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(blueView)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addCyanView() &#123;</span><br><span class="line">cyanView<span class="selector-class">.backgroundColor</span> = UIColor.cyan</span><br><span class="line">view.addSubview(cyanView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// cyanView 与 blueView 左对齐；cyanView 的顶部距离 redView 的底部 10；cyanView 的高是40；cyanView 与 blueView 等宽</span></span><br><span class="line">cyanView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line">make<span class="selector-class">.trailing</span><span class="selector-class">.equalTo</span>(blueView)</span><br><span class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(redView<span class="selector-class">.snp</span><span class="selector-class">.bottom</span>).offset(<span class="number">10</span>)</span><br><span class="line">make<span class="selector-class">.height</span><span class="selector-class">.equalTo</span>(<span class="number">40</span>)</span><br><span class="line">make<span class="selector-class">.width</span><span class="selector-class">.equalTo</span>(blueView)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addYellowView() &#123;</span><br><span class="line">yellowView<span class="selector-class">.backgroundColor</span> = UIColor.yellow</span><br><span class="line">view.addSubview(yellowView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// yellowView 顶部与 redView 的底部对齐；yellowView 与 blackView 左对齐；yellowView 与 blueView 相同大小</span></span><br><span class="line">yellowView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line">make<span class="selector-class">.top</span><span class="selector-class">.equalTo</span>(redView<span class="selector-class">.snp</span><span class="selector-class">.bottom</span>)</span><br><span class="line">make<span class="selector-class">.trailing</span><span class="selector-class">.equalTo</span>(blackView)</span><br><span class="line">make<span class="selector-class">.size</span><span class="selector-class">.equalTo</span>(blueView)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addWhiteView() &#123;</span><br><span class="line">whiteView<span class="selector-class">.backgroundColor</span> = UIColor.white</span><br><span class="line">redView.addSubview(whiteView)</span><br><span class="line"></span><br><span class="line"><span class="comment">// whiteView 的父视图是 redView，距离父视图四条边的距离分别是（30，10，30，10）</span></span><br><span class="line"></span><br><span class="line">whiteView<span class="selector-class">.snp</span><span class="selector-class">.makeConstraints</span> &#123; (make) <span class="keyword">in</span></span><br><span class="line"><span class="comment">// 第一种方式</span></span><br><span class="line">make<span class="selector-class">.edges</span><span class="selector-class">.equalTo</span>(redView).inset(UIEdgeInsets(<span class="attribute">top</span>: <span class="number">30</span>, left: <span class="number">10</span>, bottom: <span class="number">30</span>, right: <span class="number">10</span>))</span><br><span class="line"><span class="comment">// 第二种方式</span></span><br><span class="line"><span class="comment">//            make.top.equalTo(redView).offset(30)</span></span><br><span class="line"><span class="comment">//            make.left.equalTo(redView).offset(10)</span></span><br><span class="line"><span class="comment">//            make.bottom.equalTo(redView).offset(-30)</span></span><br><span class="line"><span class="comment">//            make.right.equalTo(redView).offset(-10)</span></span><br><span class="line"><span class="comment">// 第三种方式</span></span><br><span class="line"><span class="comment">//            make.top.left.bottom.right.equalTo(redView).inset(UIEdgeInsets(top: 30, left: 10, bottom: 30, right: 10))</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h5 id="详情代码，请移步到-https-github-com-liuzhongning-NNMintFurniture-中查看，如有疑问或有建议的地方，欢迎讨论。另外代码中有一个名为-guide-swift-的类，简单标出了代码的结构，更方便阅读。"><a href="#详情代码，请移步到-https-github-com-liuzhongning-NNMintFurniture-中查看，如有疑问或有建议的地方，欢迎讨论。另外代码中有一个名为-guide-swift-的类，简单标出了代码的结构，更方便阅读。" class="headerlink" title="详情代码，请移步到 https://github.com/liuzhongning/NNMintFurniture 中查看，如有疑问或有建议的地方，欢迎讨论。另外代码中有一个名为 guide.swift 的类，简单标出了代码的结构，更方便阅读。"></a>详情代码，请移步到 <a href="https://github.com/liuzhongning/NNMintFurniture" target="_blank" rel="noopener">https://github.com/liuzhongning/NNMintFurniture</a> 中查看，如有疑问或有建议的地方，欢迎讨论。另外代码中有一个名为 <code>guide.swift</code> 的类，简单标出了代码的结构，更方便阅读。</h5><h5 id="会持续更新……"><a href="#会持续更新……" class="headerlink" title="会持续更新……"></a>会持续更新……</h5>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS 获取设备的各种信息/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS 获取设备的各种信息/" itemprop="url">
                  iOS 获取设备的各种信息
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="iOS-获取设备的各种信息"><a href="#iOS-获取设备的各种信息" class="headerlink" title="iOS 获取设备的各种信息"></a><a href="https://github.com/liuzhongning/NNDeviceInformation" target="_blank" rel="noopener">iOS 获取设备的各种信息</a></h5><h3 id="一、目录结构"><a href="#一、目录结构" class="headerlink" title="一、目录结构:"></a>一、目录结构:</h3><ol>
<li>获取屏幕宽度与高度</li>
<li>获取设备版本号</li>
<li>获取iPhone名称</li>
<li>获取app版本号</li>
<li>获取电池电量</li>
<li>获取当前系统名称</li>
<li>获取当前系统版本号</li>
<li>获取通用的唯一识别码UUID</li>
<li>获取当前设备IP</li>
<li>获取总内存大小</li>
<li>获取当前可用内存</li>
<li>获取精准电池电量</li>
<li>获取电池当前的状态（共有4种状态）</li>
<li>获取设备当前的语言</li>
</ol>
<h3 id="二、具体内容"><a href="#二、具体内容" class="headerlink" title="二、具体内容"></a>二、具体内容</h3><h5 id="1-获取屏幕宽度与高度"><a href="#1-获取屏幕宽度与高度" class="headerlink" title="1. 获取屏幕宽度与高度"></a>1. 获取屏幕宽度与高度</h5><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 屏幕宽度</span></span><br><span class="line">+ (CGFloat)getDeviceScreenWidth &#123;</span><br><span class="line"><span class="built_in">return</span> [UIScreen mainScreen].bounds.<span class="built_in">size</span>.<span class="built_in">width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 屏幕高度</span></span><br><span class="line">+ (CGFloat)getDeviceScreenHeight &#123;</span><br><span class="line"><span class="built_in">return</span> [UIScreen mainScreen].bounds.<span class="built_in">size</span>.<span class="built_in">height</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>[UIScreen mainScreen].bounds.size.width</code>用的很普遍，一般来说定义成宏更好，然后根据屏幕宽高进行尺寸的适配。</p>
<h5 id="2-获取设备版本号"><a href="#2-获取设备版本号" class="headerlink" title="2. 获取设备版本号"></a>2. 获取设备版本号</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)getDeviceName &#123;</span><br><span class="line"><span class="comment">// 需要#import "sys/utsname.h"</span></span><br><span class="line">struct utsname systemInfo;</span><br><span class="line">uname(&amp;systemInfo);</span><br><span class="line">NSString *deviceString = [NSString <span class="string">stringWithCString:</span>systemInfo.machine <span class="string">encoding:</span>NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone3,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 4"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone3,2"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 4"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone3,3"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 4"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone4,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 4S"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone5,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone5,2"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5 (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone5,3"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5c (GSM)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone5,4"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5c (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone6,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5s (GSM)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone6,2"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 5s (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone7,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 6 Plus"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone7,2"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 6"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone8,1"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 6s"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone8,2"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone 6s Plus"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPhone8,4"</span>])    <span class="keyword">return</span> @<span class="string">"iPhone SE"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPod1,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPod Touch 1G"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPod2,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPod Touch 2G"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPod3,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPod Touch 3G"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPod4,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPod Touch 4G"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPod5,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPod Touch (5 Gen)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad1,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPad"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad1,2"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 3G"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 2 (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,2"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 2"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,3"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 2 (CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,4"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 2"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,5"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,6"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad2,7"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 3 (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,2"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 3 (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,3"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 3"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,4"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 4 (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,5"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 4"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad3,6"</span>])      <span class="keyword">return</span> @<span class="string">"iPad 4 (GSM+CDMA)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Air (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,2"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Air (Cellular)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,4"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 2 (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,5"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 2 (Cellular)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,6"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 2"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,7"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 3"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,8"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 3"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad4,9"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 3"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad5,1"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 4 (WiFi)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad5,2"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Mini 4 (LTE)"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad5,3"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Air 2"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad5,4"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Air 2"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad6,3"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Pro 9.7"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad6,4"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Pro 9.7"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad6,7"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Pro 12.9"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"iPad6,8"</span>])      <span class="keyword">return</span> @<span class="string">"iPad Pro 12.9"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"i386"</span>])         <span class="keyword">return</span> @<span class="string">"Simulator"</span>;</span><br><span class="line"><span class="keyword">if</span> ([deviceString <span class="string">isEqualToString:</span>@<span class="string">"x86_64"</span>])       <span class="keyword">return</span> @<span class="string">"Simulator"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> deviceString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-获取iPhone名称"><a href="#3-获取iPhone名称" class="headerlink" title="3. 获取iPhone名称"></a>3. 获取iPhone名称</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取iPhone名称</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getiPhoneName &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIDevice</span> currentDevice].name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取的是你 iPhone 的名字。</p>
<h5 id="4-获取app版本号"><a href="#4-获取app版本号" class="headerlink" title="4. 获取app版本号"></a>4. 获取app版本号</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取app版本号</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getAPPVerion &#123;</span><br><span class="line"><span class="keyword">return</span> [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:<span class="string">@"CFBundleShortVersionString"</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-获取电池电量"><a href="#5-获取电池电量" class="headerlink" title="5. 获取电池电量"></a>5. 获取电池电量</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取电池电量</span></span><br><span class="line">+ (<span class="built_in">CGFloat</span>)getBatteryLevel &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIDevice</span> currentDevice].batteryLevel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方法获取电池电量不是很精确，下边会介绍一个获取精确电池电量的。</p>
<h5 id="6-获取当前系统名称"><a href="#6-获取当前系统名称" class="headerlink" title="6. 获取当前系统名称"></a>6. 获取当前系统名称</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 当前系统名称</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getSystemName &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIDevice</span> currentDevice].systemName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-获取当前系统版本号"><a href="#7-获取当前系统版本号" class="headerlink" title="7. 获取当前系统版本号"></a>7. 获取当前系统版本号</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 当前系统版本号</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getSystemVersion &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIDevice</span> currentDevice].systemVersion;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="8-获取通用的唯一识别码UUID"><a href="#8-获取通用的唯一识别码UUID" class="headerlink" title="8. 获取通用的唯一识别码UUID"></a>8. 获取通用的唯一识别码UUID</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 通用唯一识别码UUID</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getUUID &#123;</span><br><span class="line"><span class="keyword">return</span> [[<span class="built_in">UIDevice</span> currentDevice] identifierForVendor].UUIDString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="9-获取当前设备IP"><a href="#9-获取当前设备IP" class="headerlink" title="9. 获取当前设备IP"></a>9. 获取当前设备IP</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前设备IP</span></span><br><span class="line">+ (NSString *)getDeviceIPAdress &#123;</span><br><span class="line">NSString *address = @<span class="string">"an error occurred when obtaining ip address"</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ifaddrs</span></span> *interfaces = NULL;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ifaddrs</span></span> *temp_addr = NULL;</span><br><span class="line">int success = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">success = getifaddrs(&amp;interfaces);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (success == <span class="number">0</span>) &#123; <span class="comment">// 0 表示获取成功</span></span><br><span class="line"></span><br><span class="line">temp_addr = interfaces;</span><br><span class="line"><span class="keyword">while</span> (temp_addr != NULL) &#123;</span><br><span class="line"><span class="keyword">if</span>( temp_addr-&gt;ifa_addr-&gt;sa_family == AF_INET) &#123;</span><br><span class="line"><span class="comment">// Check if interface is en0 which is the wifi connection on the iPhone</span></span><br><span class="line"><span class="keyword">if</span> ([[NSString stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:@<span class="string">"en0"</span>]) &#123;</span><br><span class="line"><span class="comment">// Get NSString from C String</span></span><br><span class="line">address = [NSString stringWithUTF8String:inet_ntoa(((<span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span></span> *)temp_addr-&gt;ifa_addr)-&gt;sin_addr)];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">temp_addr = temp_addr-&gt;ifa_next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">freeifaddrs(interfaces);</span><br><span class="line"><span class="keyword">return</span> address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="10-获取总内存大小"><a href="#10-获取总内存大小" class="headerlink" title="10. 获取总内存大小"></a>10. 获取总内存大小</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取总内存大小</span></span><br><span class="line">+ (<span class="keyword">long</span> <span class="keyword">long</span>)getTotalMemorySize &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">NSProcessInfo</span> processInfo].physicalMemory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="11-获取当前可用内存"><a href="#11-获取当前可用内存" class="headerlink" title="11. 获取当前可用内存"></a>11. 获取当前可用内存</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取当前可用内存</span></span><br><span class="line">+ (<span class="keyword">long</span> <span class="keyword">long</span>)getAvailableMemorySize &#123;</span><br><span class="line"><span class="keyword">vm_statistics_data_t</span> vmStats;</span><br><span class="line"><span class="keyword">mach_msg_type_number_t</span> infoCount = HOST_VM_INFO_COUNT;</span><br><span class="line"><span class="keyword">kern_return_t</span> kernReturn = host_statistics(mach_host_self(), HOST_VM_INFO, (<span class="keyword">host_info_t</span>)&amp;vmStats, &amp;infoCount);</span><br><span class="line"><span class="keyword">if</span> (kernReturn != KERN_SUCCESS)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> NSNotFound;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ((vm_page_size * vmStats.free_count + vm_page_size * vmStats.inactive_count));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="12-获取精准电池电量"><a href="#12-获取精准电池电量" class="headerlink" title="12. 获取精准电池电量"></a>12. 获取精准电池电量</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取精准电池电量</span></span><br><span class="line">+ (<span class="built_in">CGFloat</span>)getCurrentBatteryLevel &#123;</span><br><span class="line"><span class="built_in">UIApplication</span> *app = [<span class="built_in">UIApplication</span> sharedApplication];</span><br><span class="line"><span class="keyword">if</span> (app.applicationState == <span class="built_in">UIApplicationStateActive</span>||app.applicationState==<span class="built_in">UIApplicationStateInactive</span>) &#123;</span><br><span class="line">Ivar ivar=  class_getInstanceVariable([app <span class="keyword">class</span>],<span class="string">"_statusBar"</span>);</span><br><span class="line"><span class="keyword">id</span> status  = object_getIvar(app, ivar);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">id</span> aview <span class="keyword">in</span> [status subviews]) &#123;</span><br><span class="line"><span class="keyword">int</span> batteryLevel = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">id</span> bview <span class="keyword">in</span> [aview subviews]) &#123;</span><br><span class="line"><span class="keyword">if</span> ([<span class="built_in">NSStringFromClass</span>([bview <span class="keyword">class</span>]) caseInsensitiveCompare:<span class="string">@"UIStatusBarBatteryItemView"</span>] == <span class="built_in">NSOrderedSame</span>&amp;&amp;[[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue] &gt;=<span class="number">6.0</span>) &#123;</span><br><span class="line"></span><br><span class="line">Ivar ivar=  class_getInstanceVariable([bview <span class="keyword">class</span>],<span class="string">"_capacity"</span>);</span><br><span class="line"><span class="keyword">if</span>(ivar) &#123;</span><br><span class="line">batteryLevel = ((<span class="keyword">int</span> (*)(<span class="keyword">id</span>, Ivar))object_getIvar)(bview, ivar);</span><br><span class="line"><span class="keyword">if</span> (batteryLevel &gt; <span class="number">0</span> &amp;&amp; batteryLevel &lt;= <span class="number">100</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> batteryLevel;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面这个方法是通过 runtime 获取电池电量控件类私有变量的值，较为精确。</p>
<h5 id="13-获取电池当前的状态（共有4种状态）"><a href="#13-获取电池当前的状态（共有4种状态）" class="headerlink" title="13. 获取电池当前的状态（共有4种状态）"></a>13. 获取电池当前的状态（共有4种状态）</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取电池当前的状态，共有4种状态</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *) getBatteryState &#123;</span><br><span class="line"><span class="built_in">UIDevice</span> *device = [<span class="built_in">UIDevice</span> currentDevice];</span><br><span class="line"><span class="keyword">if</span> (device.batteryState == <span class="built_in">UIDeviceBatteryStateUnknown</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">@"UnKnow"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (device.batteryState == <span class="built_in">UIDeviceBatteryStateUnplugged</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">@"Unplugged"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (device.batteryState == <span class="built_in">UIDeviceBatteryStateCharging</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">@"Charging"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (device.batteryState == <span class="built_in">UIDeviceBatteryStateFull</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">@"Full"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="14-获取设备当前的语言"><a href="#14-获取设备当前的语言" class="headerlink" title="14. 获取设备当前的语言"></a>14. 获取设备当前的语言</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// 获取当前语言</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)getDeviceLanguage &#123;</span><br><span class="line"><span class="built_in">NSArray</span> *languageArray = [<span class="built_in">NSLocale</span> preferredLanguages];</span><br><span class="line"><span class="keyword">return</span> [languageArray objectAtIndex:<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="提示：上面代码如果直接复制的话有些会报错，这是因为需要导入头文件，详细代码请点击-iOS-获取设备的各种信息。"><a href="#提示：上面代码如果直接复制的话有些会报错，这是因为需要导入头文件，详细代码请点击-iOS-获取设备的各种信息。" class="headerlink" title="提示：上面代码如果直接复制的话有些会报错，这是因为需要导入头文件，详细代码请点击 iOS 获取设备的各种信息。"></a>提示：上面代码如果直接复制的话有些会报错，这是因为需要导入头文件，详细代码请点击 <a href="https://github.com/liuzhongning/NNDeviceInformation" target="_blank" rel="noopener">iOS 获取设备的各种信息</a>。</h4>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发 - 仿简书个人主页多页面滑动视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发 - 仿简书个人主页多页面滑动视图/" itemprop="url">
                  iOS开发 - 仿简书个人主页多页面滑动视图
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>之前项目中很多地方用到了滑动视图，三个界面五个界面或界面个数不定的情况都有，这里以简书 APP 的个人主页为例，总结一下，一则对自己也有好处，二则希望对看到的朋友有所帮助。</p>
</blockquote>
<ul>
<li><p>简书APP个人主页：<br><img src="http://upload-images.jianshu.io/upload_images/2665449-5b13d9033bba3752.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="简书APP个人主页"></p>
</li>
<li><p>demo 效果图：</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-64f7bc0e3b50267d.gif?imageMogr2/auto-orient/strip" alt="demo 效果图"></p>
<ul>
<li>demo 地址：<a href="https://github.com/liuzhongning/NNJaneBookView" target="_blank" rel="noopener">https://github.com/liuzhongning/NNJaneBookView</a></li>
</ul>
<h4 id="简单说下思路及核心代码："><a href="#简单说下思路及核心代码：" class="headerlink" title="简单说下思路及核心代码："></a>简单说下思路及核心代码：</h4><h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><ul>
<li>导航栏上面的头像会随着视图的上下滑动而变大变小，这里注册了一个通知，用来监听视图的上下滑动，可以根据偏移量的值来改变头像的大小。</li>
<li>此 UI 页面分为三部分，第一部分是信息展示，用来显示昵称签名等；第二部分是标签栏，即“动态”，“文章”，“更多”这三个标签；第三部分是主要显示内容；</li>
<li>我这里用了这样的思路：页面底部是一个 UIScrollView; 接着 UIScrollView 上面 add 了三个 UITableView ；信息展示以及标签栏放在 UITableView 的 tableHeaderView 中；接着挨个实现其功能即可。</li>
</ul>
<h5 id="核心代码："><a href="#核心代码：" class="headerlink" title="核心代码："></a>核心代码：</h5><ul>
<li>头像跟随页面上下滑动而变大变小</li>
<li><p>这里是头像变大变小时调用的代码，如果你的项目中用到了此功能，可以直接把这个类拿过去，然后调用下面这几句代码就可以实现了。另外点击头像的回调也通过 block 传了出来，你可以在此处做些操作，比如更改头像等等。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.headerImageView          = [[NNPersonalHomePageHeaderImageView alloc] initWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"header"</span>]];</span><br><span class="line">[<span class="keyword">self</span>.headerImageView reloadSizeWithScrollView:<span class="keyword">self</span>.dynamicTableView];</span><br><span class="line"><span class="keyword">self</span>.navigationItem.titleView = <span class="keyword">self</span>.headerImageView;</span><br><span class="line">[<span class="keyword">self</span>.headerImageView handleClickActionWithBlock:^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"你点击了头像按钮"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
</li>
<li><p>tableView 的头部视图</p>
</li>
<li>这里另外建了两个 UIView 类，一个用来显示基本信息（昵称签名等），一个用来显示标签栏（动态，文章等标签），额外建这两个 UIView 类是为了减少控制器中的代码。</li>
</ul>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (void)setupHeaderView &#123;</span><br><span class="line">UIView *headerView                     = [[NNPersonalHomePageHeaderView alloc] init]<span class="comment">;</span></span><br><span class="line">headerView.frame                       = CGRectMake(<span class="number">0</span>, <span class="number">0</span>, NNScreenWidth, NNHeadViewHeight + NNTitleHeight)<span class="comment">;</span></span><br><span class="line">[self.view <span class="keyword">addSubview:headerView];</span></span><br><span class="line"><span class="keyword">self.headerView </span>                       = headerView<span class="comment">;</span></span><br><span class="line">NNPersonalHomePageTitleView *titleView = [[NNPersonalHomePageTitleView alloc] init]<span class="comment">;</span></span><br><span class="line">[headerView <span class="keyword">addSubview:titleView];</span></span><br><span class="line"><span class="keyword">self.titleView </span>                        = titleView<span class="comment">;</span></span><br><span class="line">titleView.<span class="keyword">backgroundColor </span>             = [UIColor whiteColor]<span class="comment">;</span></span><br><span class="line">[titleView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">make.left.right.mas_equalTo(headerView)<span class="comment">;</span></span><br><span class="line">make.<span class="keyword">bottom.equalTo(headerView.mas_bottom);</span></span><br><span class="line"><span class="keyword">make.height.mas_equalTo(NNTitleHeight);</span></span><br><span class="line"><span class="keyword">&#125;];</span></span><br><span class="line"><span class="keyword">[self.scrollView </span>mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">make.left.right.<span class="keyword">bottom.equalTo(self.view);</span></span><br><span class="line"><span class="keyword">make.top.mas_equalTo(headerView.top);</span></span><br><span class="line"><span class="keyword">&#125;];</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">__weak </span>typeof(self) weakSelf = self<span class="comment">;</span></span><br><span class="line">titleView.titles             = @[@<span class="string">"动态"</span>, @<span class="string">"文章"</span>, @<span class="string">"更多"</span>]<span class="comment">;</span></span><br><span class="line">titleView.selectedIndex      = <span class="number">0</span><span class="comment">;</span></span><br><span class="line">titleView.<span class="keyword">buttonSelected </span>    = ^(NSInteger index)&#123;</span><br><span class="line">[weakSelf.<span class="keyword">scrollView </span>setContentOffset:CGPointMake(NNScreenWidth * index, <span class="number">0</span>) animated:YES]<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>主要内容</li>
<li><p>主要内容就是页面下部展示的具体内容，这里用了三个 UITableView ，依次添加到 UIScrollView 中，这里代码有些臃肿，后期再做优化，有兴趣的童鞋也可以帮忙改一下哈。</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">/// 主要内容</span><br><span class="line">- (void)setupContentView &#123;</span><br><span class="line">NNContentScrollView *<span class="attr">scrollView</span>           = [[NNContentScrollView alloc] init];</span><br><span class="line">scrollView.<span class="attr">delaysContentTouches</span>           = NO;</span><br><span class="line">[self.view addSubview:scrollView];</span><br><span class="line">self.<span class="attr">scrollView</span>                           = scrollView;</span><br><span class="line">scrollView.<span class="attr">pagingEnabled</span>                  = YES;</span><br><span class="line">scrollView.<span class="attr">showsVerticalScrollIndicator</span>   = NO;</span><br><span class="line">scrollView.<span class="attr">showsHorizontalScrollIndicator</span> = NO;</span><br><span class="line">scrollView.<span class="attr">delegate</span>                       = self;</span><br><span class="line">scrollView.<span class="attr">contentSize</span>                    = CGSizeMake(NNScreenWidth * <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">UIView *<span class="attr">headView</span>                          = [[UIView alloc] init];</span><br><span class="line">headView.<span class="attr">frame</span>                            = CGRectMake(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, NNHeadViewHeight + NNTitleHeight);</span><br><span class="line">self.<span class="attr">tableViewHeadView</span> = headView;</span><br><span class="line"></span><br><span class="line">NNContentTableView *<span class="attr">dynamicTableView</span> = [[NNContentTableView alloc] init];</span><br><span class="line">dynamicTableView.<span class="attr">delegate</span>            = self;</span><br><span class="line">dynamicTableView.<span class="attr">separatorStyle</span>      = UITableViewCellSeparatorStyleNone;</span><br><span class="line">self.<span class="attr">dynamicTableView</span>                = dynamicTableView;</span><br><span class="line">dynamicTableView.<span class="attr">tableHeaderView</span>     = headView;</span><br><span class="line">[scrollView addSubview:dynamicTableView];</span><br><span class="line">[dynamicTableView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">make.left.equalTo(scrollView);</span><br><span class="line">make.width.mas_equalTo(NNScreenWidth);</span><br><span class="line">make.top.equalTo(self.view);</span><br><span class="line">make.bottom.equalTo(self.view);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">NNContentTableView *<span class="attr">articleTableView</span> = [[NNContentTableView alloc] init];</span><br><span class="line">articleTableView.<span class="attr">delegate</span>            = self;</span><br><span class="line">articleTableView.<span class="attr">separatorStyle</span>      = UITableViewCellSeparatorStyleNone;</span><br><span class="line">self.<span class="attr">articleTableView</span>                = articleTableView;</span><br><span class="line">articleTableView.<span class="attr">tableHeaderView</span>     = headView;</span><br><span class="line">[scrollView addSubview:articleTableView];</span><br><span class="line">[articleTableView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">make.left.equalTo(scrollView).offset(NNScreenWidth);</span><br><span class="line">make.width.equalTo(dynamicTableView);</span><br><span class="line">make.top.bottom.equalTo(dynamicTableView);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">NNContentTableView *<span class="attr">moreTableView</span> = [[NNContentTableView alloc] init];</span><br><span class="line">moreTableView.<span class="attr">delegate</span>            = self;</span><br><span class="line">moreTableView.<span class="attr">separatorStyle</span>      = UITableViewCellSeparatorStyleNone;</span><br><span class="line">self.<span class="attr">moreTableView</span>                = moreTableView;</span><br><span class="line">moreTableView.<span class="attr">tableHeaderView</span>     = headView;</span><br><span class="line">[scrollView addSubview:moreTableView];</span><br><span class="line">[moreTableView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">make.left.equalTo(scrollView).offset(NNScreenWidth * <span class="number">2</span>);</span><br><span class="line">make.width.equalTo(dynamicTableView);</span><br><span class="line">make.top.bottom.equalTo(dynamicTableView);</span><br><span class="line">&#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>左右或上下滑动页面</p>
</li>
<li>这里为 UIScrollView 添加了代理，一旦滑动视图，便会调用下面这两个方法。为了区分是左右滑动还是上下滑动，这里做了简单的判断，<code>if (scrollView == self.scrollView)</code>，那么这就是左右滑动，因为 UITableView 是上下滑动的，所有左右滑动就是 UIScrollView 的滑动，需要切换 UITableView 的显示内容，在这里做相应的操作即可；如果 <code>if (scrollView == self.scrollView || !scrollView.window)</code>这个条件不成立，那么就是 UITableView 的滑动，就是上下滑动，在这里需要改变“标签栏”的frame，因为“标签栏”需要显示在导航栏下边位置。<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UIScrollViewDelegate</span></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidEndDecelerating:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">if</span> (scrollView == <span class="keyword">self</span>.scrollView) &#123;</span><br><span class="line"><span class="built_in">CGFloat</span> contentOffsetX       = scrollView.contentOffset.x;</span><br><span class="line"><span class="built_in">NSInteger</span> pageNum            = contentOffsetX / NNScreenWidth + <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">self</span>.titleView.selectedIndex = pageNum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">if</span> (scrollView == <span class="keyword">self</span>.scrollView || !scrollView.window) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">CGFloat</span> offsetY      = scrollView.contentOffset.y;</span><br><span class="line"><span class="built_in">CGFloat</span> originY      = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">CGFloat</span> otherOffsetY = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (offsetY &lt;= NNHeadViewHeight) &#123;</span><br><span class="line">originY              = -offsetY;</span><br><span class="line"><span class="keyword">if</span> (offsetY &lt; <span class="number">0</span>) &#123;</span><br><span class="line">otherOffsetY         = <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">otherOffsetY         = offsetY;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">originY              = -NNHeadViewHeight;</span><br><span class="line">otherOffsetY         = NNHeadViewHeight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span>.headerView.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, originY, NNScreenWidth, NNHeadViewHeight + NNTitleHeight);</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span>.titleView.titles.count; i++ ) &#123;</span><br><span class="line"><span class="keyword">if</span> (i != <span class="keyword">self</span>.titleView.selectedIndex) &#123;</span><br><span class="line"><span class="built_in">UITableView</span> *contentView = <span class="keyword">self</span>.scrollView.subviews[i];</span><br><span class="line"><span class="built_in">CGPoint</span> offset = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, otherOffsetY);</span><br><span class="line"><span class="keyword">if</span> ([contentView isKindOfClass:[<span class="built_in">UITableView</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line"><span class="keyword">if</span> (contentView.contentOffset.y &lt; NNHeadViewHeight || offset.y &lt; NNHeadViewHeight) &#123;</span><br><span class="line">[contentView setContentOffset:offset animated:<span class="literal">NO</span>];</span><br><span class="line"><span class="keyword">self</span>.scrollView.offset = offset;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面只是简单的介绍下，具体的代码还请到 <a href="https://github.com/liuzhongning/NNJaneBookView" target="_blank" rel="noopener">demo 中</a> 查看，如有疑问或有建议的地方，欢迎讨论。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发 - 极光推送中生产证书和开发证书的生成/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发 - 极光推送中生产证书和开发证书的生成/" itemprop="url">
                  iOS开发 - 极光推送中生产证书和开发证书的生成
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>项目中用到了 <a href="https://www.jiguang.cn/push?source=bdjj#B_vid=1350498826687775136" target="_blank" rel="noopener">极光推送</a>，这里记录下极光推送中生产证书和开发证书的生成过程。</p>
</blockquote>
<p>推送设置中需要配置生产证书以及开发证书~~<br><img src="http://upload-images.jianshu.io/upload_images/2665449-f6e129813e38c4b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="极光推送中生产证书和开发证书的生成"></p>
<h3 id="1-开发证书生成步骤"><a href="#1-开发证书生成步骤" class="headerlink" title="1.开发证书生成步骤"></a>1.开发证书生成步骤</h3><ul>
<li>登录 <a href="https://developer.apple.com/account/#/overview/82W2K9C6T2" target="_blank" rel="noopener">苹果开发者中心</a>，点击 <strong>Certificates, IDs &amp; Profiles</strong></li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-b6de1efe8a9bc32d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤1"></p>
<ul>
<li>点击 <strong>Development</strong>，并选择 <strong>Apple Push Notification service SSL (Sandbox)</strong>，接着点击下边的 <strong>Continue</strong> 按钮</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-140d40d381467beb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤2"></p>
<ul>
<li>来到 <strong>App ID</strong> 这个界面之后，继续点击下边的 <strong>Continue</strong> 按钮</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-69cf10ec6fcb88c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤3"></p>
<ul>
<li>这里的说明是让我们生成一个 <strong>CSR 文件</strong>，继续点击 <strong>Continue</strong> 按钮</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-c02bbf6bb568e09f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤4"></p>
<ul>
<li><p>这个界面需要上传 CSR 文件，上传 CSR 证书之后继续点击 <strong>Continue</strong> 按钮（ <strong>CSR 文件</strong> 生成很简单，后面会提一下）<br><img src="http://upload-images.jianshu.io/upload_images/2665449-1bc222f798021465.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤5"></p>
</li>
<li><p>点击 <strong>Continue</strong> 按钮之后，就会出现下面这个界面，直接点击 <strong>Download</strong> ，然后双击下载的证书，安装到钥匙串里。<br><img src="http://upload-images.jianshu.io/upload_images/2665449-0bb19655f5e19139.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发证书生成步骤6"></p>
</li>
</ul>
<h5 id="1-1-CSR-文件生成步骤"><a href="#1-1-CSR-文件生成步骤" class="headerlink" title="1.1 CSR 文件生成步骤"></a>1.1 CSR 文件生成步骤</h5><ul>
<li>首先打开电脑上的钥匙串，点击 <strong>从证书颁发机构请求证书</strong>，如下图所示：</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-153b4345af65eb1a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生成 CSR 文件步骤1"></p>
<ul>
<li>填写用户邮箱地址以及 CA 电子邮件地址，将请求改为“存储到磁盘”，点击 <strong>继续</strong>，接着点击 <strong>存储</strong> 即可。<br><img src="http://upload-images.jianshu.io/upload_images/2665449-b6141e6c50613449.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生成 CSR 文件步骤2"></li>
</ul>
<h3 id="2-生产证书生成步骤"><a href="#2-生产证书生成步骤" class="headerlink" title="2.生产证书生成步骤"></a>2.生产证书生成步骤</h3><ul>
<li>生产证书的生成和开发证书的生成类似，先选择 <strong>Production</strong> ，点击“加号”后选择 <strong>Production</strong> 中的 <strong> Apple Push Notification service SSL (Sandbox &amp; Production)</strong> 这一栏，接着点击 <strong>Continue</strong> 按钮</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-a8554f4b0b579a2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生产证书生成步骤1"></p>
<ul>
<li>来到 <strong>App ID</strong> 这个界面之后，继续点击下边的 <strong>Continue</strong> 按钮</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-721072f3f4f498bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生产证书生成步骤2"></p>
<ul>
<li>然后依然会让上传一个 <strong>CSR 文件</strong>， 不再累述。生产证书生成后，下载安装到钥匙串中即可。</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-7dda501137bad5df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="生产证书生成步骤3"></p>
<h3 id="3-导出-p12-文件"><a href="#3-导出-p12-文件" class="headerlink" title="3. 导出 p12 文件"></a>3. 导出 <strong>p12</strong> 文件</h3><ul>
<li><p>选中刚刚安装的生产证书和开发证书，然后导出~<br><img src="http://upload-images.jianshu.io/upload_images/2665449-7b1b25481edad0e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="导出 **p12** 文件步骤1"></p>
</li>
<li><p>文件格式为 <strong>个人信息交换(.p12)</strong><br><img src="http://upload-images.jianshu.io/upload_images/2665449-cf0e2374a4886415.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="导出 **p12** 文件步骤2"></p>
</li>
<li><p>接着设置下密码<br><img src="http://upload-images.jianshu.io/upload_images/2665449-8c590c020fed9efe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="导出 **p12** 文件步骤3"></p>
</li>
</ul>
<h5 id="最后将两个p12文件上传到极光推送上，就OK了！"><a href="#最后将两个p12文件上传到极光推送上，就OK了！" class="headerlink" title="最后将两个p12文件上传到极光推送上，就OK了！"></a>最后将两个p12文件上传到极光推送上，就OK了！</h5><p><img src="http://upload-images.jianshu.io/upload_images/2665449-d8d78f18c48bcf0c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="极光推送中生产证书和开发证书的生成"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发 - 链式编程思想/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发 - 链式编程思想/" itemprop="url">
                  iOS开发 - 链式编程思想
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>因为有 Masory 以及 Snapkit 这些知名开源库的存在，相信很多 iOS 开发者对链式编程都不会太陌生，先来看下面这句代码：</p>
</blockquote>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="name">imageView</span> mas_makeConstraints:^(<span class="name">MASConstraintMaker</span> *make) &#123;</span><br><span class="line">make.top.bottom.left.right.equalTo(<span class="name">self.view</span>).insets(<span class="name">UIEdgeInsetsMake</span>(<span class="name">250</span>, <span class="number">100</span>, <span class="number">250</span>, <span class="number">100</span>))<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>这句代码就属于链式编程，而且 Masonry 框架本身也是通过链式语法对 NSLayoutConstraints 进行的封装。对 Masonry 感兴趣的童鞋可以读读这篇文章 <a href="http://www.jianshu.com/p/2fe9568fd3f5" target="_blank" rel="noopener">iOS开发之源码解析 - Masonry</a>。</p>
<h4 id="链式编程思想："><a href="#链式编程思想：" class="headerlink" title="链式编程思想："></a>链式编程思想：</h4><p>所谓链式编程就是通过点（.）将多个操作链接在一起成为一句代码，使代码更加紧凑，也提高了代码的可读性（如上面那句代码）。</p>
<h4 id="链式编程特点："><a href="#链式编程特点：" class="headerlink" title="链式编程特点："></a>链式编程特点：</h4><ul>
<li>方法的返回值是 block，block 中必须有一个返回值，通常返回它本身，也可以是处理后的数据或对象。</li>
<li>返回值中的 block 具备两个功能，第一：可以作为类的属性被’点’出来。第二：可以当作函数直接调用。</li>
<li>通常会通过调用一个函数来给属性赋值，在函数内部封装赋值的语句，也可以加入一些判断逻辑等。</li>
</ul>
<h4 id="链式编程练习"><a href="#链式编程练习" class="headerlink" title="链式编程练习"></a>链式编程练习</h4><p>我这里写了一个 UILabel 的扩展类用来练习链式编程，叫做 <code>UILabel+NNCategory</code>。利用这个分类创建 UILabel，并为其设置<code>frame，text，font，textColor，backgroundColor</code>等属性，代码如下：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="name">UILabel</span> addToView:self.view createLabel:^(<span class="name">UILabel</span> *label) &#123;</span><br><span class="line">label.nn_frame(<span class="name">50</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">100</span>).nn_text(<span class="name">@</span><span class="string">"NNTreasure"</span>).nn_fontSize(<span class="name">50</span>).nn_textColor([<span class="name">UIColor</span> redColor]).nn_backgroundColorRGB(<span class="name">224</span>, <span class="number">224</span>, <span class="number">224</span>, <span class="number">1</span>).nn_textAlignment(<span class="name">NSTextAlignmentCenter</span>)<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>细心观察上面的代码，我们可以猜出 <code>nn_frame()</code>，<code>nn_text()</code>，<code>nn_fontSize()</code> 这些都是属性，不过为什么它们后面都带有括号呢？这是<strong>因为这些属性都是 <code>block</code> 类型</strong>。那么为什么它们可以点出来呢？即为什么可以 <code>label.nn_frame().nn_text().nn_fontSize()</code> 这么用？简单来说，就是<strong>因为这些 <code>block</code> 类型的属性都带有返回值</strong>！</p>
<p>下面是分类 <code>UILabel+NNCategory</code> 的详细实现过程</p>
<ul>
<li>在 UILabel+NNCategory.h 中声明一些属性</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_text)(<span class="built_in">NSString</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_frame)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_attributedText)(<span class="built_in">NSAttributedString</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_textAlignment)(<span class="built_in">NSTextAlignment</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_textColor)(<span class="built_in">UIColor</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_textColorRGB)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_backgroundColor)(<span class="built_in">UIColor</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_backgroundColorRGB)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_highlightTextColor)(<span class="built_in">UIColor</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_highlight)(<span class="built_in">BOOL</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_enable)(<span class="built_in">BOOL</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_font)(<span class="built_in">UIFont</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_fontSize)(<span class="built_in">NSInteger</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_shadowColor)(<span class="built_in">UIColor</span> *);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_shadowOffset)(<span class="built_in">CGSize</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_lineBreakMode)(<span class="built_in">NSLineBreakMode</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_numberOfLine)(<span class="built_in">NSInteger</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_adjustsFontSizeToFitWidth)(<span class="built_in">BOOL</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_baselineAdjust)(<span class="built_in">UIBaselineAdjustment</span>);</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">UILabel</span> *(^nn_drawText)(<span class="built_in">CGRect</span>);</span><br></pre></td></tr></table></figure>
<p>我们在 UILabel 分类里面声明了这些属性，所以接下来只要是 UILabel 类型都可以点出来这些属性。这里也可以看出这些属性都是 <code>block</code> 类型。我们抽出一句代码简单说明一下：<code>@property (nonatomic, copy, readonly) UILabel *(^nn_text)(NSString *);</code>，这句代码声明了一个 block(^) 原型，名字叫做 nn_text，包含了一个 NSString 类型的参数，返回值是 UILabel 类型。</p>
<ul>
<li>在 UILabel+NNCategory.m 中实现</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSString</span> *))nn_text &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSString</span> *text) &#123;</span><br><span class="line"><span class="keyword">self</span>.text = text;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>))nn_frame &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">CGFloat</span> X, <span class="built_in">CGFloat</span> Y, <span class="built_in">CGFloat</span> W, <span class="built_in">CGFloat</span> H) &#123;</span><br><span class="line"><span class="keyword">self</span>.frame = <span class="built_in">CGRectMake</span>(X, Y, W, H);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSAttributedString</span> *))nn_attributedText &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSAttributedString</span> *attributedText) &#123;</span><br><span class="line"><span class="keyword">self</span>.attributedText = attributedText;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSTextAlignment</span>))nn_textAlignment &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSTextAlignment</span> textAlignment) &#123;</span><br><span class="line"><span class="keyword">self</span>.textAlignment = textAlignment;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIColor</span> *))nn_textColor &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIColor</span> *textColor) &#123;</span><br><span class="line"><span class="keyword">self</span>.textColor = textColor;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>))nn_textColorRGB &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">CGFloat</span> r, <span class="built_in">CGFloat</span> g, <span class="built_in">CGFloat</span> b, <span class="built_in">CGFloat</span> a)&#123;</span><br><span class="line"><span class="keyword">self</span>.textColor = [<span class="built_in">UIColor</span> colorWithRed:r / <span class="number">255.0</span> green:g / <span class="number">255.0</span> blue:g / <span class="number">255.0</span> alpha:a];</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIColor</span> *))nn_backgroundColor &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIColor</span> *backgroundColor) &#123;</span><br><span class="line"><span class="keyword">self</span>.backgroundColor = backgroundColor;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>, <span class="built_in">CGFloat</span>))nn_backgroundColorRGB &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">CGFloat</span> r, <span class="built_in">CGFloat</span> g, <span class="built_in">CGFloat</span> b, <span class="built_in">CGFloat</span> a) &#123;</span><br><span class="line"><span class="keyword">self</span>.backgroundColor = [<span class="built_in">UIColor</span> colorWithRed:r / <span class="number">255.0</span> green:g / <span class="number">255.0</span> blue:g / <span class="number">255.0</span> alpha:a];</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIColor</span> *))nn_highlightTextColor &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIColor</span> *color) &#123;</span><br><span class="line"><span class="keyword">self</span>.highlightedTextColor = color;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">BOOL</span>))nn_highlight &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">BOOL</span> isHighlighted) &#123;</span><br><span class="line"><span class="keyword">self</span>.highlighted = isHighlighted;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">BOOL</span>))nn_enable &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">BOOL</span> isEnabled) &#123;</span><br><span class="line"><span class="keyword">self</span>.enabled = isEnabled;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIFont</span> *))nn_font &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIFont</span> *font) &#123;</span><br><span class="line"><span class="keyword">self</span>.font = font;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSInteger</span>))nn_fontSize &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSInteger</span> size) &#123;</span><br><span class="line"><span class="keyword">self</span>.font = [<span class="built_in">UIFont</span> systemFontOfSize:size];</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIColor</span> *))nn_shadowColor &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIColor</span> *shadowColor) &#123;</span><br><span class="line"><span class="keyword">self</span>.shadowColor = shadowColor;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">CGSize</span>))nn_shadowOffset &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">CGSize</span> size) &#123;</span><br><span class="line"><span class="keyword">self</span>.shadowOffset = size;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSLineBreakMode</span>))nn_lineBreakMode &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSLineBreakMode</span> mode) &#123;</span><br><span class="line"><span class="keyword">self</span>.lineBreakMode = mode;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSInteger</span>))nn_numberOfLine &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSInteger</span> number) &#123;</span><br><span class="line"><span class="keyword">self</span>.numberOfLines = number;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">BOOL</span>))nn_adjustsFontSizeToFitWidth &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">BOOL</span> b) &#123;</span><br><span class="line"><span class="keyword">self</span>.adjustsFontSizeToFitWidth = b;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">UIBaselineAdjustment</span>))nn_baselineAdjust &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">UIBaselineAdjustment</span> adjustment) &#123;</span><br><span class="line"><span class="keyword">self</span>.baselineAdjustment = adjustment;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">CGRect</span>))nn_drawText &#123;</span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">CGRect</span> rect) &#123;</span><br><span class="line">[<span class="keyword">self</span> drawTextInRect:rect];</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UILabel+NNCategory.m</code> 中的这些是 <code>UILabel+NNCategory.h</code> 文件中属性的 getter 方法。我们抽出一个简单说明一下</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UILabel</span> *(^)(<span class="built_in">NSString</span> *))nn_text &#123;</span><br><span class="line"><span class="comment">// 返回临时变量的 block</span></span><br><span class="line"><span class="keyword">return</span> ^(<span class="built_in">NSString</span> *text) &#123;</span><br><span class="line"><span class="comment">// block 执行的一些功能</span></span><br><span class="line"><span class="keyword">self</span>.text = text;</span><br><span class="line"><span class="comment">// block 执行完毕的返回值</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个属性的类型是 block，具体是 <code>UILabel *(^nn_text)(NSString *)</code> 类型，需要说明的是，我们用 block 并不是为了返回 block 对象本身，而是为了在 block 内部执行一些操作，所以我们在属性的 getter 方法中首先返回一个临时的 block 对象，主要是为了在 block 内部返回 UILabel 类型的对象。具体请看上面代码块中的一些注释。</p>
<p><strong>这时我们还需要定义一个方法方便外界调用，这个方法主要有两个功能，第一是用来创建 UILabel ，第二是为其“点”出各种属性。</strong></p>
<ul>
<li>在 UILabel+NNCategory.h 中声明一个方法</li>
</ul>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (instance<span class="keyword">type</span>)addToView:(<span class="type">UIView</span> *)superView createLabel:(void(^)(<span class="type">UILabel</span> *label))block;</span><br></pre></td></tr></table></figure>
<p>这里是模仿 Masonry，我们通常用 Masonry 加约束时首先会调用这个方法：<code>- (NSArray *)mas_makeConstraints:(void(^)(MASConstraintMaker *make))block</code>，</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *))block &#123;</span><br><span class="line"><span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</span><br><span class="line">MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</span><br><span class="line">block(constraintMaker);</span><br><span class="line"><span class="keyword">return</span> [constraintMaker install];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们用 Masonry 加约束时调用这个方法，是因为 Masonry 在这个方法内部早已做好一些所需要的操作。所以接下来我们也要在 UILabel+NNCategory.m 中做些事情。</p>
<ul>
<li>在 UILabel+NNCategory.m 中实现这个方法</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (instancetype)addToView:(UIView *)superView createLabel:(void(^)(UILabel *<span class="keyword">label</span><span class="bash">))block &#123;</span></span><br><span class="line"><span class="bash">// 创建 UILabel</span></span><br><span class="line"><span class="bash">UILabel *label = [[UILabel alloc] init];</span></span><br><span class="line"><span class="bash">// 把 UILabel 添加到传过来的 superView 上</span></span><br><span class="line"><span class="bash">[superView addSubview:label];</span></span><br><span class="line"><span class="bash">// 通过 block 进行回调</span></span><br><span class="line"><span class="bash"><span class="keyword">if</span> (block) block(label);</span></span><br><span class="line"><span class="bash"><span class="built_in">return</span> label;</span></span><br><span class="line"><span class="bash">&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面这个方法首先初始化一个 UILabel 对象，接着把 UILabel 添加到传过来的 superView 上，然后对 block 进行回调，执行 block，把外界对 UILabel 设置的属性添加上去，最后返回 UILabel 对象。</p>
<hr>
<p>这就是一些简单的链式编程思维，外界调用的时候只需如下代码即可：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="name">UILabel</span> addToView:self.view createLabel:^(<span class="name">UILabel</span> *label) &#123;</span><br><span class="line">label.nn_frame(<span class="name">50</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">100</span>).nn_text(<span class="name">@</span><span class="string">"NNTreasure"</span>).nn_fontSize(<span class="name">50</span>).nn_textColor([<span class="name">UIColor</span> redColor]).nn_backgroundColorRGB(<span class="name">224</span>, <span class="number">224</span>, <span class="number">224</span>, <span class="number">1</span>).nn_textAlignment(<span class="name">NSTextAlignmentCenter</span>)<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>效果图如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-98cb658222344c24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="链式编程"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发 - 随机图片验证码封装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发 - 随机图片验证码封装/" itemprop="url">
                  iOS开发 - 随机图片验证码封装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>在 iOS 开发中，为了防止短信验证码的恶意获取，注册时需要图片验证，比如某共享单车 APP 在注册时就用了图片验证码，如下图：</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-d30ea33f4234f341.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>图片验证码封装思路：<br>第一眼看到图片验证码，可能会觉得图片验证码是由 UIImage 实现的，但事实上明显不是，这里简单说下图片验证码封装思路。</li>
<li>首先要有一个数组，里面包含 1-9、a-z 这些字符</li>
<li>在 UIView 上显示这些字符</li>
<li><p>同时在 UIView 上绘制干扰线</p>
</li>
<li><p>效果图</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-c0eae594816bb189.gif?imageMogr2/auto-orient/strip" alt="图片验证码效果图"></p>
<hr>
<ul>
<li>用法</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">_testView</span> = [[NNValidationView alloc] initWithFrame:CGRectMake((<span class="keyword">self.view.frame.size.width </span>- <span class="number">100</span>) / <span class="number">2</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">40</span>) <span class="keyword">andCharCount:4 </span><span class="keyword">andLineCount:4];</span></span><br><span class="line"><span class="keyword">[self.view </span><span class="keyword">addSubview:_testView];</span></span><br></pre></td></tr></table></figure>
<p><strong>以上两行代码便可以实现图片验证码，其中 charCount 和 lineCount 分别指显示的字符串数量以及干扰线的数量。<br>另外我们还需要知道图片验证码上的字符串，可以用下边这个 block 获取：</strong></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</span><br><span class="line"><span class="comment">/// 返回验证码数字</span></span><br><span class="line">_testView.changeValidationCodeBlock = ^(<span class="keyword">void</span>)&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"验证码被点击了：%@"</span>, weakSelf.testView.charString);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>打印效果如下</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-68d27043ca1c73a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="获取验证码数字"></p>
<ul>
<li>核心代码</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - 绘制界面</span></span><br><span class="line">- (<span class="keyword">void</span>)drawRect:(<span class="built_in">CGRect</span>)rect &#123;</span><br><span class="line">[<span class="keyword">super</span> drawRect:rect];</span><br><span class="line"><span class="keyword">self</span>.backgroundColor = NNRandomColor;</span><br><span class="line"><span class="built_in">CGFloat</span> rectWidth = rect.size.width;</span><br><span class="line"><span class="built_in">CGFloat</span> rectHeight = rect.size.height;</span><br><span class="line"><span class="built_in">CGFloat</span> pointX, pointY;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@"</span>,<span class="keyword">self</span>.charString];</span><br><span class="line"><span class="built_in">NSInteger</span> charWidth = rectWidth / text.length - <span class="number">15</span>;</span><br><span class="line"><span class="built_in">NSInteger</span> charHeight = rectHeight - <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次绘制文字</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; text.length; i++) &#123;</span><br><span class="line"><span class="comment">// 文字X坐标</span></span><br><span class="line">pointX = arc4random() % charWidth + rectWidth / text.length * i;</span><br><span class="line"><span class="comment">// 文字Y坐标</span></span><br><span class="line">pointY = arc4random() % charHeight;</span><br><span class="line"><span class="keyword">unichar</span> charC = [text characterAtIndex:i];</span><br><span class="line"><span class="built_in">NSString</span> *textC = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%C"</span>, charC];</span><br><span class="line"></span><br><span class="line">[textC drawAtPoint:<span class="built_in">CGPointMake</span>(pointX, pointY) withAttributes:@&#123;<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> systemFontOfSize:arc4random() % <span class="number">10</span> + <span class="number">15</span>]&#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取上下文</span></span><br><span class="line"><span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line"><span class="comment">// 设置线宽</span></span><br><span class="line"><span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次绘制直线</span></span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span>.lineCount; i++) &#123;</span><br><span class="line"><span class="comment">// 设置线的颜色</span></span><br><span class="line"><span class="built_in">CGContextSetStrokeColorWithColor</span>(context, NNRandomColor.CGColor);</span><br><span class="line"><span class="comment">// 设置线的起点</span></span><br><span class="line">pointX = arc4random() % (<span class="built_in">NSInteger</span>)rectWidth;</span><br><span class="line">pointY = arc4random() % (<span class="built_in">NSInteger</span>)rectHeight;</span><br><span class="line"><span class="built_in">CGContextMoveToPoint</span>(context, pointX, pointY);</span><br><span class="line"><span class="comment">// 设置线的终点</span></span><br><span class="line">pointX = arc4random() % (<span class="built_in">NSInteger</span>)rectWidth;</span><br><span class="line">pointY = arc4random() % (<span class="built_in">NSInteger</span>)rectHeight;</span><br><span class="line"><span class="built_in">CGContextAddLineToPoint</span>(context, pointX, pointY);</span><br><span class="line"><span class="comment">// 绘画路径</span></span><br><span class="line"><span class="built_in">CGContextStrokePath</span>(context);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>代码中写了注释，因此这里不再详细解释，需要看全部代码的童鞋可以点击下边的链接，有疑问或有建议的话欢迎讨论。</strong></p>
<p><a href="https://github.com/liuzhongning/NNValidationView/tree/master" target="_blank" rel="noopener">demo 地址：NNValidationView</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">刘朋坤</p>
              <p class="site-description motion-element" itemprop="description">iOS 修炼中...</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">37</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘朋坤</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
