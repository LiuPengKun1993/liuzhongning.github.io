<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="iOS 修炼中...">
<meta property="og:type" content="website">
<meta property="og:title" content="以梦为马">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="以梦为马">
<meta property="og:description" content="iOS 修炼中...">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="以梦为马">
<meta name="twitter:description" content="iOS 修炼中...">






  <link rel="canonical" href="http://yoursite.com/page/2/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>以梦为马</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">以梦为马</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">谨以此纪念岁月</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-主页">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />主页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - CADisplayLink 实现酷炫动画/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - CADisplayLink 实现酷炫动画/" itemprop="url">
                  iOS开发之 - CADisplayLink 实现酷炫动画
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>偶然发现了一个好玩的类， CADisplayLink，出于好奇所以就尝试了一下，用 CADisplayLink 做了个类似云飘的效果。由于对 CADisplayLink 的认识还比较浅，如果哪里写的不正确，还请各位大大能够指出来！看效果图先，<del>就是有点丑</del>，😂</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-da509b22ab7071c0.gif?imageMogr2/auto-orient/strip" alt="ning.gif"></p>
<ul>
<li>核心代码如下：</li>
</ul>
<h4 id="一、创建-CADisplayLink，添加事件，绑定-Runloop。"><a href="#一、创建-CADisplayLink，添加事件，绑定-Runloop。" class="headerlink" title="一、创建 CADisplayLink，添加事件，绑定 Runloop。"></a>一、创建 CADisplayLink，添加事件，绑定 Runloop。</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 CADisplayLink</span></span><br><span class="line">- (<span class="built_in">CADisplayLink</span> *)displayLink &#123;</span><br><span class="line"><span class="keyword">if</span> (!_displayLink) &#123;</span><br><span class="line">_displayLink = [<span class="built_in">CADisplayLink</span> displayLinkWithTarget:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(makeCloud)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当把 CADisplayLink 对象添加到 Runloop 中后，selector就能被周期性调用</span></span><br><span class="line">[<span class="keyword">self</span>.displayLink addToRunLoop:[<span class="built_in">NSRunLoop</span> mainRunLoop] forMode:<span class="built_in">NSRunLoopCommonModes</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> _displayLink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 周期调用的方法</span></span><br><span class="line">- (<span class="keyword">void</span>)makeCloud &#123;</span><br><span class="line"><span class="keyword">self</span>.cloudOffsetX += <span class="keyword">self</span>.cloudSpeed;</span><br><span class="line"></span><br><span class="line">[<span class="keyword">self</span> cloudLayerName:<span class="keyword">self</span>.firstCloudLayer];</span><br><span class="line">[<span class="keyword">self</span> cloudLayerName:<span class="keyword">self</span>.secondCloudLayer];</span><br><span class="line">[<span class="keyword">self</span> cloudLayerName:<span class="keyword">self</span>.thirdCloudLayer];</span><br><span class="line">[<span class="keyword">self</span> cloudLayerName:<span class="keyword">self</span>.fourthCloudLayer];</span><br><span class="line">[<span class="keyword">self</span> cloudLayerName:<span class="keyword">self</span>.fifthCloudLayer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="二、配置参数，加载图层"><a href="#二、配置参数，加载图层" class="headerlink" title="二、配置参数，加载图层"></a>二、配置参数，加载图层</h4> <figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">self</span>.cloudWidth = <span class="built_in">self</span>.frame.size.width;            <span class="comment">// 云彩宽度</span></span><br><span class="line"> <span class="built_in">self</span>.cloudColor = RGBA(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.3</span>);         <span class="comment">// 云彩颜色</span></span><br><span class="line"> <span class="built_in">self</span>.cloudSpeed = <span class="number">0.05</span> / M_PI;                      <span class="comment">// 云彩飘动的速度</span></span><br><span class="line"> <span class="built_in">self</span>.cloudPointY = <span class="number">100</span>;                             <span class="comment">// 云彩Y坐标</span></span><br><span class="line"> <span class="built_in">self</span>.cloudOffsetX = <span class="number">0</span>;                              <span class="comment">// 云彩位移X</span></span><br><span class="line"> <span class="built_in">self</span>.cloudAmplitude = <span class="number">30</span>;                           <span class="comment">// 振幅大小</span></span><br><span class="line"> <span class="built_in">self</span>.cloudCycle =  <span class="number">1.03</span> * M_PI / <span class="built_in">self</span>.cloudWidth;   <span class="comment">// 周期大小</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 添加图层</span></span><br><span class="line"> <span class="meta">[</span><span class="built_in">self</span>.layer addSublayer:<span class="built_in">self</span>.firstCloudLayer<span class="meta">]</span>;</span><br><span class="line"> <span class="meta">[</span><span class="built_in">self</span>.layer addSublayer:<span class="built_in">self</span>.secondCloudLayer<span class="meta">]</span>;</span><br><span class="line"> <span class="meta">[</span><span class="built_in">self</span>.layer addSublayer:<span class="built_in">self</span>.thirdCloudLayer<span class="meta">]</span>;</span><br><span class="line"> <span class="meta">[</span><span class="built_in">self</span>.layer addSublayer:<span class="built_in">self</span>.fourthCloudLayer<span class="meta">]</span>;</span><br><span class="line"> <span class="meta">[</span><span class="built_in">self</span>.layer addSublayer:<span class="built_in">self</span>.fifthCloudLayer<span class="meta">]</span>;</span><br></pre></td></tr></table></figure>
<h4 id="三、创建-CAShapeLayer-动画"><a href="#三、创建-CAShapeLayer-动画" class="headerlink" title="三、创建 CAShapeLayer 动画"></a>三、创建 CAShapeLayer 动画</h4> <figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 五个图层动画</span></span><br><span class="line"> - (<span class="keyword">void</span>)cloudLayerName:(<span class="built_in">CAShapeLayer</span> *)cloudLayerName &#123;</span><br><span class="line"> <span class="comment">// 创建一个Path句柄</span></span><br><span class="line"> <span class="built_in">CGMutablePathRef</span> path = <span class="built_in">CGPathCreateMutable</span>();</span><br><span class="line"> <span class="built_in">CGFloat</span> y = <span class="keyword">self</span>.cloudPointY;</span><br><span class="line"> <span class="comment">// 初始化该path到一个初始点</span></span><br><span class="line"> <span class="built_in">CGPathMoveToPoint</span>(path, <span class="literal">nil</span>, <span class="number">0</span>, y);</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">float</span> x = <span class="number">0.0</span>f; x &lt;= <span class="keyword">self</span>.cloudWidth; x++) &#123;</span><br><span class="line"> <span class="keyword">if</span> (cloudLayerName == <span class="keyword">self</span>.firstCloudLayer) &#123;</span><br><span class="line"> <span class="comment">// 云彩的 Y 值</span></span><br><span class="line"> y = <span class="keyword">self</span>.cloudAmplitude * sin(<span class="keyword">self</span>.cloudCycle * x + <span class="keyword">self</span>.cloudOffsetX - <span class="number">10</span>) + <span class="keyword">self</span>.cloudPointY + <span class="number">10</span>;</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cloudLayerName == <span class="keyword">self</span>.secondCloudLayer) &#123;</span><br><span class="line"> y = (<span class="keyword">self</span>.cloudAmplitude + <span class="number">15</span>) * sin(<span class="keyword">self</span>.cloudCycle * x + <span class="keyword">self</span>.cloudOffsetX ) + <span class="keyword">self</span>.cloudPointY ;</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cloudLayerName == <span class="keyword">self</span>.thirdCloudLayer) &#123;</span><br><span class="line"> y = (<span class="keyword">self</span>.cloudAmplitude + <span class="number">30</span>)* sin(<span class="keyword">self</span>.cloudCycle * x + <span class="keyword">self</span>.cloudOffsetX + <span class="number">20</span>) + <span class="keyword">self</span>.cloudPointY + <span class="number">10</span>;</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cloudLayerName == <span class="keyword">self</span>.fourthCloudLayer) &#123;</span><br><span class="line"> y = (<span class="keyword">self</span>.cloudAmplitude + <span class="number">20</span>)* sin(<span class="keyword">self</span>.cloudCycle * x + <span class="keyword">self</span>.cloudOffsetX - <span class="number">20</span>) + <span class="keyword">self</span>.cloudPointY - <span class="number">10</span>;</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cloudLayerName == <span class="keyword">self</span>.fifthCloudLayer) &#123;</span><br><span class="line"> y = (<span class="keyword">self</span>.cloudAmplitude + <span class="number">10</span>)* sin(<span class="keyword">self</span>.cloudCycle * x + <span class="keyword">self</span>.cloudOffsetX - <span class="number">10</span>) + <span class="keyword">self</span>.cloudPointY + <span class="number">2</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 添加一条直线</span></span><br><span class="line"> <span class="built_in">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, x, y);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 添加一条直线</span></span><br><span class="line"> <span class="built_in">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, <span class="keyword">self</span>.cloudWidth, <span class="keyword">self</span>.frame.size.height);</span><br><span class="line"> <span class="comment">// 添加一条直线</span></span><br><span class="line"> <span class="built_in">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, <span class="number">0</span>, <span class="keyword">self</span>.frame.size.height);</span><br><span class="line"> <span class="comment">// 关闭该path</span></span><br><span class="line"> <span class="built_in">CGPathCloseSubpath</span>(path);</span><br><span class="line"> cloudLayerName.path = path;</span><br><span class="line"> <span class="comment">// 释放该path</span></span><br><span class="line"> <span class="built_in">CGPathRelease</span>(path);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>推荐几篇和 CADisplayLink 相关的深度好文！</p>
</li>
<li><p><a href="https://developer.apple.com/reference/quartzcore/cadisplaylink" target="_blank" rel="noopener">官方文档</a></p>
</li>
<li><a href="https://zsisme.gitbooks.io/ios-/content/chapter11/frame-timing.html" target="_blank" rel="noopener">iOS 核心动画高级技巧</a></li>
<li><a href="http://kittenyang.com/cadisplaylinkanduibezierpath/" target="_blank" rel="noopener">CADisplayLink 结合 UIBezierPath的神奇妙用</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - MD5加密/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - MD5加密/" itemprop="url">
                  iOS开发之 - MD5加密
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>MD5（消息摘要算法第五版）是计算机安全领域广泛使用的一种散列函数，用以提供消息的完整性保护。</p>
</blockquote>
<ul>
<li><p>MD5特点：<br>1、压缩性：任意长度的数据，算出的MD5值长度都是固定的。<br>2、容易计算：从原数据计算出MD5值很容易。<br>3、抗修改性：对原数据进行任何改动，哪怕只修改1个字节，所得到的MD5值都有很大区别。<br>4、强抗碰撞：已知原数据和其MD5值，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。</p>
</li>
<li><p>事先介绍一个概念，因为下边有用到👇<br>加盐：所谓加盐， 就是在原本需要加密的信息基础上，糅入其它内容salt。</p>
</li>
<li><p>接下来是一些代码的实现，方便起见，这里创建了一个分类NSString+MD5。</p>
</li>
</ul>
<p>分类 NSString+MD5.h 中的代码如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSString</span> (<span class="title">MD5</span>)</span></span><br><span class="line"><span class="comment">/** 直接加密 */</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_32BIT;</span><br><span class="line"><span class="comment">/** 加盐 */</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_saltStr:(<span class="built_in">NSString</span> *)saltStr;</span><br><span class="line"><span class="comment">/** 多次加密 */</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_againStr:(<span class="built_in">NSString</span> *)againStr;</span><br><span class="line"><span class="comment">/** 乱序加密 */</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_Chaos:(<span class="built_in">NSString</span> *)chaosStr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>这里是分类 NSString+MD5.m 中的代码，需要导入头文件 #import &lt;CommonCrypto/CommonDigest.h&gt;：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"NSString+MD5.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;CommonCrypto/CommonDigest.h&gt;</span></span></span><br><span class="line"><span class="meta">#define salt @<span class="meta-string">"qwertyuiop"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSString</span> (<span class="title">MD5</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接加密</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_32BIT &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *cStr = [<span class="keyword">self</span> UTF8String];</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> digest[CC_MD5_DIGEST_LENGTH];</span><br><span class="line"></span><br><span class="line">CC_MD5( cStr, (CC_LONG)<span class="keyword">self</span>.length, digest );</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableString</span> *result = [<span class="built_in">NSMutableString</span> stringWithCapacity:CC_MD5_DIGEST_LENGTH * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; CC_MD5_DIGEST_LENGTH; i++)</span><br><span class="line">[result appendFormat:<span class="string">@"%02X"</span>, digest[i]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加盐</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_saltStr:(<span class="built_in">NSString</span> *)saltStr &#123;</span><br><span class="line"></span><br><span class="line">saltStr = [saltStr stringByAppendingString:salt];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *result =[saltStr MD5_32BIT];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多次加密</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_againStr:(<span class="built_in">NSString</span> *)againStr &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *result = [againStr MD5_32BIT];</span><br><span class="line"></span><br><span class="line">result = [result MD5_32BIT];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 乱序加密</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)MD5_Chaos:(<span class="built_in">NSString</span> *)chaosStr &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *result =[chaosStr MD5_32BIT];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *header =[result substringFromIndex:<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *footer=[result substringFromIndex:<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">result =[footer stringByAppendingString:header];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>接着在控制器中调用：<br><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">import</span> <span class="string">"ViewController.h"</span></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"NSString+MD5.h"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@implementation</span> ViewController</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">NSString *<span class="built_in">string</span> = @<span class="string">"10.24"</span>;</span><br><span class="line"><span class="comment">// 调用 MD5 加密并打印结果</span></span><br><span class="line">NSLog(@<span class="string">"MD5Result = %@"</span>, [<span class="built_in">string</span> MD5_32BIT]);</span><br><span class="line">NSLog(@<span class="string">"MD5_saltResult = %@"</span>, [<span class="built_in">string</span> MD5_saltStr:<span class="built_in">string</span>]);</span><br><span class="line">NSLog(@<span class="string">"MD5_againResult = %@"</span>, [<span class="built_in">string</span> MD5_againStr:<span class="built_in">string</span>]);</span><br><span class="line">NSLog(@<span class="string">"chaosResult = %@"</span>, [<span class="built_in">string</span> MD5_Chaos:<span class="built_in">string</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里是打印结果：<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2016-10-26</span> <span class="number">08</span>:<span class="number">15:49.616</span> md<span class="number">5[92278</span>:<span class="number">6185546</span>] MD5Result = F7F942B87C2D0B62FC27AD465CF0D05B</span><br><span class="line"><span class="number">2016-10-26</span> <span class="number">08</span>:<span class="number">15:49.616</span> md<span class="number">5[92278</span>:<span class="number">6185546</span>] MD5_saltResult = <span class="number">1</span>C2140C07ADD1E334896D499E8C4968C</span><br><span class="line"><span class="number">2016-10-26</span> <span class="number">08</span>:<span class="number">15:49.617</span> md<span class="number">5[92278</span>:<span class="number">6185546</span>] MD5_againResult = <span class="number">01</span>AE5309B5A8E672AE4D427FE987E06A</span><br><span class="line"><span class="number">2016-10-26</span> <span class="number">08</span>:<span class="number">15:49.617</span> md<span class="number">5[92278</span>:<span class="number">6185546</span>] chaosResult = F942B87C2D0B62FC27AD465CF0D05BF942B87C2D0B62FC27AD465CF0D05B</span><br></pre></td></tr></table></figure></p>
<hr>
<p>总结：大家应该都知道有一个MD5破解网站，名字叫做 <a href="http://www.cmd5.com" target="_blank" rel="noopener">md5在线解密加密</a>，因此我们在使用MD5加密的时候，最好使用多次加密，加盐，乱序加密等，不然会很容易被破解。至于其它加密，等以后用到了会继续整理出来，如果文章有什么不足之处，还请朋友们能过指出来，谢谢大家！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发 - 圆形验证码(或密码)输入框的封装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发 - 圆形验证码(或密码)输入框的封装/" itemprop="url">
                  iOS开发 - 圆形验证码(或密码)输入框的封装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>项目中用到了圆形验证码输入框，输入框之间要求有一定的距离，UI图如下：</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-7b41dd80189fc084.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="UI图"></p>
<ul>
<li>上面的UI图主要有以下几个要求：</li>
<li>输入框为圆形</li>
<li>输入框之间有适当距离</li>
<li>输入框颜色在输入文本时有变化</li>
</ul>
<p>刚开始想着用固定的几个 UITextField 实现，但转念一想，用 UITextField 实现有点麻烦（输入框多的话，它们之间的响应事件不太容易控制，需要来回变换），于是开始想其它办法，最后用了以下的思路：</p>
<ul>
<li>创建一个 UITextField，用  UILabel 显示 UITextField 上输入的数字，需要监听文本的输入，同时对 UILabel 进行一些操作，再用 block 将输入的文本传出来。</li>
</ul>
<h5 id="封装的圆形输入框主要实现了以下功能：输入框的数量、距离、颜色、大小等都可以自行设定，用起来也很方便，只需以下几行代码即可："><a href="#封装的圆形输入框主要实现了以下功能：输入框的数量、距离、颜色、大小等都可以自行设定，用起来也很方便，只需以下几行代码即可：" class="headerlink" title="封装的圆形输入框主要实现了以下功能：输入框的数量、距离、颜色、大小等都可以自行设定，用起来也很方便，只需以下几行代码即可："></a>封装的圆形输入框主要实现了以下功能：输入框的数量、距离、颜色、大小等都可以自行设定，用起来也很方便，只需以下几行代码即可：</h5><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NNValidationCodeView *view = [[NNValidationCodeView alloc] initWithFrame:CGRectMake(<span class="number">80</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">45</span>) <span class="keyword">andLabelCount:4 </span><span class="keyword">andLabelDistance:10];</span></span><br><span class="line"><span class="keyword">[self.view </span><span class="keyword">addSubview:view];</span></span><br><span class="line"><span class="keyword">view.changedColor </span>= [UIColor yellowColor]<span class="comment">;</span></span><br><span class="line">view.codeBlock = ^(NSString *codeString) &#123;</span><br><span class="line">NSLog(@<span class="string">"验证码:%@"</span>, codeString)<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>这是 demo 的效果图：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-a1ab2114dbc942f9.gif?imageMogr2/auto-orient/strip" alt="效果图1"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-7d2566ca5c78135b.gif?imageMogr2/auto-orient/strip" alt="效果图2"></p>
<p>由于代码很容易看懂，另外代码中也写了注释，因此这里不再对项目做过多的陈述，这是 <a href="https://github.com/liuzhongning/NNValidationCodeView" target="_blank" rel="noopener">demo地址</a>，需要的话可以拿去借鉴，<strong>有什么不足之处希望能留下宝贵意见或建议！</strong></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - AFNetworking - 上传、下载、网络监听/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - AFNetworking - 上传、下载、网络监听/" itemprop="url">
                  iOS开发之 - AFNetworking - 上传、下载、网络监听
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这一篇是接着上一篇总结的，如果有朋友需要了解网络请求的内容，可以<a href="http://www.jianshu.com/p/d23f4f913af1" target="_blank" rel="noopener">到这里</a>。和上篇一样，先说下这篇文章的大概内容，以便朋友们能够快速找到自己需要的。这篇文章主要介绍了 AFNetworking 的三个很广泛的应用：上传、下载以及网络监听。如果有朋友想了解苹果自带的 NSURLSession 相关的上传与下载，可以<a href="http://www.jianshu.com/p/be94889824d9" target="_blank" rel="noopener">到这里</a>。接下来是使用 AFNetworking 上传、下载以及网络监听的 demo.</p>
<h2 id="一、上传："><a href="#一、上传：" class="headerlink" title="一、上传："></a>一、上传：</h2><p>这里介绍了 AFN 的两种上传方式：</p>
<p>1.通过工程中的文件上传<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建管理者对象</span></span><br><span class="line">AFHTTPSessionManager *sessionManager = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求参数</span></span><br><span class="line"><span class="built_in">NSString</span> *urlStr = <span class="string">@" "</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSDictionary</span> *dic = @&#123;<span class="string">@" "</span> : <span class="string">@" "</span>,<span class="string">@" "</span> : <span class="string">@" "</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送 post 请求，上传一张图片</span></span><br><span class="line">[sessionManager POST:urlStr parameters:dic constructingBodyWithBlock:^(<span class="keyword">id</span>&lt;AFMultipartFormData&gt;  _Nonnull formData) &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *filePath = [[<span class="built_in">NSBundle</span> mainBundle] pathForResource:<span class="string">@"a.jpg"</span> ofType:<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSData</span> *imgData = [<span class="built_in">NSData</span> dataWithContentsOfFile:filePath];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将图片数据拼接，进行上传</span></span><br><span class="line">[formData appendPartWithFileData:imgData name:<span class="string">@"pic"</span> fileName:<span class="string">@"filename"</span> mimeType:<span class="string">@"image/jpg"</span>];</span><br><span class="line"></span><br><span class="line">&#125; progress:^(<span class="built_in">NSProgress</span> * _Nonnull uploadProgress) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取上传的进度</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%.2f"</span>,uploadProgress.fractionCompleted);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="built_in">NSThread</span> currentThread]); <span class="comment">//子线程</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125; success:^(<span class="built_in">NSURLSessionDataTask</span> * _Nonnull task, <span class="keyword">id</span>  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求成功</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功：%@"</span>,responseObject);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="built_in">NSThread</span> currentThread]); <span class="comment">//主线程</span></span><br><span class="line"></span><br><span class="line">&#125; failure:^(<span class="built_in">NSURLSessionDataTask</span> * _Nullable task, <span class="built_in">NSError</span> * _Nonnull error) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求失败</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败：%@"</span>,error);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>2.根据URL路径上传<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建管理者对象</span></span><br><span class="line">AFHTTPSessionManager *sessionManager = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line">[sessionManager <span class="string">POST:</span>@<span class="string">" "</span> <span class="string">parameters:</span>@&#123;@<span class="string">" "</span> : @<span class="string">" "</span>&#125; <span class="string">constructingBodyWithBlock:</span>^(id&lt;AFMultipartFormData&gt; formData) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在block中设置需要上传的文件</span></span><br><span class="line">[formData <span class="string">appendPartWithFileURL:</span>[NSURL <span class="string">fileURLWithPath:</span>@<span class="string">"文件路径"</span>] <span class="string">name:</span>@<span class="string">"file"</span> <span class="string">error:</span>nil];</span><br><span class="line"></span><br><span class="line">&#125; <span class="string">success:</span>^(NSURLSessionDataTask *task, id responseObject) &#123;</span><br><span class="line"></span><br><span class="line">NSLog(@<span class="string">"成功：%@"</span>, responseObject);</span><br><span class="line"></span><br><span class="line">&#125; <span class="string">failure:</span>^(NSURLSessionDataTask *task, NSError *error) &#123;</span><br><span class="line">NSLog(@<span class="string">"失败：%@"</span>, error);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<h2 id="二、下载"><a href="#二、下载" class="headerlink" title="二、下载"></a>二、下载</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建管理者对象</span></span><br><span class="line">AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 确定请求的URL地址</span></span><br><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@" "</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建请求对象</span></span><br><span class="line"><span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:url];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载文件</span></span><br><span class="line"><span class="built_in">NSURLSessionDownloadTask</span> *task = [manager downloadTaskWithRequest:request progress:^(<span class="built_in">NSProgress</span> * _Nonnull downloadProgress) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// block会实时调用</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%.2f"</span>,downloadProgress.fractionCompleted);</span><br><span class="line"></span><br><span class="line">&#125; destination:^<span class="built_in">NSURL</span> * _Nonnull(<span class="built_in">NSURL</span> * _Nonnull targetPath, <span class="built_in">NSURLResponse</span> * _Nonnull response) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NSHomeDirectory()可以得到应用程序目录的路径</span></span><br><span class="line"><span class="comment">// 返回一个URL存储文件</span></span><br><span class="line"><span class="built_in">NSString</span> *filePath = [<span class="built_in">NSHomeDirectory</span>() stringByAppendingPathComponent:<span class="string">@"Documents/***.mp3"</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> fileURLWithPath:filePath];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> url;</span><br><span class="line"></span><br><span class="line">&#125; completionHandler:^(<span class="built_in">NSURLResponse</span> * _Nonnull response, <span class="built_in">NSURL</span> * _Nullable filePath, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载失败 ~~~ %@"</span>,error);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"下载成功"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始下载任务</span></span><br><span class="line">[task resume];</span><br></pre></td></tr></table></figure>
<h2 id="三、网络监听（监听手机网络的不同状态）"><a href="#三、网络监听（监听手机网络的不同状态）" class="headerlink" title="三、网络监听（监听手机网络的不同状态）"></a>三、网络监听（监听手机网络的不同状态）</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得网络监控的管理者</span></span><br><span class="line">AFNetworkReachabilityManager *manager = [AFNetworkReachabilityManager manager];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只要网络环境发生变化，就会调用此 block</span></span><br><span class="line">[manager <span class="string">setReachabilityStatusChangeBlock:</span>^(AFNetworkReachabilityStatus status) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 枚举里面的四个状态</span></span><br><span class="line"><span class="comment">AFNetworkReachabilityStatusUnknown          = -1,  未知</span></span><br><span class="line"><span class="comment">AFNetworkReachabilityStatusNotReachable     = 0,   不可用</span></span><br><span class="line"><span class="comment">AFNetworkReachabilityStatusReachableViaWWAN = 1,   手机自带网络</span></span><br><span class="line"><span class="comment">AFNetworkReachabilityStatusReachableViaWiFi = 2,   wifi</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (status) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">AFNetworkReachabilityStatusUnknown:</span></span><br><span class="line">NSLog(@<span class="string">"未知"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">AFNetworkReachabilityStatusNotReachable:</span></span><br><span class="line">NSLog(@<span class="string">"不可用"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">AFNetworkReachabilityStatusReachableViaWWAN:</span></span><br><span class="line">NSLog(@<span class="string">"手机自带网络"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">AFNetworkReachabilityStatusReachableViaWiFi:</span></span><br><span class="line">NSLog(@<span class="string">"Wifi"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">default:</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始监听</span></span><br><span class="line">[manager startMonitoring];</span><br></pre></td></tr></table></figure>
<p>这是今天做的一些关于 AFNetworking 的总结，如果有错误或疏忽的地方，希望大家能够指出！谢谢大家！！！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - DZNEmptyDataSet 空白页占位图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - DZNEmptyDataSet 空白页占位图/" itemprop="url">
                  iOS开发之 - DZNEmptyDataSet 空白页占位图
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>发现了一个很有用的第三方，<a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" rel="noopener">DZNEmptyDataSet</a>，用起来也极其方便，这里给大家分享下！先说下其用途：<code>DZNEmptyDataSet</code> 主要用于 <code>UITableView</code> 以及 <code>UICollectionView</code> 页面空白时展示（据说也可以用于 <code>UIScrollView</code>， 有兴趣的童鞋可以试试）。开发中之所以用占位图，是为了提高用户体验；而为什么选 <code>DZNEmptyDataSet</code> 而不自行设计占位图（做过占位图的童鞋应该会觉得做占位图并不难，但没有对比就没有伤害，你如果试用了 <code>DZNEmptyDataSet</code> ，就会顿悟自己做占位图是多么地繁琐）。坦白说，<code>DZNEmptyDataSet</code> 是一个为了让开发人员“变懒”的第三方（貌似每个第三方都是这样的“宗旨”），接下来我们就一起看下 <code>DZNEmptyDataSet</code> 吧！</p>
</blockquote>
<h3 id="一、先来认识一下-DZNEmptyDataSet"><a href="#一、先来认识一下-DZNEmptyDataSet" class="headerlink" title="一、先来认识一下 DZNEmptyDataSet"></a>一、先来认识一下 DZNEmptyDataSet</h3><ul>
<li>GitHub 地址：<a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" rel="noopener">DZNEmptyDataSet</a></li>
<li>DZNEmptyDataSet 效果图</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-a0171c63c0ebeaa1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DZNEmptyDataSet效果图1"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-9b7b23c881b34deb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DZNEmptyDataSet效果图2"></p>
<h3 id="二、用-DZNEmptyDataSet-实现占位图效果"><a href="#二、用-DZNEmptyDataSet-实现占位图效果" class="headerlink" title="二、用 DZNEmptyDataSet 实现占位图效果"></a>二、用 DZNEmptyDataSet 实现占位图效果</h3><p>不得不说，其使用方法极其简单，用 cocoapods 导入可以，直接拖进项目也行。。。接着~~~</p>
<ul>
<li>导入头文件</li>
</ul>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">import</span> <span class="string">"UIScrollView+EmptyDataSet.h"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>添加代理协议</li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> NNViewController ()<span class="variable">&lt;UITableViewDataSource, DZNEmptyDataSetSource, DZNEmptyDataSetDelegate&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>设置代理协议</li>
</ul>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_tableView = [[UITableView alloc] initWithFrame:CGRectMake(<span class="number">0</span>, <span class="number">0</span>, NNSCREENWIDTH, NNSCREENHEIGHT) style:UITableViewStylePlain];</span><br><span class="line">[<span class="literal">self</span>.view addSubview:<span class="literal">self</span>.<span class="built_in">table</span>View];</span><br><span class="line"></span><br><span class="line"><span class="literal">self</span>.<span class="built_in">table</span>View.dataSource = <span class="literal">self</span>;</span><br><span class="line"><span class="literal">self</span>.<span class="built_in">table</span>View.emptyDataSetSource = <span class="literal">self</span>;</span><br><span class="line"><span class="literal">self</span>.<span class="built_in">table</span>View.emptyDataSetDelegate = <span class="literal">self</span>;</span><br><span class="line"><span class="literal">self</span>.<span class="built_in">table</span>View.<span class="built_in">table</span>FooterView = [[UIView alloc] init];</span><br></pre></td></tr></table></figure>
<ul>
<li>设置空白页展示图片</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - DZNEmptyDataSetSource</span></span><br><span class="line"><span class="comment">// 返回图片</span></span><br><span class="line">- (<span class="built_in">UIImage</span> *)imageForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView&#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"Screenshot_Slack"</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这里简单的占位图已经做好了，是不是觉得 so 轻松 so easy！下面是效果图：<br><img src="http://upload-images.jianshu.io/upload_images/2665449-ec13c6b78895b11f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果图"></p>
<h3 id="三、接下来是-DZNEmptyDataSet-的其它使用方法"><a href="#三、接下来是-DZNEmptyDataSet-的其它使用方法" class="headerlink" title="三、接下来是 DZNEmptyDataSet 的其它使用方法"></a>三、接下来是 DZNEmptyDataSet 的其它使用方法</h3><p>DZNEmptyDataSet 框架扩展性极强，可以在占位图上添加图片、标题文字、详情文字等等一堆东西，总有一款适合你！下边是一些具体用法及效果图。</p>
<h4 id="3-1-添加标题文字"><a href="#3-1-添加标题文字" class="headerlink" title="3.1 添加标题文字"></a>3.1 添加标题文字</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回标题文字</span></span><br><span class="line">- (<span class="built_in">NSAttributedString</span> *)titleForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="built_in">NSString</span> *text = <span class="string">@"这是一张空白页"</span>;</span><br><span class="line"><span class="built_in">NSDictionary</span> *attribute = @&#123;<span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">18.0</span>f], <span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">UIColor</span> darkGrayColor]&#125;;</span><br><span class="line"><span class="keyword">return</span> [[<span class="built_in">NSAttributedString</span> alloc] initWithString:text attributes:attribute];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-8d76ca82b929405b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="返回标题文字"></p>
<h4 id="3-2-添加详情文字"><a href="#3-2-添加详情文字" class="headerlink" title="3.2 添加详情文字"></a>3.2 添加详情文字</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回详情文字</span></span><br><span class="line">- (<span class="built_in">NSAttributedString</span> *)descriptionForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123; <span class="built_in">NSString</span> *text = <span class="string">@"哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈"</span>;</span><br><span class="line"><span class="built_in">NSMutableParagraphStyle</span> *paragraph = [<span class="built_in">NSMutableParagraphStyle</span> new];</span><br><span class="line">paragraph.lineBreakMode = <span class="built_in">NSLineBreakByWordWrapping</span>;</span><br><span class="line">paragraph.alignment = <span class="built_in">NSTextAlignmentCenter</span>;</span><br><span class="line"><span class="built_in">NSDictionary</span> *attribute = @&#123;<span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">14.0</span>f], <span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">UIColor</span> lightGrayColor], <span class="built_in">NSParagraphStyleAttributeName</span>: paragraph&#125;;</span><br><span class="line"><span class="keyword">return</span> [[<span class="built_in">NSAttributedString</span> alloc] initWithString:text attributes:attribute];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-f0154c472bfe6c61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="详情文字"></p>
<h4 id="3-3-添加可以点击的按钮-上面带文字"><a href="#3-3-添加可以点击的按钮-上面带文字" class="headerlink" title="3.3 添加可以点击的按钮 上面带文字"></a>3.3 添加可以点击的按钮 上面带文字</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回可以点击的按钮 上面带文字</span></span><br><span class="line">- (<span class="built_in">NSAttributedString</span> *)buttonTitleForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView forState:(<span class="built_in">UIControlState</span>)state &#123;</span><br><span class="line"><span class="built_in">NSDictionary</span> *attribute = @&#123;<span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">17.0</span>f]&#125;;</span><br><span class="line"><span class="keyword">return</span> [[<span class="built_in">NSAttributedString</span> alloc] initWithString:<span class="string">@"哈喽"</span> attributes:attribute];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//#pragma mark - DZNEmptyDataSetDelegate</span></span><br><span class="line"><span class="comment">// 处理按钮的点击事件</span></span><br><span class="line">- (<span class="keyword">void</span>)emptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView didTapButton:(<span class="built_in">UIButton</span> *)button &#123;</span><br><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"https://www.baidu.com"</span>]];</span><br><span class="line"><span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:url]) &#123;</span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:url];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-d2ae69bb76fd8299.gif?imageMogr2/auto-orient/strip" alt="可以点击的按钮"></p>
<h4 id="3-4-空白区域点击事件"><a href="#3-4-空白区域点击事件" class="headerlink" title="3.4 空白区域点击事件"></a>3.4 空白区域点击事件</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 空白区域点击事件</span></span><br><span class="line">- (<span class="keyword">void</span>)<span class="string">emptyDataSet:</span>(UIScrollView *)scrollView <span class="string">didTapView:</span>(UIView *)view &#123;</span><br><span class="line">UIAlertView *alert = [[UIAlertView alloc] <span class="string">initWithTitle:</span>@<span class="string">"哈哈"</span> <span class="string">message:</span>@<span class="string">"最近咋样"</span> <span class="string">delegate:</span>nil <span class="string">cancelButtonTitle:</span>@<span class="string">"别点我"</span> <span class="string">otherButtonTitles:</span>@<span class="string">"点我干啥"</span>, nil];</span><br><span class="line">[alert show];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-bc977dd868779f9a.gif?imageMogr2/auto-orient/strip" alt="空白区域点击事件"></p>
<h4 id="3-5-改变标题文字与详情文字的距离"><a href="#3-5-改变标题文字与详情文字的距离" class="headerlink" title="3.5 改变标题文字与详情文字的距离"></a>3.5 改变标题文字与详情文字的距离</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题文字与详情文字的距离</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)spaceHeightForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-c7e36364da637b6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="标题文字与详情文字的距离"></p>
<h4 id="3-6-空白区域的颜色自定义"><a href="#3-6-空白区域的颜色自定义" class="headerlink" title="3.6 空白区域的颜色自定义"></a>3.6 空白区域的颜色自定义</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回空白区域的颜色自定义</span></span><br><span class="line">- (<span class="built_in">UIColor</span> *)backgroundColorForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIColor</span> cyanColor];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-e6e70559dd5033fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="空白区域的颜色自定义"></p>
<h4 id="3-7-标题文字与详情文字同时调整垂直偏移量"><a href="#3-7-标题文字与详情文字同时调整垂直偏移量" class="headerlink" title="3.7 标题文字与详情文字同时调整垂直偏移量"></a>3.7 标题文字与详情文字同时调整垂直偏移量</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标题文字与详情文字同时调整垂直偏移量</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)verticalOffsetForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-659f044350373024.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="标题文字与详情文字同时调整垂直偏移量"></p>
<h4 id="3-8-添加动画效果"><a href="#3-8-添加动画效果" class="headerlink" title="3.8 添加动画效果"></a>3.8 添加动画效果</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - DZNEmptyDataSetSource</span></span><br><span class="line"><span class="comment">// 返回图片</span></span><br><span class="line">- (<span class="built_in">UIImage</span> *)imageForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView&#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"icon_wwdc"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">CAAnimation</span> *)imageAnimationForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="built_in">CABasicAnimation</span> *animation = [<span class="built_in">CABasicAnimation</span> animationWithKeyPath: <span class="string">@"transform"</span>];</span><br><span class="line">animation.fromValue = [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DIdentity</span>];</span><br><span class="line">animation.toValue = [<span class="built_in">NSValue</span> valueWithCATransform3D:<span class="built_in">CATransform3DMakeRotation</span>(M_PI_2, <span class="number">0.0</span>, <span class="number">0.0</span>,   <span class="number">1.0</span>)];</span><br><span class="line">animation.duration = <span class="number">0.25</span>;</span><br><span class="line">animation.cumulative = <span class="literal">YES</span>;</span><br><span class="line">animation.repeatCount = MAXFLOAT;</span><br><span class="line"><span class="keyword">return</span> animation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - DZNEmptyDataSetDelegate</span></span><br><span class="line"><span class="comment">// 图片是否要动画效果，默认NO</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)emptyDataSetShouldAnimateImageView:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-8a61fbb540b61cfa.gif?imageMogr2/auto-orient/strip" alt="动画效果"></p>
<h4 id="3-9-其它方法"><a href="#3-9-其它方法" class="headerlink" title="3.9 其它方法"></a>3.9 其它方法</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - DZNEmptyDataSetSource</span></span><br><span class="line"><span class="comment">// 返回图片的 tintColor</span></span><br><span class="line">- (<span class="built_in">UIColor</span> *)imageTintColorForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIColor</span> yellowColor];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回可点击按钮的 image</span></span><br><span class="line">- (<span class="built_in">UIImage</span> *)buttonImageForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView forState:(<span class="built_in">UIControlState</span>)state &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"icon_wwdc"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回可点击按钮的 backgroundImage</span></span><br><span class="line">- (<span class="built_in">UIImage</span> *)buttonBackgroundImageForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView forState:(<span class="built_in">UIControlState</span>)state &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"icon_wwdc"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回自定义 view</span></span><br><span class="line">- (<span class="built_in">UIView</span> *)customViewForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - DZNEmptyDataSetDelegate</span></span><br><span class="line"><span class="comment">// 是否显示空白页，默认YES</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)emptyDataSetShouldDisplay:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 是否允许点击，默认YES</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)emptyDataSetShouldAllowTouch:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 是否允许滚动，默认NO</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)emptyDataSetShouldAllowScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 图片是否要动画效果，默认NO</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)emptyDataSetShouldAnimateImageView:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 空白页将要出现</span></span><br><span class="line">- (<span class="keyword">void</span>)emptyDataSetWillAppear:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 空白页已经出现</span></span><br><span class="line">- (<span class="keyword">void</span>)emptyDataSetDidAppear:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 空白页将要消失</span></span><br><span class="line">- (<span class="keyword">void</span>)emptyDataSetWillDisappear:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 空白页已经消失</span></span><br><span class="line">- (<span class="keyword">void</span>)emptyDataSetDidDisappear:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>——————华丽的分割线——————</p>
<p>小结：本小白只在 UITableView 上试用了 DZNEmptyDataSet 框架。。。公司要求年前再迭代一个版本，时间不太充裕因此没逐一去试。。。哪位大神如果试了 UICollectionView 或 UIScrollView 发现有问题，还请不吝赐教！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - AFNetworking - 网络请求/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - AFNetworking - 网络请求/" itemprop="url">
                  iOS开发之 - AFNetworking - 网络请求
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近一直很忙也没有时间写博客，今天正好有点空闲时间，所以就对 <a href="https://github.com/AFNetworking/AFNetworking/" target="_blank" rel="noopener">AFNetworking</a> 做了一些简单的总结，特地记录下来，以便遇到的朋友们看看！！！</p>
</blockquote>
<p>先说下这篇文章的大概内容，以便朋友们能够快速找到自己需要的。这篇文章主要介绍了三种网络请求的渠道，第一种是通过苹果自带的 NSURLSession 请求网络；第二种是通过 AFNetworking2.x 请求网络；最后一种是通过 AFNetworking3.0 请求网络。下边是这三种网络请求渠道的 demo.</p>
<h2 id="一、苹果自带的请求网络方法："><a href="#一、苹果自带的请求网络方法：" class="headerlink" title="一、苹果自带的请求网络方法："></a>一、苹果自带的请求网络方法：</h2><p>这里介绍了三种，GET 请求、POST 请求、代理方式请求。</p>
<p>1.GET 请求:<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得 NSURLSession 对象</span></span><br><span class="line"><span class="built_in">NSURLSession</span> *session =  [<span class="built_in">NSURLSession</span> sessionWithConfiguration:[<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration] delegate:<span class="literal">nil</span> delegateQueue:[<span class="built_in">NSOperationQueue</span> mainQueue]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建任务</span></span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> *dataTask = [session dataTaskWithRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@" "</span>]] completionHandler:^(<span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"data ~~~ %@ ~~~ response ~~~ %@ ~~~ error~~~ %@"</span>, data, response , error);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动任务</span></span><br><span class="line">[dataTask resume];</span><br></pre></td></tr></table></figure></p>
<p>2.POST 请求:<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得NSURLSession对象</span></span><br><span class="line"><span class="built_in">NSURLSession</span> *session = [<span class="built_in">NSURLSession</span> sharedSession];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建请求</span></span><br><span class="line"><span class="built_in">NSMutableURLRequest</span> *request = [<span class="built_in">NSMutableURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@" "</span>]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求方法</span></span><br><span class="line">request.HTTPMethod = <span class="string">@"POST"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求体</span></span><br><span class="line">request.HTTPBody = [<span class="string">@" "</span> dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建任务</span></span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> *task = [session dataTaskWithRequest:request completionHandler:^(<span class="built_in">NSData</span> *data, <span class="built_in">NSURLResponse</span> *response, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"data ~~~ %@ ~~~ response ~~~ %@ ~~~ error~~~ %@"</span>, data, response , error);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动任务</span></span><br><span class="line">[task resume];</span><br></pre></td></tr></table></figure></p>
<p>3.代理:NSURLSessionDataDelegate<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableURLRequest</span> *request = [<span class="built_in">NSMutableURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@" "</span>]];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSURLSession</span> *session = [<span class="built_in">NSURLSession</span> sessionWithConfiguration:[<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration] delegate:<span class="keyword">self</span> delegateQueue:[<span class="built_in">NSOperationQueue</span> mainQueue]];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果创建task时，有block，代理会失效</span></span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> *task = [session dataTaskWithRequest:request];</span><br><span class="line"></span><br><span class="line">[task resume];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - NSURLSessionDataDelegate</span></span><br><span class="line"><span class="meta">#pragma mark - 接收到响应头调用的协议方法</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session dataTask:(<span class="built_in">NSURLSessionDataTask</span> *)dataTask</span><br><span class="line">didReceiveResponse:(<span class="built_in">NSURLResponse</span> *)response</span><br><span class="line">completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSessionResponseDisposition</span> disposition))completionHandler &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSHTTPURLResponse</span> *httpRes = (<span class="built_in">NSHTTPURLResponse</span> *)response;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,httpRes.allHeaderFields);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过设置 completionHandler, Block 可以设置后面的响应体中的数据是否继续发送,默认是不发送</span></span><br><span class="line">completionHandler(<span class="built_in">NSURLSessionResponseAllow</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 数据请求完成后，调用的协议方法，data是响应体中的数据</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session dataTask:(<span class="built_in">NSURLSessionDataTask</span> *)dataTask</span><br><span class="line">didReceiveData:(<span class="built_in">NSData</span> *)data &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 不管请求成功还是失败，最终都会调用此方法</span></span><br><span class="line">- (<span class="keyword">void</span>)URLSession:(<span class="built_in">NSURLSession</span> *)session task:(<span class="built_in">NSURLSessionTask</span> *)task didCompleteWithError:(<span class="built_in">NSError</span> *)error &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="二、AFNetworking2-x"><a href="#二、AFNetworking2-x" class="headerlink" title="二、AFNetworking2.x"></a>二、AFNetworking2.x</h2><p>1.GET 请求<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AFHTTPRequestOperationManager *operationManager = [AFHTTPRequestOperationManager manager];</span><br><span class="line"></span><br><span class="line">[operationManager GET:<span class="string">@" "</span> parameters:<span class="literal">nil</span></span><br><span class="line">success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功"</span>);</span><br><span class="line">&#125; failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>2.POST 请求</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AFHTTPRequestOperationManager *operationManager = [AFHTTPRequestOperationManager manager];</span><br><span class="line"></span><br><span class="line">[operationManager POST:<span class="string">@" "</span> parameters:<span class="literal">nil</span></span><br><span class="line">success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功"</span>);</span><br><span class="line">&#125; failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h2 id="三、AFNetworking3-0"><a href="#三、AFNetworking3-0" class="headerlink" title="三、AFNetworking3.0"></a>三、AFNetworking3.0</h2><p>1.GET 请求</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">AFHTTPSessionManager *sessionManager = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析服务器返回的JSON数据</span></span><br><span class="line"><span class="comment">//        [AFJSONResponseSerializer serializer];</span></span><br><span class="line"><span class="comment">// 解析服务器返回的XML数据</span></span><br><span class="line"><span class="comment">//        [AFXMLParserResponseSerializer serializer];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1: 请求的网址</span></span><br><span class="line"><span class="comment">// 参数2: 参数</span></span><br><span class="line"><span class="comment">// 参数3: 当前的进度</span></span><br><span class="line"><span class="comment">// 参数4: 请求成功</span></span><br><span class="line"><span class="comment">// 参数5: 请求失败</span></span><br><span class="line">[sessionManager GET:<span class="string">@" "</span> parameters:<span class="literal">nil</span> progress:^(<span class="built_in">NSProgress</span> * _Nonnull downloadProgress) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"进度"</span>);</span><br><span class="line">&#125; success:^(<span class="built_in">NSURLSessionDataTask</span> * _Nonnull task, <span class="keyword">id</span>  _Nullable responseObject) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功"</span>);</span><br><span class="line">&#125; failure:^(<span class="built_in">NSURLSessionDataTask</span> * _Nullable task, <span class="built_in">NSError</span> * _Nonnull error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>2.POST 请求<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建管理者对象</span></span><br><span class="line">AFHTTPSessionManager *sessionManager = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求参数</span></span><br><span class="line"><span class="built_in">NSString</span> *urlStr = <span class="string">@" "</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要设置 body 体</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *dic = @&#123;<span class="string">@" "</span> : <span class="string">@" "</span>,<span class="string">@" "</span> : <span class="string">@" "</span>&#125;;</span><br><span class="line"></span><br><span class="line">[sessionManager POST:urlStr parameters:dic progress:^(<span class="built_in">NSProgress</span> * _Nonnull downloadProgress) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"进度"</span>);</span><br><span class="line">&#125; success:^(<span class="built_in">NSURLSessionDataTask</span> * _Nonnull task, <span class="keyword">id</span>  _Nullable responseObject) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求成功"</span>);</span><br><span class="line">&#125; failure:^(<span class="built_in">NSURLSessionDataTask</span> * _Nullable task, <span class="built_in">NSError</span> * _Nonnull error) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"请求失败"</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>上面的一些代码都是基础性代码，因此也没怎么做注释，如果有疑问的话可以私信交流…另外代码有什么问题的话也希望大家能够指出！谢谢大家！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - RunLoop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - RunLoop/" itemprop="url">
                  iOS开发之 - RunLoop
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://upload-images.jianshu.io/upload_images/2665449-4d7042ab55fbe301.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="RunLoop"></p>
<blockquote>
<p>以下是 RunLoop 相关的内容，前半部分是理论知识，后半部分是代码。。。</p>
</blockquote>
<h2 id="一、RunLoop-基础知识"><a href="#一、RunLoop-基础知识" class="headerlink" title="一、RunLoop 基础知识"></a>一、RunLoop 基础知识</h2><h3 id="1-1-RunLoop-简介"><a href="#1-1-RunLoop-简介" class="headerlink" title="1.1 RunLoop  简介"></a>1.1 RunLoop  简介</h3><p>一般来说，一个线程只能执行一个任务，执行完就会退出，如果我们需要一种机制，让线程能随时处理时间但并不退出，那么 RunLoop 就是这样的一个机制。Runloop是事件接收和分发机制的一个实现。所以它实际上是一个对象，这个对象管理了其需要处理的事件和消息。在iOS 系统中，有这样两个对象： NSRunLoop 和 CFRunLoopRef。 NSRunLoop 和 CFRunLoopRef都代表着 RunLoop 对象。</p>
<h3 id="1-2-RunLoop的基本作用"><a href="#1-2-RunLoop的基本作用" class="headerlink" title="1.2 RunLoop的基本作用"></a>1.2 RunLoop的基本作用</h3><p>(1)保持程序的持续运行；<br>(2)处理 App 中的各种事件(比如触摸事件、定时器事件、Selector 事件)；<br>(3)节省 CPU 资源, 提高程序性能。</p>
<h3 id="1-3-RunLoop的使用环境"><a href="#1-3-RunLoop的使用环境" class="headerlink" title="1.3 RunLoop的使用环境"></a>1.3 RunLoop的使用环境</h3><p>仅当在为你的程序创建辅助线程的时候，你才需要显示运行 RunLoop 。对于辅助线程，你需要判断一个 RunLoop 是否是必须的。如果是必须的，那么你要自己配置并启动它，你不需要再任何情况下都去启动一个线程的 RunLoop 。 RunLoop 在你要和线程有更多的交互时才需要，比如以下情况：<br>(1)使用端口或者自定义输入源来和其他线程通信；<br>(2)使用线程的定时器；<br>(3) Cocoa 中使用任何 performSelector 的方法；<br>(4)使线程周期性工作。</p>
<h3 id="1-4-RunLoop工作的特点"><a href="#1-4-RunLoop工作的特点" class="headerlink" title="1.4 RunLoop工作的特点:"></a>1.4 RunLoop工作的特点:</h3><p>(1)当有时间发生时, RunLoop 会根据具体的事件类型通知应用程序作出响应；<br>(2)当没有事件发生时, RunLoop 会进入休眠状态；<br>(3)当事件再次发生时, RunLoop 会被重新唤醒, 处理事件。</p>
<h3 id="1-5-runLoop的内部逻辑"><a href="#1-5-runLoop的内部逻辑" class="headerlink" title="1.5 runLoop的内部逻辑"></a>1.5 runLoop的内部逻辑</h3><p>runLoop其实是一个函数，其内部是一个 do-while 循环，当你调用CFRunLoop() 时，线程就会一直停留在这个循环中；直到超时或被手动停止，该函数才会返回。每次运行 runLoop，线程的 runLoop 会自动处理之前未处理的消息，并通知相关的观察者，具体的顺序如下：<br>(1)通知观察者 runLoop 已经启动；<br>(2)通知观察者处理将要开始的定时器；<br>(3)通知观察者处理即将启动的非基于端口的源；<br>(4)处理非基于端口的源；<br>(5)如果基于端口的源准备好并处于等待状态，立即启动进入步骤⑨；<br>(6)通知观察者线程即将进入休眠；<br>(7)线程处于休眠状态，直到下面的任意的一个事件发生：<br>A.某一时间到达基于端口的源；<br>B.定时器启动；<br>C.runLoop被外部手动唤醒；<br>(8)通知观察者线程刚被唤醒；<br>(9)处理接收到的事件，处理定时器并重启 runLoop，进入步骤2；<br>(10)通知观察者，即将退出 runLoop。</p>
<h3 id="1-6-RunLoop与线程的关系"><a href="#1-6-RunLoop与线程的关系" class="headerlink" title="1.6 RunLoop与线程的关系"></a>1.6 RunLoop与线程的关系</h3><p>(1)每条线程都有唯一的一个与之对应的 RunLoop 对象；<br>(2)主线程的 RunLoop 已经自动创建好了, 子线程的 RunLoop 需要手动创建；<br>(3) RunLoop在第一次获取时创建, 在线程结束时销毁；<br>(4)直线线程与圆形线程：直线线程执行的任务是一条直线；而圆形线程不断循环，直到通过某种方式截止，在 iOS 中，圆形线程就是通过 runLoop 实现的。</p>
<h3 id="1-7-RunLoop对象"><a href="#1-7-RunLoop对象" class="headerlink" title="1.7 RunLoop对象"></a>1.7 RunLoop对象</h3><p>(1) iOS中有2套 API 来访问和使用 RunLoop。<br>Foundation框架 : NSRunLoop；<br>Core Foundation框架: CFRunLoopRef。</p>
<p>(2) NSRunLoop 和 CFRunLoopRef 都代表着 RunLoop 对象 ,它们是等价的，可以互相转换；</p>
<p>(3) NSRunLoop 是基于 CFRunLoopRef 的一层 OC 包装，所以要了解 RunLoop 内部结构，需要多研究 CFRunLoopRef 层面的 API（Core Foundation层面）。</p>
<h3 id="1-8获得-RunLoop-对象"><a href="#1-8获得-RunLoop-对象" class="headerlink" title="1.8获得 RunLoop 对象"></a>1.8获得 RunLoop 对象</h3><p>苹果不允许直接创建RunLoop，它只提供了两个自动获取的函数。<br>(1) Foundation [NSRunLoop currentRunLoop]; //获得当前线程的 RunLoop 对象<br>[NSRunLoop mainRunLoop]; //获得主线程的 RunLoop 对象</p>
<p>(2) Core Foundation<br>CFRunLoopGetCurrent(); //获得当前线程的 RunLoop 对象<br>CFRunLoopGetMain(); //获得主线程的 RunLoop 对象</p>
<h3 id="1-9-相关类"><a href="#1-9-相关类" class="headerlink" title="1.9 相关类:"></a>1.9 相关类:</h3><p>Core Foundation中关于 RunLoop 的 5 个类 ,RunLoop 如果没有这些东西, 会直接退出。<br>(1) CFRunLoopRef<br>(2) CFRunLoopModeRef 该类并没有对外暴露；<br>(3) CFRunLoopSourceRef<br>(4) CFRunLoopTimerRef<br>(5) CFRunLoopObserverRef</p>
<h3 id="1-10-CFRunLoopSourceRef-事件源-输入源"><a href="#1-10-CFRunLoopSourceRef-事件源-输入源" class="headerlink" title="1.10 CFRunLoopSourceRef 事件源(输入源)"></a>1.10 CFRunLoopSourceRef 事件源(输入源)</h3><p>时间产生的地方，source 有两个版本：<br>(1) source0：只包含一个回调，它并不能主动触发事件，使用时，需先调用 CFRunLoopSourceSignal 将这个 source 标记为待处理，后调用 CFRunLoopWakeUp 来唤醒 runLoop，让其处理这个事件；<br>(2) source1：包含一个 mach_port 和一个回调，被用于通过内核和其他线程互发送消息，这种 source 能主动唤醒 runLoop 线程。</p>
<h3 id="1-11-CFRunLoopObserverRef"><a href="#1-11-CFRunLoopObserverRef" class="headerlink" title="1.11 CFRunLoopObserverRef"></a>1.11 CFRunLoopObserverRef</h3><p>CFRunLoopObserverRef是观察者,能够监听 RunLoop 的状态改变,当 RunLoop 的状态发生变化时，观察者就能通过回调接受到这个变化。可以观测的时间点有以下几个：</p>
<p>kCFRunLoopEntry = (1UL &lt;&lt; 0), // 即将进入 Loop</p>
<p>kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), //即将处理 Timer</p>
<p>kCFRunLoopBeforeSources = (1UL &lt;&lt; 2), //即将处理 Source</p>
<p>kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5), //即将进入休眠</p>
<p>kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), //刚从休眠中唤醒</p>
<p>kCFRunLoopExit = (1UL &lt;&lt; 7), //即将退出 Loop</p>
<h3 id="1-12-runLoop的模式"><a href="#1-12-runLoop的模式" class="headerlink" title="1.12 runLoop的模式"></a>1.12 runLoop的模式</h3><p>runLoop 中使用 mode 来指定时间在运行循环中的优先级，系统默认注册了 5 个Mode：<br>(1)NSDefaultRunLoopMode（kCFRunLoopDefaultMode）:默认Mode,通常主线程是在这个Mode下运行；</p>
<p>(2) UITrackingRunLoopMode:界面跟踪Mode,用于 ScrollView 追踪触摸滑动, 保证界面滑动时不受其他 Mode 影响；</p>
<p>(3) UIInitializationRunLoopMode:启动程序后的过渡 mode，启动完成后就不再使用；</p>
<p>(4) GSEventReceiveRunLoopMode:接受系统事件的内部 Mode,通常用不到；</p>
<p>(5)kCFRunLoopCommonModes（NSRunLoopCommonModes）: 这是一个占位用的 Mode ，作为标记 DefaultMode 和CommonMode 用。</p>
<h2 id="二、演示代码"><a href="#二、演示代码" class="headerlink" title="二、演示代码"></a>二、演示代码</h2><h3 id="演示代码一-常驻线程"><a href="#演示代码一-常驻线程" class="headerlink" title="演示代码一:常驻线程"></a>演示代码一:常驻线程</h3><p>控制器.m中的代码:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"><span class="keyword">self</span>.thread = [[NNThread alloc] initWithTarget:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(run) object:<span class="literal">nil</span>];</span><br><span class="line">[<span class="keyword">self</span>.thread start];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -常驻线程方式一</span></span><br><span class="line">- (<span class="keyword">void</span>)run &#123;</span><br><span class="line"><span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line"></span><br><span class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] addPort:[<span class="built_in">NSPort</span> port] forMode:<span class="built_in">NSDefaultRunLoopMode</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"-- run -- %@ --"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] run];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"--不会执行--"</span>); <span class="comment">// 不会执行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -常驻线程方式二</span></span><br><span class="line">- (<span class="keyword">void</span>)run1&#123;</span><br><span class="line"><span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] run];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"-- run1 -- %@ --"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -常驻线程方式三</span></span><br><span class="line">- (<span class="keyword">void</span>)run2&#123;</span><br><span class="line"><span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">[<span class="built_in">NSTimer</span> scheduledTimerWithTimeInterval:<span class="number">2.0</span> target:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(test) userInfo:<span class="literal">nil</span> repeats:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"-- run2 -- %@ --"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] run];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -在该线程中自定义事件</span></span><br><span class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span>&lt;<span class="built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="built_in">UIEvent</span> *)event&#123;</span><br><span class="line">[<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(test) onThread:<span class="keyword">self</span>.thread withObject:<span class="literal">nil</span> waitUntilDone:<span class="literal">NO</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)test &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"-- test -- %@ --"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>线程子类化:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NNThread.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NNThread</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -重写了 dealloc 方法,查看线程是否销毁</span></span><br><span class="line">- (<span class="keyword">void</span>)dealloc &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"线程 NNThread 被销毁"</span>); <span class="comment">// 不会打印</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="演示代码二-GCD-定时器"><a href="#演示代码二-GCD-定时器" class="headerlink" title="演示代码二: GCD 定时器:"></a>演示代码二: GCD 定时器:</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - GCD 的 timer</span></span><br><span class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span> *)touches withEvent:(<span class="built_in">UIEvent</span> *)event</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//获得队列</span></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_main_queue();</span><br><span class="line"><span class="comment">//创建一个定时器 (dispatch_source_t 本质还是个 OC 对象)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.timer =dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, <span class="number">0</span>, <span class="number">0</span>, queue);</span><br><span class="line"><span class="comment">// GCD的时间参数，一般是纳秒（1秒== 10的9次方纳秒）</span></span><br><span class="line">dispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">1.0</span> * <span class="built_in">NSEC_PER_SEC</span>));</span><br><span class="line">uint64_t interval = (uint64_t)(<span class="number">1.0</span> * <span class="built_in">NSEC_PER_SEC</span>);</span><br><span class="line">dispatch_source_set_timer(<span class="keyword">self</span>.timer, start, interval, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置回调</span></span><br><span class="line">dispatch_source_set_event_handler(<span class="keyword">self</span>.timer, ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"------ %@ ------"</span>, [<span class="built_in">NSThread</span> currentThread]);</span><br><span class="line">count++;</span><br><span class="line"><span class="keyword">if</span> (count == <span class="number">10</span>) &#123;</span><br><span class="line"><span class="comment">//取消定时器</span></span><br><span class="line">dispatch_cancel(<span class="keyword">self</span>.timer);</span><br><span class="line"><span class="keyword">self</span>.timer = <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//启动定时器</span></span><br><span class="line">dispatch_resume(<span class="keyword">self</span>.timer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="演示代码三-观察者"><a href="#演示代码三-观察者" class="headerlink" title="演示代码三:观察者"></a>演示代码三:观察者</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark -观察者</span></span><br><span class="line">-(<span class="keyword">void</span>)observerTest&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">CFRunLoopObserverRef是观察者, 能够监听 RunLoop 的状态改变,当 RunLoop 的状态发生变化时，观察者就能通过回调接受到这个变化。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">CFRunLoopObserverRef参数:</span></span><br><span class="line"><span class="comment">第一个参数:分配存储空间</span></span><br><span class="line"><span class="comment">第二个参数:监听状态</span></span><br><span class="line"><span class="comment">第三个参数:是否要持续监听</span></span><br><span class="line"><span class="comment">第四个参数:优先级</span></span><br><span class="line"><span class="comment">第五个参数:回调</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建observer</span></span><br><span class="line"><span class="built_in">CFRunLoopObserverRef</span> observer = <span class="built_in">CFRunLoopObserverCreateWithHandler</span>(<span class="built_in">CFAllocatorGetDefault</span>(), kCFRunLoopAllActivities, <span class="literal">YES</span>, <span class="number">0</span>, ^(<span class="built_in">CFRunLoopObserverRef</span> observer, <span class="built_in">CFRunLoopActivity</span> activity) &#123;</span><br><span class="line"><span class="keyword">switch</span> (activity) &#123;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopEntry:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"即将进入runloop"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopBeforeTimers:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"RunLoop即将处理 timer"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopBeforeSources:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"RunLoop即将处理Sources"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopBeforeWaiting:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"RunLoop即将进入休眠"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopAfterWaiting:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"RunLoop刚从休眠中唤醒"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> kCFRunLoopExit:</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"即将退出RunLoop "</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">RunLoop的模式</span></span><br><span class="line"><span class="comment">1.NSDefaultRunLoopMode（kCFRunLoopDefaultMode）:默认Mode,通常主线程是在这个Mode下运行</span></span><br><span class="line"><span class="comment">2.UITrackingRunLoopMode:界面跟踪 Mode, 用于 ScrollView 追踪触摸滑动, 保证界面滑动时不受其他 Mode 影响</span></span><br><span class="line"><span class="comment">3.UIInitializationRunLoopMode:启动程序后的过渡 mode，启动完成后就不再使用</span></span><br><span class="line"><span class="comment">4.GSEventReceiveRunLoopMode:接受系统事件的内部 Mode,通常用不到</span></span><br><span class="line"><span class="comment">5.kCFRunLoopCommonModes（NSRunLoopCommonModes）: 这是一个占位用的 Mode, 作为标记 DefaultMode 和 CommonMode 用</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">CFRunLoopAddObserver参数:</span></span><br><span class="line"><span class="comment">第一个参数:要监听哪个RunLoop</span></span><br><span class="line"><span class="comment">第二个参数:监听者</span></span><br><span class="line"><span class="comment">第三个参数:要监听RunLoop在哪种运行模式下的状态</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加观察者：监听RunLoop的状态</span></span><br><span class="line"><span class="built_in">CFRunLoopAddObserver</span>(<span class="built_in">CFRunLoopGetCurrent</span>(), observer, kCFRunLoopDefaultMode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放  Observer</span></span><br><span class="line"><span class="built_in">CFRelease</span>(observer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)timerTest</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//调用了 scheduledTimer 返回的定时器，已经自动被添加到当前 RunLoop 中，默认是 NSDefaultRunLoopMode</span></span><br><span class="line"><span class="built_in">NSTimer</span> *timer = [<span class="built_in">NSTimer</span> scheduledTimerWithTimeInterval:<span class="number">2.0</span> target:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(run) userInfo:<span class="literal">nil</span> repeats:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改模式</span></span><br><span class="line">[[<span class="built_in">NSRunLoop</span> currentRunLoop] addTimer:timer forMode:<span class="built_in">NSRunLoopCommonModes</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>end</em></p>
<hr>
<p><strong>结束语：RunLoop 的总结就到此为止了，以后如果想到或遇到新知识点，会再来补充！另外如果文章写的有什么错误，烦请各位能指出来！谢谢大家！</strong></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - Runtime/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - Runtime/" itemprop="url">
                  iOS开发之 - Runtime
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://upload-images.jianshu.io/upload_images/2665449-59759f8fb21bb6a9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="iOS开发之 - Runtime"></p>
<blockquote>
<p>想总结 Runtime 不是一天两天了，前几天利用空闲时间已经打好文稿，但觉得还有需要改进的地方，现在已经改过来了，这里贴出来与大家分享下（如果还有什么小问题，还望各位朋友指出来哈）! 下面我们就开始进入运行时 Runtime 的世界吧！</p>
</blockquote>
<h2 id="一、Runtime简介"><a href="#一、Runtime简介" class="headerlink" title="一、Runtime简介"></a>一、Runtime简介</h2><p>Runtime简称运行时，是系统在运行的时候的一些机制，其中最主要的是消息机制。它是一套比较底层的纯 C 语言 API, 属于一个 C 语言库，包含了很多底层的 C 语言 API。我们平时编写的 OC 代码，在程序运行过程时，其实最终都是转成了 Runtime 的 C 语言代码。如下所示:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// OC代码:</span></span><br><span class="line"><span class="selector-attr">[Person coding]</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//运行时 runtime 会将它转化成 C 语言的代码:</span></span><br><span class="line"><span class="selector-tag">objc_msgSend</span>(Person, <span class="variable">@selector</span>(coding));</span><br></pre></td></tr></table></figure>
<h2 id="二、相关函数"><a href="#二、相关函数" class="headerlink" title="二、相关函数"></a>二、相关函数</h2><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历某个类所有的成员变量</span></span><br><span class="line"><span class="keyword">class</span><span class="number">_</span>copyIvarList</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历某个类所有的方法</span></span><br><span class="line"><span class="keyword">class</span><span class="number">_</span>copyMethodList</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取指定名称的成员变量</span></span><br><span class="line"><span class="keyword">class</span><span class="number">_</span>getInstanceVariable</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取成员变量名</span></span><br><span class="line">ivar<span class="number">_</span>getName</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取成员变量类型编码</span></span><br><span class="line">ivar<span class="number">_</span>getTypeEncoding</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取某个对象成员变量的值</span></span><br><span class="line"><span class="keyword">object</span><span class="number">_</span>getIvar</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置某个对象成员变量的值</span></span><br><span class="line"><span class="keyword">object</span><span class="number">_</span>setIvar</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给对象发送消息</span></span><br><span class="line">objc<span class="number">_m</span>sgSend</span><br></pre></td></tr></table></figure>
<h2 id="三、相关应用"><a href="#三、相关应用" class="headerlink" title="三、相关应用"></a>三、相关应用</h2><ul>
<li>1.利用Runtime遍历模型对象的所有属性</li>
<li>2.归档与解档</li>
<li>3.字典模型互转(利用 Runtime 遍历模型对象的所有属性, 根据属性名从字典中取出对的值,设置到模型的属性上)</li>
<li>4.动态添加/修改属性、动态添加/修改/替换方法(修改Person的身高体重等；替换 coding 方法为 eating 等)</li>
</ul>
<h2 id="四、演示代码"><a href="#四、演示代码" class="headerlink" title="四、演示代码"></a>四、演示代码</h2><h3 id="演示代码一：遍历对象的属性"><a href="#演示代码一：遍历对象的属性" class="headerlink" title="演示代码一：遍历对象的属性"></a>演示代码一：遍历对象的属性</h3><p>新建一个Person类，继承自NSObject，在.h文件中设置它的属性如下</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NNPerson</span> : <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"><span class="built_in">NSString</span> * _str1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> * str2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *str3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSDictionary</span> * dict;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSArray</span> *ary;</span><br></pre></td></tr></table></figure>
<p>在 ViewController 中获取它的属性，代码如下</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NNPerson.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 NNModel 中所有的变量并且输出变量名及类型</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">Ivar * ivars = class_copyIvarList([NNPerson <span class="keyword">class</span>], &amp;count);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">Ivar ivar = ivars[i];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"类型: %s -名字: %s "</span>, ivar_getTypeEncoding(ivar), ivar_getName(ivar));</span><br><span class="line">&#125;</span><br><span class="line">free(ivars);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="演示代码二：归档解档"><a href="#演示代码二：归档解档" class="headerlink" title="演示代码二：归档解档"></a>演示代码二：归档解档</h3><p>新建一个类，继承自 NSObject 。.m中的代码如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark -归档</span></span><br><span class="line">- (<span class="keyword">void</span>)encodeWithCoder:(<span class="built_in">NSCoder</span> *)aCoder &#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//获取类中所有属性</span></span><br><span class="line">Ivar *vars = class_copyIvarList([<span class="keyword">self</span> <span class="keyword">class</span>], &amp;count);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">Ivar var = vars[i];</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *name = ivar_getName(var);</span><br><span class="line"><span class="built_in">NSString</span> *key = [<span class="built_in">NSString</span> stringWithUTF8String:name];</span><br><span class="line"><span class="comment">//利用 KVC 进行取值，根据属性名称获取对应的值</span></span><br><span class="line"><span class="keyword">id</span> value = [<span class="keyword">self</span> valueForKey:key];</span><br><span class="line">[aCoder encodeObject:value forKey:key];</span><br><span class="line">&#125;</span><br><span class="line">free(vars);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -解档</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)initWithCoder:(<span class="built_in">NSCoder</span> *)aDecoder &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//获取类中所有属性</span></span><br><span class="line">Ivar *vars = class_copyIvarList([<span class="keyword">self</span> <span class="keyword">class</span>], &amp;count);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">Ivar var = vars[i];</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *name = ivar_getName(var);</span><br><span class="line"><span class="built_in">NSString</span> *key = [<span class="built_in">NSString</span> stringWithUTF8String:name];</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行解档取值</span></span><br><span class="line"><span class="keyword">id</span> value = [aDecoder decodeObjectForKey:key];</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用 KVC 对属性赋值</span></span><br><span class="line">[<span class="keyword">self</span> setValue:value forKey:key];</span><br><span class="line">&#125;</span><br><span class="line">free(vars);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ViewController中的代码：<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">LZNArchive *archive = [LZNArchive objectWithKeyValues:<span class="keyword">self</span>.Mydictionary];</span><br><span class="line"><span class="built_in">NSString</span> *path = <span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSDocumentDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>).lastObject;</span><br><span class="line">path = [path stringByAppendingPathComponent:<span class="string">@"hello"</span>];</span><br><span class="line">[<span class="built_in">NSKeyedArchiver</span> archiveRootObject:archive toFile:path];</span><br><span class="line">LZNArchive *m = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithFile:path];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="演示代码三：字典与模型互转"><a href="#演示代码三：字典与模型互转" class="headerlink" title="演示代码三：字典与模型互转"></a>演示代码三：字典与模型互转</h3><p>首先应导入一个 plist 文件，将文件中的内容读取到字典中；然后新建一个分类如: NSObject+KeyValues<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark -字典转模型</span></span><br><span class="line"></span><br><span class="line">+(<span class="keyword">instancetype</span>)objectWithDict:(<span class="built_in">NSDictionary</span> *)dict &#123;</span><br><span class="line"><span class="keyword">id</span> objc = [[<span class="keyword">self</span> alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历字典中的属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *key <span class="keyword">in</span> dict.allKeys) &#123;</span><br><span class="line"><span class="keyword">id</span> value = dict[key];</span><br><span class="line">objc_property_t property = class_getProperty(<span class="keyword">self</span>, key.UTF8String);</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">objc_property_attribute_t *attributeList = property_copyAttributeList(property, &amp;count);</span><br><span class="line">objc_property_attribute_t attribute = attributeList[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">NSString</span> *string = [<span class="built_in">NSString</span> stringWithUTF8String:attribute.value];</span><br><span class="line"><span class="keyword">if</span> ([string isEqualToString:<span class="string">@"@\"LZNArchive\""</span>]) &#123;</span><br><span class="line">value = [<span class="keyword">self</span> objectWithDict:value];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成 setter 方法，并用 objc_msgSend 调用</span></span><br><span class="line"><span class="built_in">NSString</span> *methodName = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"set%@%@:"</span>,[key substringToIndex:<span class="number">1</span>].uppercaseString,[key substringFromIndex:<span class="number">1</span>]];</span><br><span class="line">SEL <span class="keyword">setter</span> = sel_registerName(methodName.UTF8String);</span><br><span class="line"><span class="keyword">if</span> ([objc respondsToSelector:<span class="keyword">setter</span>]) &#123;</span><br><span class="line">((<span class="keyword">void</span> (*) (<span class="keyword">id</span>,SEL,<span class="keyword">id</span>)) objc_msgSend) (objc,<span class="keyword">setter</span>,value);</span><br><span class="line">&#125;</span><br><span class="line">free(attributeList);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> objc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -模型转字典</span></span><br><span class="line">-(<span class="built_in">NSDictionary</span> *)keyValuesWithObject &#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">objc_property_t *propertyList = class_copyPropertyList([<span class="keyword">self</span> <span class="keyword">class</span>], &amp;count);</span><br><span class="line"><span class="built_in">NSMutableDictionary</span> *dict = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历模型中属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">objc_property_t property = propertyList[i];</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成 getter 方法，并用 objc_msgSend 调用</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *propertyName = property_getName(property);</span><br><span class="line">SEL <span class="keyword">getter</span> = sel_registerName(propertyName);</span><br><span class="line"><span class="keyword">if</span> ([<span class="keyword">self</span> respondsToSelector:<span class="keyword">getter</span>]) &#123;</span><br><span class="line"><span class="keyword">id</span> value = ((<span class="keyword">id</span> (*) (<span class="keyword">id</span>,SEL)) objc_msgSend) (<span class="keyword">self</span>,<span class="keyword">getter</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断当前属性</span></span><br><span class="line"><span class="keyword">if</span> ([value isKindOfClass:[<span class="keyword">self</span> <span class="keyword">class</span>]] &amp;&amp; value) &#123;</span><br><span class="line">value = [value keyValuesWithObject];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (value) &#123;</span><br><span class="line"><span class="built_in">NSString</span> *key = [<span class="built_in">NSString</span> stringWithUTF8String:propertyName];</span><br><span class="line">[dict setObject:value forKey:key];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">free(propertyList);</span><br><span class="line"><span class="keyword">return</span> dict;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="演示代码四：objc-msgSend-消息传递"><a href="#演示代码四：objc-msgSend-消息传递" class="headerlink" title="演示代码四：objc_msgSend 消息传递"></a>演示代码四：objc_msgSend 消息传递</h3><p>新建一个类，继承自NSObject，.m中的代码如下:<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)sayHello &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Hello!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)showName:(<span class="built_in">NSString</span> *)name &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"My name is %@"</span>,name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)showAge:(<span class="built_in">NSInteger</span>)age &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"My age is %ld"</span>, age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">float</span>)showHeight&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">180.0</span>f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="built_in">NSString</span> *)showInformation &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">@"Nice to meet you!"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ViewController中的代码:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LZN_msgSend *msgSend = [[LZN_msgSend alloc] init];</span><br><span class="line">((<span class="keyword">void</span> (*) (<span class="keyword">id</span>, SEL)) objc_msgSend) (msgSend, sel_registerName(<span class="string">"sayHello"</span>));</span><br><span class="line"></span><br><span class="line">((<span class="keyword">void</span> (*) (<span class="keyword">id</span>, SEL, <span class="built_in">NSString</span> *)) objc_msgSend) (msgSend, sel_registerName(<span class="string">"showName:"</span>), <span class="string">@"Liu Zhong Ning"</span>);</span><br><span class="line"></span><br><span class="line">((<span class="keyword">void</span> (*) (<span class="keyword">id</span>, SEL, <span class="built_in">NSInteger</span>)) objc_msgSend) (msgSend, sel_registerName(<span class="string">"showAge:"</span>), <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> f = ((<span class="keyword">float</span> (*) (<span class="keyword">id</span>, SEL)) objc_msgSend_fpret) (msgSend, sel_registerName(<span class="string">"showHeight"</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"and height is %.2fcm"</span>,f);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *information = ((<span class="built_in">NSString</span>* (*) (<span class="keyword">id</span>, SEL)) objc_msgSend) (msgSend, sel_registerName(<span class="string">"showInformation"</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,information);</span><br></pre></td></tr></table></figure></p>
<p><em>the end</em></p>
<hr>
<p><strong>结束语：Runtime 相关的知识就整理了这么些，希望对看到的朋友们有用！另外如果 demo 有什么问题，还烦请大家告知，一起进步！谢谢O(∩_∩)O~! 另祝大家周末愉快哈！</strong></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/ 前端笔记 - HTML 特殊标签实现文字滚动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/ 前端笔记 - HTML 特殊标签实现文字滚动/" itemprop="url">
                  前端笔记 - HTML 特殊标签实现文字滚动
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>想用 HTML 做个文字滚动效果，可以用特殊标签 marquee 实现，当然也可以用 JS 实现， 今天试了下用特殊标签 marquee 实现文字滚动。先声明下本人从事于 iOS 开发，之前零零星星的学过 HTML ，但目前尚处于小白阶段😂，因此文章如果有不当之处还请各位大神不吝指出！</p>
</blockquote>
<h3 id="先一起看下-marquee-标签存在哪些属性："><a href="#先一起看下-marquee-标签存在哪些属性：" class="headerlink" title="先一起看下 marquee 标签存在哪些属性："></a>先一起看下 marquee 标签存在哪些属性：</h3><ul>
<li>behavior：滚动方式，三种：scroll（循环滚动） slide（单次滚动）、alternate（来回滚动）</li>
<li>bgcolor：滚动文本框的背景颜色</li>
<li>direction：滚动方向，四种：left（从右到左）、right（从左到右）、up（从下到上）、down（从上到下）</li>
<li>scrolldelay：每轮滚动之间的延迟时间，数字越大滚动越慢</li>
<li>scrollamount：一次滚动总的时间量，数字越小滚动越慢</li>
<li>align：文字的对齐方式，三种： middle(居中)、bottom(居下)、top(居上)</li>
<li>width：滚动文本框的宽度</li>
<li>height：滚动文本框的高度</li>
<li>loop：滚动次数，默认为 infinite（无限）</li>
<li>hspace：水平方向的空白距离</li>
<li>vspace：垂直方向的空白距离</li>
</ul>
<h3 id="下面便是-marquee-属性的一些应用"><a href="#下面便是-marquee-属性的一些应用" class="headerlink" title="下面便是 marquee 属性的一些应用"></a>下面便是 marquee 属性的一些应用</h3><h4 id="一、滚动方式-behavior-：scroll（循环滚动）"><a href="#一、滚动方式-behavior-：scroll（循环滚动）" class="headerlink" title="一、滚动方式 behavior ：scroll（循环滚动）"></a>一、滚动方式 behavior ：scroll（循环滚动）</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"right"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-47605cbed1e7bf3a.gif?imageMogr2/auto-orient/strip" alt="循环滚动"></p>
<h4 id="二、滚动方式-behavior：alternate（来回滚动）"><a href="#二、滚动方式-behavior：alternate（来回滚动）" class="headerlink" title="二、滚动方式 behavior：alternate（来回滚动）"></a>二、滚动方式 behavior：alternate（来回滚动）</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"right"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"alternate"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-2ef9e8f7f7097a05.gif?imageMogr2/auto-orient/strip" alt="来回滚动"></p>
<h3 id="三、滚动方向-direction：up（从下到上）"><a href="#三、滚动方向-direction：up（从下到上）" class="headerlink" title="三、滚动方向 direction：up（从下到上）"></a>三、滚动方向 direction：up（从下到上）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"up"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-afc2adaff655f9b5.gif?imageMogr2/auto-orient/strip" alt="从下到上"></p>
<h3 id="四、滚动方向-direction：left（从右到左）"><a href="#四、滚动方向-direction：left（从右到左）" class="headerlink" title="四、滚动方向 direction：left（从右到左）"></a>四、滚动方向 direction：left（从右到左）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-59c59ad94d252736.gif?imageMogr2/auto-orient/strip" alt="从右到左"></p>
<h3 id="五、滚动速度（scrollamount）"><a href="#五、滚动速度（scrollamount）" class="headerlink" title="五、滚动速度（scrollamount）"></a>五、滚动速度（scrollamount）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrollamount</span>=<span class="string">"80px"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-8c084cd3ab2119e7.gif?imageMogr2/auto-orient/strip" alt="滚动速度"></p>
<h3 id="六、循环次数（loop）"><a href="#六、循环次数（loop）" class="headerlink" title="六、循环次数（loop）"></a>六、循环次数（loop）</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrollamount</span>=<span class="string">"80px"</span></span></span><br><span class="line"><span class="tag"><span class="attr">loop</span>=<span class="string">"5"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-1e7e0b115db0402f.gif?imageMogr2/auto-orient/strip" alt="循环次数"></p>
<h3 id="七、当鼠标停留在文字上，文字停止滚动"><a href="#七、当鼠标停留在文字上，文字停止滚动" class="headerlink" title="七、当鼠标停留在文字上，文字停止滚动"></a>七、当鼠标停留在文字上，文字停止滚动</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrollamount</span>=<span class="string">"80px"</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseover</span>=<span class="string">stop()</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseout</span>=<span class="string">start()</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">金风玉露一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-a9a929dcfc80b834.gif?imageMogr2/auto-orient/strip" alt="当鼠标停留在文字上，文字停止滚动"></p>
<h3 id="八、给滚动字幕加超链接"><a href="#八、给滚动字幕加超链接" class="headerlink" title="八、给滚动字幕加超链接"></a>八、给滚动字幕加超链接</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrollamount</span>=<span class="string">"80px"</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseover</span>=<span class="string">stop()</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseout</span>=<span class="string">start()</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">#</span>&gt;</span>金风玉露<span class="tag">&lt;/<span class="name">a</span>&gt;</span>一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-5668ad5af1df16db.gif?imageMogr2/auto-orient/strip" alt="给滚动字幕加超链接"></p>
<h3 id="九、综合其它属性"><a href="#九、综合其它属性" class="headerlink" title="九、综合其它属性"></a>九、综合其它属性</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">direction</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag"><span class="attr">behavior</span>=<span class="string">"scroll"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrollamount</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag"><span class="attr">scrolldelay</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag"><span class="attr">loop</span>=<span class="string">"-1"</span></span></span><br><span class="line"><span class="tag"><span class="attr">width</span>=<span class="string">"500"</span></span></span><br><span class="line"><span class="tag"><span class="attr">height</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag"><span class="attr">bgcolor</span>=<span class="string">"#FFCCFF"</span></span></span><br><span class="line"><span class="tag"><span class="attr">hspace</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag"><span class="attr">vspace</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseover</span>=<span class="string">this.stop()</span></span></span><br><span class="line"><span class="tag"><span class="attr">onmouseout</span>=<span class="string">start()</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">#</span>&gt;</span>金风玉露<span class="tag">&lt;/<span class="name">a</span>&gt;</span>一相逢, 便胜却人间无数.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">两情若是久长时, 又岂在朝朝暮暮.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-d8ef46a6806d1d63.gif?imageMogr2/auto-orient/strip" alt="综合其它属性"></p>
<p>小结：试了 HTML 实现文字滚动效果之后，发现比 iOS 简单方便许多，以后在工作之余会多学学前端知识，求大神带哈😀！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/15/iOS开发之 - WKWebView VS UIWebView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘朋坤">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="以梦为马">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/iOS开发之 - WKWebView VS UIWebView/" itemprop="url">
                  iOS开发之 - WKWebView VS UIWebView
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-15T12:30:20+08:00">2018-04-15</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>WKWebView是苹果在 iOS 8 中推出的新框架，相比UIWebView来说，WKWebView 性能好，速度快，内存小，功能多，且支持了更多的 HTML5 特性……因此本小白禁不住“诱惑”利用了一晚上的时间，整理了一些关于 WKWebView 的资料，与大家分享下！在说 WKWebView 之前，我们先说说他的老大哥 UIWebView ！！！</p>
</blockquote>
<p>UIWebView 是苹果在 iOS 2 之后推出的，由于资格比较“老”，大家对 UIWebView 应该也不会陌生，这里直接上代码：</p>
<h3 id="1-UIWebView-基本使用"><a href="#1-UIWebView-基本使用" class="headerlink" title="1.UIWebView 基本使用"></a>1.UIWebView 基本使用</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建webview</span></span><br><span class="line"><span class="built_in">UIWebView</span> *webView = [[<span class="built_in">UIWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">20</span>, NNWidth, NNHeight - <span class="number">20</span>)];</span><br><span class="line"><span class="comment">// 网络请求</span></span><br><span class="line"><span class="built_in">NSURLRequest</span> *request =[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://www.baidu.com"</span>]];</span><br><span class="line"><span class="comment">// 加载网页</span></span><br><span class="line">[webView loadRequest:request];</span><br><span class="line"><span class="comment">// 添加到界面</span></span><br><span class="line">[<span class="keyword">self</span>.view addSubview:webView];</span><br></pre></td></tr></table></figure>
<h3 id="2-UIWebView-常用方法"><a href="#2-UIWebView-常用方法" class="headerlink" title="2.UIWebView 常用方法"></a>2.UIWebView 常用方法</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">webView reload</span>]; <span class="comment">// 刷新</span></span><br><span class="line">[<span class="meta">webView stopLoading</span>]; <span class="comment">// 停止加载</span></span><br><span class="line">[<span class="meta">webView goBack</span>]; <span class="comment">// 后退</span></span><br><span class="line">[<span class="meta">webView goForward</span>]; <span class="comment">// 前进</span></span><br><span class="line">[<span class="meta">webView canGoBack</span>]; <span class="comment">// 是否可以后退</span></span><br><span class="line">[<span class="meta">webView canGoForward</span>]; <span class="comment">// 是否可以向前</span></span><br><span class="line">[<span class="meta">webView isLoading</span>]; <span class="comment">// 是否正在加载</span></span><br></pre></td></tr></table></figure>
<h3 id="3-UIWebView-相关代理协议"><a href="#3-UIWebView-相关代理协议" class="headerlink" title="3.UIWebView 相关代理协议"></a>3.UIWebView 相关代理协议</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UIWebViewDelegate</span></span><br><span class="line"><span class="comment">/// 是否允许加载网页</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)webView:(<span class="built_in">UIWebView</span> *)webView shouldStartLoadWithRequest:(<span class="built_in">NSURLRequest</span> *)request navigationType:(<span class="built_in">UIWebViewNavigationType</span>)navigationType &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"允许加载网页"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 开始加载网页时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)webViewDidStartLoad:(<span class="built_in">UIWebView</span> *)webView &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"开始加载网页"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/// 网页加载完成时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)webViewDidFinishLoad:(<span class="built_in">UIWebView</span> *)webView &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"网页加载完成"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 网页加载错误时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">UIWebView</span> *)webView didFailLoadWithError:(<span class="built_in">NSError</span> *)error &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"网页加载错误时调用"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="这里是-UIWebView-的效果图！！！"><a href="#这里是-UIWebView-的效果图！！！" class="headerlink" title="这里是 UIWebView 的效果图！！！"></a>这里是 UIWebView 的效果图！！！</h3><p><img src="http://upload-images.jianshu.io/upload_images/2665449-ab410b93f7c4d753.gif?imageMogr2/auto-orient/strip" alt="UIWebView加载网页"><br><img src="http://upload-images.jianshu.io/upload_images/2665449-14ead660659b5a2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代理方法输出的顺序"></p>
<h3 id="因为主要想与大家分享的是-WKWebView，所以对-UIWebView-的介绍就到此为止了。接下来的-WKWebView-才是今晚的主角！！！"><a href="#因为主要想与大家分享的是-WKWebView，所以对-UIWebView-的介绍就到此为止了。接下来的-WKWebView-才是今晚的主角！！！" class="headerlink" title="因为主要想与大家分享的是 WKWebView，所以对 UIWebView 的介绍就到此为止了。接下来的 WKWebView 才是今晚的主角！！！"></a>因为主要想与大家分享的是 WKWebView，所以对 UIWebView 的介绍就到此为止了。接下来的 WKWebView 才是今晚的主角！！！</h3><hr>
<p><strong>依然是先介绍 WKWebView 的基本使用</strong></p>
<h3 id="1-WKWebView-基本使用"><a href="#1-WKWebView-基本使用" class="headerlink" title="1. WKWebView 基本使用"></a>1. WKWebView 基本使用</h3><blockquote>
<p>这里加一个不用提示的提示：WKWebView 和 UIWebview 的基本使用方法相类似，但是需要导入头文件 #import &lt;WebKit/WebKit.h&gt;，其它步骤如下</p>
</blockquote>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建webview</span></span><br><span class="line"><span class="built_in">WKWebView</span> *webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">20</span>, NNWidth, NNHeight - <span class="number">20</span>)];</span><br><span class="line"><span class="comment">// 创建请求</span></span><br><span class="line"><span class="built_in">NSURLRequest</span> *request =[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://www.baidu.com"</span>]];</span><br><span class="line"><span class="comment">// 加载网页</span></span><br><span class="line">[webView loadRequest:request];</span><br><span class="line"><span class="comment">// 将webView添加到界面</span></span><br><span class="line">[<span class="keyword">self</span>.view addSubview:webView];</span><br></pre></td></tr></table></figure>
<p>ps:这里就不再补充效果图了，除了速度内存优于 UIWebView，显示的效果差不多。。。</p>
<h3 id="2-WKWebView-加载文件"><a href="#2-WKWebView-加载文件" class="headerlink" title="2. WKWebView 加载文件"></a>2. WKWebView 加载文件</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建webview</span></span><br><span class="line"><span class="built_in">WKWebView</span> *webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">20</span>, NNWidth, NNHeight - <span class="number">20</span>)];</span><br><span class="line"><span class="comment">// 创建url(可以随便从桌面拉张图片)</span></span><br><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> fileURLWithPath:<span class="string">@"/Users/ios/Desktop/图片/90416596477f347431a929dc73b9f404.jpg"</span>];</span><br><span class="line"><span class="comment">// 加载文件</span></span><br><span class="line">[webView loadFileURL:url allowingReadAccessToURL:url];</span><br><span class="line"><span class="comment">// 最后将webView添加到界面</span></span><br><span class="line">[<span class="keyword">self</span>.view addSubview:webView];</span><br></pre></td></tr></table></figure>
<h4 id="这里是加载文件效果图！"><a href="#这里是加载文件效果图！" class="headerlink" title="这里是加载文件效果图！"></a>这里是加载文件效果图！</h4><p><img src="http://upload-images.jianshu.io/upload_images/2665449-026af846596935f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="加载本地图片"></p>
<h3 id="3-WKWebView-与-JS-代码交互"><a href="#3-WKWebView-与-JS-代码交互" class="headerlink" title="3. WKWebView 与 JS 代码交互"></a>3. WKWebView 与 JS 代码交互</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片缩放的 JS 代码</span></span><br><span class="line"><span class="built_in">NSString</span> *JSImage = <span class="string">@"var count = document.images.length;for (var i = 0; i &lt; count; i++) &#123;var image = document.images[i];image.style.width=375;&#125;;window.alert('找到' + count + '张图');"</span>;</span><br><span class="line"><span class="comment">// 初始化 WKUserScript</span></span><br><span class="line"><span class="built_in">WKUserScript</span> *script = [[<span class="built_in">WKUserScript</span> alloc] initWithSource:JSImage injectionTime:<span class="built_in">WKUserScriptInjectionTimeAtDocumentEnd</span> forMainFrameOnly:<span class="literal">YES</span>];</span><br><span class="line"><span class="comment">// 初始化WKWebViewConfiguration</span></span><br><span class="line"><span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">[configuration.userContentController addUserScript:script];</span><br><span class="line">_webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="keyword">self</span>.view.bounds configuration:configuration];</span><br><span class="line"><span class="comment">// 这里需要从网上找到一张图片的地址</span></span><br><span class="line">[_webView loadHTMLString:<span class="string">@"&lt;head&gt;&lt;/head&gt;![](http://upload-images.jianshu.io/upload_images/2665449-f109bc70619e2a92.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)"</span>baseURL:<span class="literal">nil</span>];</span><br><span class="line">[<span class="keyword">self</span>.view addSubview:_webView];</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2665449-311830759271b58f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="与 JS 交互效果图"></p>
<h3 id="4-WKWebView-常用的代理协议"><a href="#4-WKWebView-常用的代理协议" class="headerlink" title="4. WKWebView 常用的代理协议"></a>4. WKWebView 常用的代理协议</h3><p><em>WKWebView 的代理方法还是蛮有趣的，大家可以试下哈！</em></p>
<h4 id="4-1-WKNavigationDelegate-协议"><a href="#4-1-WKNavigationDelegate-协议" class="headerlink" title="4.1 WKNavigationDelegate 协议"></a>4.1 WKNavigationDelegate 协议</h4><p>这里简单罗列了几个常用的方法。以下四个与 UIWebView 中的方法相同：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pragma</span> <span class="selector-tag">mark</span> <span class="selector-tag">-</span> <span class="selector-tag">WKNavigationDelegate</span></span><br><span class="line"><span class="comment">// 页面开始加载时调用</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">didStartProvisionalNavigation</span><span class="selector-pseudo">:(WKNavigation</span> *)<span class="selector-tag">navigation</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 内容开始返回时调用</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">didCommitNavigation</span><span class="selector-pseudo">:(WKNavigation</span> *)<span class="selector-tag">navigation</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 页面加载完成时调用</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">didFinishNavigation</span><span class="selector-pseudo">:(WKNavigation</span> *)<span class="selector-tag">navigation</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 页面加载失败时调用</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">didFailProvisionalNavigation</span><span class="selector-pseudo">:(WKNavigation</span> *)<span class="selector-tag">navigation</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>新增的三个代理方法:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 这个方法是服务器重定向时调用，即 接收到服务器跳转请求之后调用</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">didReceiveServerRedirectForProvisionalNavigation</span><span class="selector-pseudo">:(WKNavigation</span> *)<span class="selector-tag">navigation</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在收到响应后，决定是否跳转</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">decidePolicyForNavigationResponse</span><span class="selector-pseudo">:(WKNavigationResponse</span> *)<span class="selector-tag">navigationResponse</span> <span class="selector-tag">decisionHandler</span><span class="selector-pseudo">:(void</span> (^)(WKNavigationResponsePolicy))<span class="selector-tag">decisionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在发送请求之前，决定是否跳转</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">decidePolicyForNavigationAction</span><span class="selector-pseudo">:(WKNavigationAction</span> *)<span class="selector-tag">navigationAction</span> <span class="selector-tag">decisionHandler</span><span class="selector-pseudo">:(void</span> (^)(WKNavigationActionPolicy))<span class="selector-tag">decisionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="4-2-WKUIDelegate-协议"><a href="#4-2-WKUIDelegate-协议" class="headerlink" title="4.2 WKUIDelegate 协议"></a>4.2 WKUIDelegate 协议</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pragma</span> <span class="selector-tag">mark</span> <span class="selector-tag">-</span> <span class="selector-tag">WKUIDelegate</span></span><br><span class="line"><span class="comment">/// 创建一个新的WebView</span></span><br><span class="line"><span class="selector-tag">-</span> (WKWebView *)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">createWebViewWithConfiguration</span><span class="selector-pseudo">:(WKWebViewConfiguration</span> *)<span class="selector-tag">configuration</span> <span class="selector-tag">forNavigationAction</span><span class="selector-pseudo">:(WKNavigationAction</span> *)<span class="selector-tag">navigationAction</span> <span class="selector-tag">windowFeatures</span><span class="selector-pseudo">:(WKWindowFeatures</span> *)<span class="selector-tag">windowFeatures</span> &#123;</span><br><span class="line"><span class="selector-tag">return</span> <span class="selector-tag">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  web界面中有弹出警告框时调用</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*  @param webView           实现该代理的webview</span></span><br><span class="line"><span class="comment">*  @param message           警告框中的内容</span></span><br><span class="line"><span class="comment">*  @param frame             主窗口</span></span><br><span class="line"><span class="comment">*  @param completionHandler 警告框消失调用</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">runJavaScriptAlertPanelWithMessage</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">message</span> <span class="selector-tag">initiatedByFrame</span><span class="selector-pseudo">:(void</span> (^)())<span class="selector-tag">completionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 输入框</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">runJavaScriptTextInputPanelWithPrompt</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">prompt</span> <span class="selector-tag">defaultText</span><span class="selector-pseudo">:(nullable</span> <span class="selector-tag">NSString</span> *)<span class="selector-tag">defaultText</span> <span class="selector-tag">initiatedByFrame</span><span class="selector-pseudo">:(WKFrameInfo</span> *)<span class="selector-tag">frame</span> <span class="selector-tag">completionHandler</span><span class="selector-pseudo">:(void</span> (^)(NSString * __nullable result))<span class="selector-tag">completionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/// 确认框</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">runJavaScriptConfirmPanelWithMessage</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">message</span> <span class="selector-tag">initiatedByFrame</span><span class="selector-pseudo">:(WKFrameInfo</span> *)<span class="selector-tag">frame</span> <span class="selector-tag">completionHandler</span><span class="selector-pseudo">:(void</span> (^)(BOOL result))<span class="selector-tag">completionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/// 警告框</span></span><br><span class="line"><span class="selector-tag">-</span> (void)<span class="selector-tag">webView</span><span class="selector-pseudo">:(WKWebView</span> *)<span class="selector-tag">webView</span> <span class="selector-tag">runJavaScriptAlertPanelWithMessage</span><span class="selector-pseudo">:(NSString</span> *)<span class="selector-tag">message</span> <span class="selector-tag">initiatedByFrame</span><span class="selector-pseudo">:(WKFrameInfo</span> *)<span class="selector-tag">frame</span> <span class="selector-tag">completionHandler</span><span class="selector-pseudo">:(void</span> (^)(void))<span class="selector-tag">completionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-另外搜集了一些-WKWebView-常用的属性："><a href="#5-另外搜集了一些-WKWebView-常用的属性：" class="headerlink" title="5.另外搜集了一些 WKWebView 常用的属性："></a>5.另外搜集了一些 WKWebView 常用的属性：</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">•    <span class="string">WKBackForwardListItem:</span> webview中后退列表里的某一个网页。</span><br><span class="line">•    <span class="string">WKFrameInfo:</span> 包含一个网页的布局信息。</span><br><span class="line">•    <span class="string">WKNavigation:</span> 包含一个网页的加载进度信息。</span><br><span class="line">•    <span class="string">WKPreferences:</span> 概括一个 webview 的偏好设置。</span><br><span class="line">•    <span class="string">WKProcessPool:</span> 表示一个 web 内容加载池。</span><br><span class="line">•    <span class="string">WKScriptMessage:</span> 包含网页发出的信息。</span><br><span class="line">•    <span class="string">WKUserScript:</span>表示可以被网页接受的用户脚本。</span><br><span class="line">•    <span class="string">WKWebViewConfiguration:</span> 初始化 webview 的设置。</span><br><span class="line">•    <span class="string">WKWindowFeatures:</span> 指定加载新网页时的窗口属性。</span><br><span class="line">•    <span class="string">WKScriptMessageHandler:</span> 提供从网页中收消息的回调方法。</span><br></pre></td></tr></table></figure>
<p>小尾巴:正像开头说的那样， WKWebView 相比UIWebView来说性能好，速度快，内存小，功能多……但现在开发中普遍用的还是 UIWebView，这是因为大多数App需要支持iOS7及以上的版本。但苹果之所以推出 WKWebView 就是为了弥补 UIWebView 的种种不足，逐渐取代 UIWebView，相信不久的将来，网页会成为 WKWebView 的天下！</p>
<p><em>今天就简单的写到这里，以后如果用到其它的了，再和大家分享😄!</em></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">刘朋坤</p>
              <p class="site-description motion-element" itemprop="description">iOS 修炼中...</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">37</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘朋坤</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
